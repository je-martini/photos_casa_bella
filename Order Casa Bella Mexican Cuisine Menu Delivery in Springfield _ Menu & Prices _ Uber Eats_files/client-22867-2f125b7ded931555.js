(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[22867,87529],{9909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>$});var o=r(36151),i=r(71110),a=r(52246),n=r(79810),s=r(59210),l=r("__fusion__1019"),c=r(94579),d=r(49235),p=r(53467),u=r(47566),m=r(40341),g=r(94813),b=r(47986),h=r(62091),f=r(87763),x=r(92633),Z=r(31913),v=r(33535),C=r(91892),T=r(71041),k=r(47310),_=r(17981),y=r(60849),S=r(75514);const I=()=>{const[e,t]=(0,o.useState)(0);return(0,o.useEffect)((()=>{let e=S.Z?.scrollY||0,r=!1;const o=()=>{const o=S.Z?.scrollY||0;Math.abs(o-e)<10||(t(o>e?1:-1),e=o>0?o:0),r=!1},i=()=>{r||(S.Z?.requestAnimationFrame(o),r=!0)};return S.Z?.addEventListener("scroll",i),()=>S.Z?.removeEventListener("scroll",i)}),[]),e};var B=r(5639),P=r(60935);const E=()=>{const[e,t]=(0,o.useState)(!1),r=(0,v.ZP)(),{isMobile:i}=(0,B.hU)(),a=(0,y.qp)({...P.K.eater_message_ccc_redesign,defaultValue:"control"}),n=I(),s=i?16:24;(0,o.useEffect)((()=>{"treatment-movement"===a&&(1===n?(r("eats:eater_message_interstitial_banner_animation",{eaterMessage:{actionType:"scroll_down"}}),t(!1)):-1===n&&(r("eats:eater_message_interstitial_banner_animation",{eaterMessage:{actionType:"scroll_up"}}),t(!0)))}),[n,a,r]);const l={opacity:e?1:0,transition:"0.2s linear"},c={transitionDuration:"0.4s",transitionTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",transform:e?`translateY(-${s}px)`:"translateY(80px)"},d={transform:"translateY(120px)",animationDelay:"0.4s",animationDuration:"0.6s",animationName:{"50%":{transform:"translateY(-8px)",animationTimingFunction:"cubic-bezier(0.4, 0.8, 0.74, 1)"},"100%":{transform:"translateY(0px)",animationTimingFunction:"cubic-bezier(0.23, 0, 0.68, 1)"}},animationPlayState:e?"running":"paused",animationFillMode:"forwards"};return(0,o.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),0);return()=>clearTimeout(e)}),[]),{bannerTransitionCSS:c,bottomBannerBackdropCSS:l,iconTransitionCSS:d,setTriggerTransition:t}};var w=r(5679),z=r(94131),D=r(33990);const $=e=>{let{metadata:t,uuid:I,surface:B,setIsOpen:$,deviceType:L,currentBanner:{topImage:R,backgroundColor:N,title:M,subtitle:O,messageTextColor:U,toggleType:Y,subtitleV2:A}}=e;const X=(0,p.dP)(t),{productCategory:F,newOfferMetadata:H}=(0,p.Y$)(t),{expiredAt:K,showCountdownClock:j,timerColors:V}=(0,_.Z)(X,t?.trackingID||"",B,"BANNER"),q=(0,g.TH)(),G=(0,v.ZP)(),J=(0,C.Z)(),{setEaterMessageInterstitialSessionCapper:W}=(0,T.Z)(),{setInterstitialStatus:Q,currentInterstitialStatus:ee,setInterstitialBannerStatus:te}=(0,k.Z)(X.promoUUID||I),{setTriggerTransition:re,bannerTransitionCSS:oe,bottomBannerBackdropCSS:ie,iconTransitionCSS:ae}=E(),ne=(0,w.Z)(t?.trackingID),se=(0,y.qp)({...P.K.eater_message_ccc_redesign,defaultValue:"control"}),[le,ce]=(0,n.hQ)(),de=(0,o.useMemo)((()=>({eaterMessage:{uuid:I||"",trackingID:t?.trackingID||"",promoCode:X.promoCode||"",itemType:"promotionBannerContent",template:"BANNER",surface:B,expiredAt:K,showCountdownClock:j,promoUuid:X.promoUUID||"",lineOfBusiness:F||ne,xpTreatment:se}})),[I,t?.trackingID,B,X.promoCode,K,j,X.promoUUID,F,ne,se]);(0,o.useEffect)((()=>{const e=()=>{te(d.ze.HIDE),$(!1)};return S.Z?.addEventListener(d.Ds,e),()=>{S.Z?.removeEventListener(d.Ds,e)}}),[$,te]),(0,o.useEffect)((()=>{G("eats:eater_message_view",de)}),[G,de]),(0,o.useEffect)((()=>{te(d.ze.SHOW)}),[te]),(0,o.useEffect)((()=>{W((0,u.V7)(B),I)}),[W,B,I]);const pe={message:J({color:U,defaultColor:"contentPrimary"}),background:J({color:N})},ue=(0,p.DW)(H);return(0,D.BX)("div",{"data-testid":"eater-message-promotion-banner",className:le({position:"relative",width:"100%",height:"100%",display:"grid",placeItems:"center",zIndex:c.I_.foreground}),children:[(0,D.tZ)("div",{id:"eater-message-bottom-bannner-backdrop",className:le({position:"fixed",bottom:"0px",transform:"DESKTOP"===L?"translateY(84px)":"translateY(100px)",pointerEvents:"none",backgroundImage:"DESKTOP"===L?"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15) 30%, rgba(0, 0, 0, 0.15))":"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.25) 30%, rgba(0, 0, 0, 0.25))",width:"100%",height:"200px",...ie})}),(0,D.tZ)("div",{className:le({display:"flex",position:"fixed",width:"100%",bottom:0,filter:"drop-shadow(0px 16px 48px rgba(0,0,0,0.28))",...oe}),children:(0,D.BX)(a.rU,{to:(0,b.tLx)(q,B),onClick:()=>{X?.isAutoApplyPromo?Q(d.FF.SUCCESS):!ee&&Y&&Q(Y),G("eats:eater_message_click",de)},className:le({position:"relative",..."DESKTOP"===L?{maxWidth:"480px"}:{},width:"100%",height:"100%",marginLeft:"DESKTOP"===L?"auto":ce.sizing.scale500,marginRight:"DESKTOP"===L?"auto":ce.sizing.scale500,display:"flex",...ue?{}:{"::before":{content:'""',position:"absolute",top:"-1px",left:"-1px",right:"-1px",bottom:"-1px",border:`1px solid ${ce.colors.borderTransparent}`,borderRadius:ce.borders.radius300,zIndex:c.I_.background}}}),children:[(0,D.BX)("div",{id:"eater-message-promotion-banner-cutout-left",className:le({position:"relative",width:ce.sizing.scale600}),children:[(0,D.tZ)("div",{className:le({position:"absolute",inset:0,borderTopLeftRadius:ce.borders.radius300,borderBottomLeftRadius:ce.borders.radius300,...ue?{...d.Jl,backgroundColor:ce.colors.borderTransparent,left:"-1px",top:"-1px",bottom:"-1px"}:{backgroundColor:(0,m.d)(ce.colors.backgroundPrimary)}})}),ue?(0,D.tZ)("div",{className:le({position:"absolute",inset:0,top:0,bottom:0,left:0,right:0,backgroundColor:(0,m.d)(ce.colors.backgroundPrimary),borderTopLeftRadius:`calc(${ce.borders.radius300} - 1px)`,borderBottomLeftRadius:`calc(${ce.borders.radius300} - 1px)`,...d.Jl})}):null]}),(0,D.BX)("div",{id:"eater-message-promotion-banner-content",className:le({display:"flex",alignItems:"center",width:"100%",overflowY:"hidden",backgroundColor:(0,m.d)(ce.colors.backgroundPrimary),padding:`${ce.sizing.scale400} 1px`,marginLeft:"-1px",marginRight:"-1px",gap:ce.sizing.scale300,...ue?{"::before":{content:'""',position:"absolute",top:"-1px",left:`calc(${ce.sizing.scale600} - 1px)`,right:`calc(${ce.sizing.scale600} - 1px)`,borderTop:`1px solid ${ce.colors.borderTransparent}`},"::after":{content:'""',position:"absolute",bottom:"-1px",left:`calc(${ce.sizing.scale600} - 1px)`,right:`calc(${ce.sizing.scale600} - 1px)`,borderTop:`1px solid ${ce.colors.borderTransparent}`}}:{}}),children:[(0,D.tZ)(h.Z,{src:R?.url?R.url:F===z.Pp.PRODUCT_CATEGORY_MEMBERSHIP?(0,i.pZ)(r(3323)):(0,i.pZ)(r(83020)),width:48,height:48,className:le(ae)}),(0,D.BX)("div",{className:le({display:"flex",justifyContent:"space-between",alignItems:"center",flexGrow:1}),children:[(0,D.tZ)("div",{className:le({display:"flex",flexDirection:"column",gap:ce.sizing.scale100,zIndex:ce.zIndex.modal,padding:`${ce.sizing.scale0} 0`}),children:j?(0,D.BX)(D.HY,{children:[(0,D.tZ)(s.Uc,{color:pe.message,children:(0,D.tZ)(f.Z,{clamp:1,children:M})}),(0,D.tZ)(x.Z,{secondsLeft:K,timerColors:V})]}):(0,D.BX)(D.HY,{children:[(0,D.tZ)(s.Uc,{color:pe.message,children:(0,D.tZ)(f.Z,{clamp:O||A?1:2,children:M})}),A?(0,D.tZ)("div",{className:le({display:"flex",alignItems:"center"}),children:(0,D.tZ)(Z.ZP,{text:A,__fontFamily:"UberMove, sans-serif"})}):O?(0,D.tZ)(s.aM,{margin:0,color:ce.colors.contentPrimary,children:(0,D.tZ)(f.Z,{clamp:1,children:O})}):null]})}),(0,D.tZ)("div",{className:le({display:"flex",alignItems:"center",":hover":{cursor:"pointer"}}),onClick:e=>{e.preventDefault(),e.stopPropagation(),re(!1),setTimeout((()=>{$(!1)}),1e3),te(d.ze.HIDE),G("eats:eater_message_dismiss",de)},children:(0,D.tZ)(l.default,{size:ce.sizing.scale700})})]})]}),(0,D.BX)("div",{id:"eater-message-promotion-banner-cutout-right",className:le({position:"relative",width:ce.sizing.scale600}),children:[(0,D.tZ)("div",{className:le({position:"absolute",inset:0,borderTopRightRadius:ce.borders.radius300,borderBottomRightRadius:ce.borders.radius300,...ue?{...d.Jv,backgroundColor:ce.colors.borderTransparent,right:"-1px",top:"-1px",bottom:"-1px"}:{backgroundColor:(0,m.d)(ce.colors.backgroundPrimary)}})}),ue?(0,D.tZ)("div",{className:le({position:"absolute",inset:0,top:0,right:0,bottom:0,backgroundColor:(0,m.d)(ce.colors.backgroundPrimary),borderTopRightRadius:`calc(${ce.borders.radius300} - 1px)`,borderBottomRightRadius:`calc(${ce.borders.radius300} - 1px)`,...d.K9})}):null]})]})})]})}},95396:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var o=r(71110),i=r(91931),a=r(91892),n=r(62091),s=r(83118),l=r(33990);const c=(0,i.zo)("div",(e=>{let{$backgroundColor:t}=e;return{height:"100%",...t?{backgroundColor:t}:{}}})),d=(0,i.zo)(n.Z,{height:"100%",objectFit:"cover"}),p=e=>{let{header:t}=e;const i=(0,a.Z)(),n="promotionHeader"===t.type?t.promotionHeader:null;if(!n)return null;const{backgroundColor:p,topImage:u,topAnimation:m}=n;return(0,l.BX)(c,{$backgroundColor:i({color:p}),children:[u?.url?(0,l.tZ)(d,{src:u.url}):null,m?.url?(0,l.tZ)(s.Z,{animationUrl:m?.url,loop:!0}):null,u?.url||m?.url?null:(0,l.tZ)(d,{src:(0,o.pZ)(r(83020))})]})}},92633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var o=r(43193),i=r(46933),a=r(79810),n=r(59210),s=r(2458),l=r(33990);const c=e=>{const[t,r]=(0,a.hQ)(),{hoursLabel:c,minutesLabel:d,secondsLabel:p,secondsLeft:u}=(0,s.ZP)(e.secondsLeft),{digitBlock:m,separator:g,prefixText:b}=e.timerColors??{digitBlock:{color:"contentPositive"},separator:{color:"contentPositive"},prefixText:{color:"contentSecondary"}},h=(0,s.sY)(u,"days"),{onTimeout:f}=e;return o.useEffect((()=>{u<=0&&f&&f()}),[f,u]),u<=s.LS&&u>=s.Xj?(0,l.BX)("div",{className:t({display:"flex",alignItems:"center",gap:r.sizing.scale100}),children:[(0,l.tZ)(n.S$,{color:b.color,children:(0,l.tZ)(i.v,{id:"shared.expiresIn"})}),(0,l.tZ)(n.S$,{color:m.color,children:(0,l.tZ)(i.v,{id:"x_days",data:{days:h}})})]}):(0,l.BX)("div",{className:t({display:"flex",alignItems:"center",gap:r.sizing.scale100}),children:[(0,l.tZ)(n.S$,{color:b.color,children:(0,l.tZ)(i.v,{id:"shared.expiresIn"})}),(0,l.BX)("div",{className:t({display:"flex",alignItems:"center",gap:r.sizing.scale0}),children:[(0,l.tZ)(n.S$,{color:m.color,children:c}),(0,l.tZ)(n.S$,{color:g.color,children:":"}),(0,l.tZ)(n.S$,{color:m.color,children:d}),(0,l.tZ)(n.S$,{color:g.color,children:":"}),(0,l.tZ)(n.S$,{color:m.color,children:p})]})]})}},17981:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var o=r(87444),i=r(15860),a=r(53467),n=r(49235),s=r(94131),l=r(91892);const c=[n.MO,n.dq,n.VM],d=s.cx.HOME_FEED_PUSH_BOTTOM_MODAL;function p(e,t,r,n){const s=(0,l.Z)(),p=c.some((e=>t.includes(e))),u=r===d,m=n?(0,a.tK)(e,s,n):(0,i.D)(e);let g=e?.expiredAt;g&&"number"==typeof g||(g=0);const b=g>0&&g<=259200;return{expiredAt:g,showCountdownClock:((0,o.Z)("time_sensitive_promo")&&p&&u&&b)??!1,timerColors:m}}},5679:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var o=r(94131),i=r(20115);function a(e){const t=(0,i.Z)("tracking_id_to_line_of_business");if(e){for(const[r,i]of Object.entries(t))if(e.includes(r)&&"string"==typeof i&&i in o.Pp)return o.Pp[i];return o.Pp.PRODUCT_CATEGORY_OTHER}return o.Pp.PRODUCT_CATEGORY_INVALID}},92220:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var o=r(46933),i=r(91931),a=r(36278),n=r(2458),s=r(15860),l=r(33990);const c=(0,i.zo)("div",{display:"flex",alignItems:"center",textAlign:"center"}),d=(0,i.zo)("div",(e=>{let{$theme:t,variant:r}=e;return{...t.typography.LabelSmall,color:(0,s.r)(r)?.separator?.color,width:"12px"}})),p=(0,i.zo)("div",(e=>{let{$theme:t,variant:r,timerColors:o}=e;const i=o||(0,s.r)(r);return{...t.typography.LabelSmall,color:i.digitBlock.color,background:i.digitBlock.background,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",height:"28px",width:"28px"}})),u=(0,i.zo)("div",(e=>{let{$theme:t,variant:r,timerColors:o}=e;const i=o||(0,s.r)(r);return{...t.typography.font150,color:i.prefixText.color}})),m=e=>{const{hoursLabel:t,minutesLabel:r,secondsLabel:i,secondsLeft:s}=(0,n.ZP)(e.secondsLeft),m=(0,n.sY)(s,"days");return s<=n.LS&&s>=n.Xj?(0,l.tZ)(c,{children:(0,l.tZ)(u,{variant:e.variant,timerColors:e.timerColors,children:(0,l.tZ)(o.v,{id:"shared.Ends_in_num_days",data:{n:m}})})}):(0,l.BX)(c,{children:[(0,l.tZ)(u,{variant:e.variant,timerColors:e.timerColors,children:(0,l.tZ)(o.v,{id:"shared.EndsIn"})}),(0,l.tZ)(a.ZP,{$width:"8px"}),(0,l.BX)(c,{children:[(0,l.tZ)(p,{variant:e.variant,timerColors:e.timerColors,children:t}),(0,l.tZ)(d,{variant:e.variant,children:":"}),(0,l.tZ)(p,{variant:e.variant,timerColors:e.timerColors,children:r}),(0,l.tZ)(d,{variant:e.variant,children:":"}),(0,l.tZ)(p,{variant:e.variant,timerColors:e.timerColors,children:i})]})]})}},15860:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,r:()=>i});const o="#288848",i=e=>{switch(e){case"ccc":return{prefixText:{color:o},digitBlock:{color:"white",background:o},separator:{color:o}};case"thin-mint":return{prefixText:{color:"white"},digitBlock:{color:o,background:"white"},separator:{color:"white"}};default:return{prefixText:{color:"black"},digitBlock:{color:"white",background:"black"},separator:{color:"black"}}}},a=e=>{if(e.timerPromotionMetadata)return{prefixText:{color:e.timerPromotionMetadata.supportingTextColor?.color?.color??""},digitBlock:{color:e.timerPromotionMetadata.timerTextColor?.color?.color??"",background:e.timerPromotionMetadata.timerBackgroundColor?.color?.color??""},separator:{color:e.timerPromotionMetadata.supportingTextColor?.color?.color??""}}}},83020:(e,t,r)=>{e.exports=r.p+"fd4081aa174bc938.svg"},3323:(e,t,r)=>{e.exports=r.p+"4da4ef2f783c2f04.svg"},90829:(e,t,r)=>{e.exports=r.p+"1c61b84fb79feffe.json"},69722:(e,t,r)=>{e.exports=r.p+"1c3ca59ec69206c8.json"}}]);