"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[42093],{47870:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(36151),i=r(68065),s=r(93468),a=r(92300),o=r(19475);const d=(0,r(79810).zo)("div",(e=>{let{$shape:t,$length:r,$theme:n}=e;const s=1===r?void 0:t!==i.X3.default?`-${n.sizing.scale100}`:"-0.5px";return{display:"flex",marginLeft:s,marginRight:s}}));d.displayName="StyledRoot";var l=r(33990);class u extends n.Component{childRefs={};static defaultProps={disabled:!1,onClick:()=>{},shape:i.X3.default,size:i.NO.default,kind:i.TO.secondary};render(){const{overrides:e={},mode:t=s.I.checkbox,children:r,selected:u,disabled:c,onClick:p,kind:h,shape:f,size:m}=this.props,[y,g]=(0,a.jb)(e.Root,d),b=this.props["aria-label"]||this.props.ariaLabel,S=t===s.I.radio,F=n.Children.count(r);return(0,l.tZ)(o.R.Consumer,{children:e=>(0,l.tZ)(y,{"aria-label":b||e.buttongroup.ariaLabel,"data-baseweb":"button-group",role:S?"radiogroup":"group",$shape:f,$length:r.length,...g,children:n.Children.map(r,((e,t)=>{if(!n.isValidElement(e))return null;const s=e.props.isSelected?e.props.isSelected:function(e,t){return!(!Array.isArray(e)&&"number"!=typeof e)&&(Array.isArray(e)?e.includes(t):e===t)}(u,t);return S&&(this.childRefs[t]=n.createRef()),n.cloneElement(e,{disabled:c||e.props.disabled,isSelected:s,ref:S?this.childRefs[t]:void 0,tabIndex:!S||s||S&&(!u||-1===u)&&0===t?0:-1,onKeyDown:e=>{if(!S)return;const t=Number(u)?Number(u):0;if("ArrowUp"===e.key||"ArrowLeft"===e.key){e.preventDefault&&e.preventDefault();const r=t-1<0?F-1:t-1;p&&p(e,r),this.childRefs[r].current&&this.childRefs[r].current.focus()}if("ArrowDown"===e.key||"ArrowRight"===e.key){e.preventDefault&&e.preventDefault();const r=t+1>F-1?0:t+1;p&&p(e,r),this.childRefs[r].current&&this.childRefs[r].current.focus()}},kind:h,onClick:r=>{c||(e.props.onClick&&e.props.onClick(r),p&&p(r,t))},shape:f,size:m,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return 1===r.length?{}:f!==i.X3.default?{marginLeft:t.sizing.scale100,marginRight:t.sizing.scale100}:{marginLeft:"0.5px",marginRight:"0.5px"}},props:{"aria-checked":s,role:S?"radio":"checkbox"}},...e.props.overrides}})}))})})}}},93468:(e,t,r)=>{r.d(t,{I:()=>n});const n=Object.freeze({radio:"radio",checkbox:"checkbox"});Object.freeze({change:"change"})},97568:(e,t,r)=>{r.d(t,{ZP:()=>f});var n=r(36151),i=r(33535),s=r(43139),a=r(31773),o=r(30768),d=r(32504),l=r(71692),u=r(47986),c=r(99317),p=r(55758),h=r(94813);const f=e=>{let{feed:t,pageType:r,trackingId:f}=e;const m=(0,p.d)(),y=(0,h.TH)(),{feedArgs:g}=(0,d.Z)(),b=(0,s.Z)(),[S,F]=(0,n.useState)(!1),v=t.hasLoaded&&t.data?.hasPinnedFeedLoaded&&t.data?.hasDynamicFeedLoaded,A=Boolean(t.hasLoaded&&(t.data?.hasPinnedFeedLoaded||t.data?.hasDynamicFeedLoaded)),Z=t.data?.cityName,k=t.data?.isFallbackFeed||!1,T=(0,u.U8Z)(y.search,["searchSource"]);let L=(0,o.Z)();L||"SHORTCUTS"!==T.searchSource||(L=g.userQuery?.toUpperCase()),(0,a.Z)({isContentRendered:A,trackingId:f});const C=(0,n.useMemo)((()=>JSON.stringify([...t.data?.feedAffixes||[],...t.data?.feedItems||[]].map(((e,t)=>({index:t,analyticsLabel:e.analyticsLabel||e.type}))))),[t.data?.feedAffixes,t.data?.feedItems]),R=Boolean((0,c.VA)({countdowns:t?.data?.countdowns||[],countdownLabel:"BANDWAGON",anyUuid:!0})),N=(e=>{if(!e.hasLoaded||!e.data?.sortAndFilters)return[];const t=e.data?.sortAndFilters?.filter((e=>"sort"!==e.type));return t.length?t.map((e=>e.options.filter((e=>e.selected)).map((t=>`${e.type}:${t.value}`)))).flat():[]})(t),I=(e=>{if(!e.hasLoaded||!e.data?.sortAndFilters)return"None";const t=e.data?.sortAndFilters?.find((e=>"sort"===e.type));if(!t)return"None";const r=t.options.find((e=>e.selected));return r?r.value:"None"})(t),_=(0,i.ZP)();(0,n.useEffect)((()=>{v&&!S&&(F(!0),_("eats:home_feed_view",{isBandwagon:R,feedAnalyticsMeta:C,diningMode:m,activePreferenceType:"global",cityName:Z,isFallbackFeed:k,verticalType:L||"HOME",feedContext:(0,l.P)(r),homeFeedView:{filtersApplied:N,sortApplied:I}}))}),[_,m,R,C,v,Z,N,I,S,k,L,r]),(0,n.useEffect)((()=>{A&&b()}),[A,b])}},48819:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(47986),i=r(74622),s=r(2237),a=r(62459);var o=r(94813),d=r(12040);const l=e=>{const{searchSource:t,displayType:r,shouldGetSearchFeed:l=!0,recaptcha:u}=e||{},c=(0,o.TH)(),p=(0,n.U8Z)(c.search,["searchCategoryQuery","date","startTime","endTime","carouselId","place","sortAndFilters","billboardUuid","feedProvider","promotionUuid","targetingStoreTag","venueUUID","selectedSectionUUID","favorites","vertical","searchSource","searchType","keyName","userQuery"]),h={userQuery:p.searchCategoryQuery||p.userQuery,date:p.date,startTime:Number(p.startTime),endTime:Number(p.endTime),sortAndFilters:(0,d.nL)(p.sortAndFilters),vertical:p.vertical,searchSource:t||p.searchSource,displayType:r||"",searchType:p.searchType,keyName:p.keyName,cacheKey:"",recaptchaToken:u||""},f=l&&(Boolean(p.searchCategoryQuery)||Boolean(p.userQuery));return{searchFeed:function(e){const t=(0,a.Z)("getSearchFeedV1"),r=(0,s.H)("getSearchFeedV1",e.getInitialRequestArguments());return(0,i.useInfiniteQuery)({queryKey:r,queryFn:e=>{let{pageParam:r,queryKey:n}=e;return t.request("getSearchFeedV1",r||n[1])},enabled:e.enabled,getNextPageParam:e.getNextPageParam})}({enabled:f,getInitialRequestArguments:()=>h,getNextPageParam:e=>function(e,t){if(e.meta.hasMore)return{...t,pageInfo:{offset:e.meta.offset,pageSize:null}}}(e,h)}),searchCategoryQuery:p.searchCategoryQuery,shouldGetSearchFeed:f}}},95398:(e,t,r)=>{r.d(t,{Z:()=>I});var n=r(36151),i=r(92300),s=r(32857),a=r(54840),o=r("__fusion__1128"),d=r(91931),l=r(14362),u=r(33990);const c=(0,d.zo)("img",(e=>{let{selected:t,$theme:r}=e;const n=r.name?.includes("dark");return{display:"inline-block",width:"1em",height:"1em",...t!==n?{filter:"invert(1)"}:{}}})),p=e=>{let{isSelected:t,filterValue:r}=e;const n=(0,l.Z)(),i=((e,t)=>{const r=t?.options?.[0]?.iconUrl;return e===a.Lp&&r?.toLowerCase().includes("override_branded_")?r:null})(a.Lp,r);return i?(0,u.tZ)(c,{src:i,selected:t}):(0,u.tZ)(o.default,{...n?{color:"contentPrimary"}:null})};var h=r(15670);const f=e=>{let{selectedSortAndFilters:t,options:r,uuid:n,label:i}=e;const s=t.find((e=>e.uuid===n))?.options[0]?.uuid,a=r.find((e=>e.uuid===s))?.value,o=(0,h.Z)(a);return o||i};var m=r(85989);const y=e=>{let{selectedSortAndFilters:t,options:r,uuid:n,label:i}=e;const s=t.find((e=>e.uuid===n))?.options[0]?.uuid,a=r.find((e=>e.uuid===s))?.value,o=(0,m.Z)(a,r);return o||i},g=e=>{let{selectedSortAndFilters:t,options:r,uuid:n,label:i}=e;const s=t.find((e=>e.uuid===n));if(!s)return i;const a=s.options||[];return 0===a.length?i:`${i} (${a.length})`};var b=r(14016);const S=e=>{const t=(0,b.T)();if(e)return t("sort_by",{sortingOption:e.label})},F=e=>{let{selectedSortAndFilters:t,options:r,uuid:n,label:i}=e;const s=t.find((e=>e.uuid===n))?.options[0]?.uuid,a=r.find((e=>e.uuid===s)),o=S(a);return o||i},v=e=>{let{selectedSortAndFilters:t,options:r,uuid:n,label:i,type:s}=e;const a=t.find((e=>e.uuid===n))?.options?.map((e=>r.find((t=>t.uuid===e.uuid))?.value)).filter((e=>e)).join(",");return(0,u.tZ)("div",{children:a||i})};var A=r(78422),Z=r(63300),k=r(91377),T=r(55758);const L={[a.Lp]:p},C={[a.GZ]:"TagOutlined",[a.I4]:"StarOutlined",[a._Z]:"MedalOutlined",[a.Vz]:"CreditCardOutlined"},R={[a.I4]:f,[a.b5]:y,[a.Ih]:g,[a._l]:F,[a.h1]:v},N=(0,n.forwardRef)(((e,t)=>{let{filterValue:r,selectedSortAndFilters:n,onOpen:a,onOptionSingleSelect:o,pageType:d,position:c,...p}=e;const h=(0,l.Z)(),{type:f,uuid:m,options:y,label:g}=r,b=(0,T.d)(),{onClick:S,impressionRef:F}=(0,Z.v)({impressionEventName:"sort_and_filter_impression",tapEventName:"sort_and_filter_tap",payload:{focusedFilterType:f,diningMode:b,displaySurface:d,filterBarPosition:c,deepestFilterOptionSelection:0,isManuallyFiltered:n.length>0,numberOfFiltersApplied:n.length}});if(!y||!y.length)return null;const v=1===y.length?y[0]?.label||"":g,N=((e,t,r)=>{if(e in L){const n=L[e];return(0,u.tZ)(n,{filterValue:r,isSelected:t})}if(e in C){const t=C[e];return(0,u.tZ)(A.Z,{name:t})}return null})(f,Boolean(p?.isSelected),r),I=y.length>1?()=>(0,u.tZ)(A.Z,{name:"ChevronDownSmallFilled"}):void 0,_=R[f];return(0,u.tZ)(s.Z,{ref:(0,k.Z)(F,t),startEnhancer:N,endEnhancer:I,...p,onClick:()=>{S(),y.length>1?a(r):o(r)},overrides:(0,i.aO)(p.overrides,{BaseButton:{style:e=>{let{$theme:t}=e;return{whiteSpace:"nowrap",marginRight:"8px",...h?t.typography.LabelSmall:{}}}}}),children:_?(0,u.tZ)(_,{selectedSortAndFilters:n,options:y,uuid:m,label:g}):v})}));N.displayName="SortAndFilterSharedFilterPill";const I=N},91407:(e,t,r)=>{r.d(t,{z:()=>s});var n=r(36151),i=r(11203);const s=(e,t)=>{const[r,s]=(0,n.useState)(null),a=(0,n.useMemo)((()=>{const r=[];return e?.forEach(((e,n)=>{t.find((t=>t.uuid===e.uuid))&&r.push(n)})),r}),[e,t]),o=(0,n.useMemo)((()=>({...(0,i.I3)(t),...(0,i.Js)(r)})),[t,r]),d=(0,n.useMemo)((()=>(e||[]).map((e=>{const t=e.options.map((t=>{const r=o[e.uuid]?.find((e=>e.uuid===t.uuid));return{...t,selected:Boolean(r)}}));return{...e,options:t}}))),[e,o]);return{selectedFilter:r,sortAndFiltersState:d,selectedFilterIndex:a,setSelectedFilter:s,currentSelectedFilter:o}}},33651:(e,t,r)=>{r.d(t,{D:()=>p});var n=r(36151),i=r(91631),s=r(94813),a=r(47986),o=r(12040),d=r(79857),l=r(73472),u=r(65014),c=r(2139);const p=()=>{const e=(0,s.TH)(),t=(0,i.k6)(),r=(0,d.Z)(),p=(0,c.Z)(),{startTiming:h}=(0,l.K3)(),f=(0,n.useMemo)((()=>(0,a.U8Z)(e.search,["sortAndFilters"])),[e.search]),m=(0,n.useMemo)((()=>(0,o.nL)(f.sortAndFilters)),[f.sortAndFilters]);return{selectedSortAndFilters:m,handleSelect:(n,i)=>{if(!n||!n.uuid)return;const s={uuid:n.uuid,options:n.options.map((e=>({uuid:e.uuid})))},o=m.findIndex((e=>e.uuid===n.uuid));if(-1===o&&0===s.options.length)return;let d;-1===o?d=[...m,s]:0===s.options.length?d=[...m.filter((e=>e.uuid!==n.uuid))]:(d=[...m],d[o]=s),p&&d.sort(((e,t)=>{const r=e.uuid,n=t.uuid;return r<n?-1:r>n?1:void 0})),i&&h(u.B.FEED_REFRESH_PILL_FILTER_RESULTS_LOAD_EVENT_NAME,{shouldOverride:!0,metadata:i}),r?t.replace((0,a.zSE)(e,d)):t.push((0,a.zSE)(e,d))}}}},11203:(e,t,r)=>{r.d(t,{I3:()=>n,Js:()=>i,by:()=>s});const n=e=>e.reduce(((e,t)=>{const{options:r}=t;return r&&(e[t.uuid]=r),e}),{}),i=e=>e?{[e.uuid]:e.options.map((e=>{let{uuid:t,selected:r}=e;return r?{uuid:t}:null})).filter(Boolean)}:{},s=e=>e.options.some((e=>e.selected))?e:(e.options=e.options.map(((e,t)=>e.isDefault?(e.selected=!0,{...e}):e)),{...e})}}]);