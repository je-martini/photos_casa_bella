"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[39777],{90985:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(92300),n=r(95958),o=r(48700),a=r(42209),s=r(33990);const l=e=>{let{children:t,content:r,color:l,shape:d=o.X3.rectangle,placement:c=o.r4.topRight,hierarchy:u,horizontalOffset:h,verticalOffset:p,hidden:g,overrides:m={}}=e;const[Z,y]=(0,i.jb)(m.Badge,n.j8),[v,f]=(0,i.jb)(m.Root,n.Fp),[x,b]=(0,i.jb)(m.Positioner,n.x5),S=(0,a.u)(t);o.r4.topLeft,o.r4.topRight,o.r4.bottomRight,o.r4.bottomLeft;return S?(0,s.BX)(v,{...f,children:[S,(0,s.tZ)(x,{$horizontalOffset:h,$verticalOffset:p,$placement:c,$role:o.HB.badge,...b,children:(0,s.tZ)(Z,{$hierarchy:u,$shape:d,$color:l,$hidden:g,...y,children:r})})]}):(0,s.tZ)(Z,{$hierarchy:u,$shape:d,$color:l,$hidden:g,...y,children:r})}},98470:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(36151),n=r(92300),o=r(91972),a=r(72525),s=r(33990);class l extends i.Component{static defaultProps={getProgressLabel:(e,t,r)=>`${Math.round((e-r)/(t-r)*100)}% Complete`,infinite:!1,overrides:{},showLabel:!1,size:o.N.medium,steps:1,successValue:100,minValue:0,maxValue:100,value:0};componentDidMount(){0}render(){const{overrides:e={},getProgressLabel:t,value:r,size:o,steps:l,successValue:d,minValue:c,maxValue:u,showLabel:h,infinite:p,errorMessage:g,forwardedRef:m,...Z}=this.props,y=this.props["aria-label"]||this.props.ariaLabel,v=t(r,u,c),f=function(e,t,r,i){return`Step ${Math.ceil((e-r)/(t-r)*i)} of ${i}`}(r,u,c,l),x=y||this.props.infinite?"Loading":this.props.steps>1?f:v,b=100!==u?u:d,[S,$]=(0,n.jb)(e.Root,a.Fp),[C,_]=(0,n.jb)(e.BarContainer,a.d4),[w,z]=(0,n.jb)(e.Bar,a.sQ),[k,I]=(0,n.jb)(e.BarProgress,a.Bd),[L,T]=(0,n.jb)(e.Label,a.ar),[B,E]=(0,n.jb)(e.InfiniteBar,a.ko),P={$infinite:p,$size:o,$steps:l,$successValue:b,$minValue:c,$maxValue:b,$value:r};return(0,s.BX)(S,{ref:m,"data-baseweb":"progress-bar",role:"progressbar","aria-label":x,"aria-valuenow":p?null:r,"aria-valuemin":p?null:c,"aria-valuemax":p?null:b,"aria-invalid":!!g||null,"aria-errormessage":g,...Z,...P,...$,children:[(0,s.tZ)(C,{...P,..._,children:p?(0,s.BX)(i.Fragment,{children:[(0,s.tZ)(B,{$isLeft:!0,$size:P.$size,...E}),(0,s.tZ)(B,{$size:P.$size,...E})]}):function(){const e=[];for(let t=0;t<l;t++)e.push((0,s.tZ)(w,{...P,...z,children:(0,s.tZ)(k,{$index:t,...P,...I})},t));return e}()}),h&&(0,s.tZ)(L,{...P,...T,children:t(r,b,c)})]})}}const d=i.forwardRef(((e,t)=>(0,s.tZ)(l,{forwardedRef:t,...e})));d.displayName="ProgressBar";const c=d},61799:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(46933),n=r(15649),o=r(60362),a=r(33990);const s=e=>{const t=(0,n.Z)(),r={date:(0,o.p6)(t,e.date),startTime:(0,o.CJ)(t,e.startTime),endTime:(0,o.CJ)(t,e.endTime)};return"shared.scheduledFor.dateAndTimeRange"===e.translationKey?(0,a.tZ)(i.v,{id:"shared.scheduledFor.dateAndTimeRange",data:r}):"shared.scheduledDeliveryTime.dateAndTimeRange"===e.translationKey?(0,a.tZ)(i.v,{id:"shared.scheduledDeliveryTime.dateAndTimeRange",data:r}):"shared.scheduledPickupTime.dateAndTimeRange"===e.translationKey?(0,a.tZ)(i.v,{id:"shared.scheduledPickupTime.dateAndTimeRange",data:r}):(0,a.tZ)(i.v,{id:"shared.dateAndTimeRange",data:r})}},9071:(e,t,r)=>{r.d(t,{Z:()=>k});var i=r(36151),n=r(91931),o=r(46329),a=r(33535),s=r(50818),l=r(94579),d=r(53456),c=r(1257),u=r(74057),h=r(28222),p=r(57444),g=r(91631),m=r(47986),Z=r(70471),y=r(87444),v=r(94813),f=r(70971),x=r(79168),b=r(33990);const S=(0,n.zo)("div",(e=>{let{$isFullWidth:t}=e;return{display:"flex",position:"relative",width:t?"100%":"auto"}})),$=(0,n.w1)(d.Z,(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",...t.typography.LabelSmall,textAlign:"center",height:"100%",padding:`0 ${t.sizing.scale550}`,borderRadius:t.borders.pillButtonBorderRadius,transition:l.pB.default}})),C=(0,n.zo)("div",(e=>{let{$theme:t,$background:r,$isDisabled:i}=e;return{background:t.colors[r||"backgroundSecondary"],display:"flex",width:"100%",borderRadius:t.borders.pillButtonBorderRadius,padding:"4px",boxSizing:"border-box",whiteSpace:"nowrap",...i?{...(0,p.Z)(t)}:{}}})),_=(0,n.zo)("div",{display:"grid",gridAutoFlow:"column",gridAutoColumns:"1fr",width:"100%"}),w=(0,n.zo)("div",(e=>{let{$isDisabled:t}=e;return{display:"flex",justifyContent:"center",zIndex:l.I_.surface,...t?{pointerEvents:"none"}:{}}})),z=(0,n.zo)("div",(e=>{let{$background:t,$position:r,$theme:i,$width:n,$hasShadow:o}=e;return{position:"absolute",transform:`translateX(${r}px)`,height:"calc(100% - 8px)",width:`${n||0}px`,background:i.colors[t],borderRadius:i.borders.pillButtonBorderRadius,zIndex:l.I_.base,transition:n?l.pB.default:"none",...o?{boxShadow:i.lighting.shadow400}:{}}})),k=e=>{const t=(0,g.k6)(),r=(0,v.TH)(),n=(0,a.ZP)(),l=(0,i.useRef)([]),d=(0,i.useRef)(!1),[p,k]=(0,i.useState)({position:0,width:0}),{diningModes:I,handleDiningModeClick:L}=(0,o.ZP)(null),T=(0,c.Z)(I),{modalName:B}=(0,m.RAN)(r,["modalName"]),{diningMode:E}=(0,u.Z)();(0,o.OT)({diningModes:T});const P=(0,h.Z)(),R=(0,y.Z)("apple_maps_checkout_dining_mode_listener"),O=(0,Z.Z)(),D=(0,f.T)(),H=e.supportedDiningModes?e.supportedDiningModes:T,M=H&&H.length<2||!e.supportedDiningModes&&!T||D;(0,i.useEffect)((()=>{M||!H||d.current||(d.current=!0,n("eats:dining_mode_selector",{diningModes:(0,s.rG)(H),diningMode:E}))}),[n,H,E,M]),(0,i.useEffect)((()=>{if(!R||!O)return;Boolean(B)||"DELIVERY"===E&&(L("PICKUP"),n("eats:apple_maps_checkout_dining_mode_reset_activated"))}),[B,O,E,L,R,n]),(0,i.useEffect)((()=>{if(H){let e=0;H.forEach(((t,r)=>{const i=l.current[r]?.getBoundingClientRect()||null;E===t.mode&&i&&k({position:e,width:i.width}),e+=i?.width||0}))}}),[H,E]);const A=(0,x.Z)(e.size??(e.smallPill?"small":void 0));if(M)return null;let U;return U=e.isDisabled&&e.inverseColors?"contentStateDisabled":P?"primary":e.inverseColors?"backgroundInversePrimary":"backgroundPrimary",(0,b.tZ)(S,{$isFullWidth:Boolean(e.isFullWidth),children:(0,b.BX)(C,{$isDisabled:e.isDisabled,$style:A,children:[(0,b.tZ)(_,{children:(H||[]).map(((i,o)=>{const a=E===i.mode;let s;return s=e.isDisabled?e.inverseColors&&a?"disabled":"contentStateDisabled":P&&a?"buttonPrimaryText":P&&!a?"contentPrimary":e.inverseColors&&a?"contentInversePrimary":"contentPrimary",(0,b.tZ)(w,{ref:e=>{l.current[o]=e},$isDisabled:e.isDisabled,children:(0,b.tZ)($,{type:"radio",color:s,label:i.title,value:i.mode,checked:a,hideBackground:!0,onChange:()=>{e.isDisabled||(n("eats:dining_mode_click",{diningMode:i.mode}),L(i.mode),O&&"DELIVERY"===i.mode&&t.push((0,m.vN_)(r,"locationManager","DELIVERY_LOCATION_MANAGER")))}})},i.mode)}))}),(0,b.tZ)(z,{$background:U,$position:p.position,$width:p.width,$hasShadow:e.hasPillShadow})]})})}},33841:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(91931),n=r(24187),o=r(52298),a=r(69630),s=r(33990);const l=(0,i.zo)("div",(e=>{let{$theme:t,$isInMulticart:r}=e;return{padding:"24px",position:r?"sticky":"absolute",bottom:0,left:0,right:0,...t.overlays.floatingButtonGradient}}));function d(e){const[t,r]=(0,n.Z)(),i=(0,a.Z)();return(0,s.BX)(s.HY,{children:[i?null:(0,s.tZ)(o.ZP,{$height:t?.height||0}),(0,s.tZ)(l,{$isInMulticart:i,ref:r,children:e.children})]})}},74365:(e,t,r)=>{r.d(t,{c:()=>m});var i=r(43193),n=r(36151),o=r(91931),a=r(94579),s=r(14770),l=r(33990);const d=(0,o.zo)("div",{padding:"16px 24px"}),c=(0,o.zo)("div",(e=>({position:"absolute",width:"100%",top:"0",left:"0",backgroundColor:e.$theme.colors[e.$bgColor],zIndex:a.I_.modal}))),u=(0,o.zo)(s.Z,{width:"24px",height:"24px",display:"flex",position:"relative",cursor:"pointer",right:"6px"}),h=(0,o.zo)("div",{position:"relative",marginTop:"8px"}),p=((0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.onNegative}})),(0,o.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelMedium}))),g=e=>{const[t,r]=i.useState(!1);(0,n.useEffect)((()=>{r(!1)}),[]);return(0,l.tZ)(l.HY,{children:t?null:(0,l.tZ)(c,{$bgColor:e.$bgColor,children:(0,l.BX)(d,{children:[(0,l.tZ)(u,{onClick:()=>{r(!0)},iconColor:e.$iconFill}),(0,l.tZ)(h,{children:e.children})]})})})},m=e=>(0,l.tZ)(g,{$bgColor:"warning",$iconFill:"onWarning",children:(0,l.tZ)(p,{children:e.children})})},96965:(e,t,r)=>{r.d(t,{Z:()=>I});var i=r(36151),n=r(52246),o=r(14016),a=r(33535),s=r(79908),l=r(45423),d=r(22395),c=r(36278),u=r(91931),h=r(57444),p=r(61799),g=r(22787),m=r(58814);var Z=r(80165),y=r(74057),v=r(54939),f=r(28222),x=r(82794),b=r(71051),S=r(29230),$=r(97130),C=r(33990);const _=e=>{let{$theme:t,$isOnlineOrdering:r,$isDisabled:i}=e;return i?(0,h.Z)(t):r?(e=>{let{$theme:t,disabled:r}=e;return{color:t.colors.onlineOrderingPrimaryInverseText,background:t.colors.onlineOrderingPrimaryInverse,...r?(0,h.Z)(t):{":hover":{background:t.colors.onlineOrderingPrimaryInverseHover},":active":{background:t.colors.onlineOrderingPrimaryInverseActive},...(0,m.Z)(t)}}})({$theme:t}):(0,g.y)({$theme:t})},w=(0,u.zo)(n.rU,(e=>{let{$size:t,$drawBorder:r,$theme:i,$isOnlineOrdering:n,$isDisabled:o}=e;return{...i.typography.LabelSmall,borderRadius:i.borders.pillButtonBorderRadius,display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",height:"large"===t?"48px":"36px",padding:"8px 12px",boxSizing:"border-box",border:r?`1px solid ${i.colors.onlineOrderingPrimaryInverseActive}`:void 0,minWidth:`${S.Kv.addressMinWidth}px`,flex:"0 1 auto",..._({$theme:i,$isDisabled:o,$isOnlineOrdering:n})}})),z=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:`1 1 ${t.sizing.scale1200}`}})),k=(0,u.zo)("div",{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",flex:"0 1 content"}),I=e=>{const{deliveryTime:t,deliveryLocation:r,diningMode:n}=(0,y.Z)(),u=(0,i.useContext)(b.k7),h=(0,o.T)(),g=(0,a.ZP)(),m=(0,Z.WI)("header-location-button"),S=(0,f.Z)(),_=(0,x.d1)()?.customization?.colorInfo?.primary,{shouldOverrideLabel:I,overrideLabel:L}=(0,v.Z)(),{storeUuid:T,isSchedulable:B}=e,{redirectUrl:E}=(0,$.X)();return r?(0,C.BX)(w,{"data-testid":"edit-delivery-location-button",ref:m,$size:e.size,$isDisabled:e.deliveryLocationPickerDisabled,to:()=>E({storeUuid:T,isSchedulable:B}),onClick:t=>{e.deliveryLocationPickerDisabled?t.preventDefault():(g("eats:delivery_details_click"),u.set("addressChangeTouched",!0))},$isOnlineOrdering:S,$drawBorder:Boolean(S&&_),children:[(0,C.tZ)(s.Z,{color:"onHeader",type:"Pin",width:"16px",ariaLabel:h("component.location_typeahead_mobile.deliver_to")}),(0,C.tZ)(c.ZP,{$width:"8px"}),I?L:(0,C.tZ)(z,{"data-testid":"delivery-address-label",children:r.address.address1}),(0,C.tZ)(d.Z,{spaces:2}),(0,C.tZ)(k,{"data-test":"delivery-time",children:"scheduled"in t?(0,C.tZ)(p.Z,{date:t.date,startTime:t.startTime,endTime:t.endTime}):(0,C.tZ)(l.Z,{shortenedTime:!0,diningMode:n})})]}):null}},81707:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,o.tZ)("path",{d:"M18 7V2H6v5H1v15h22V7h-5zm-3 0H9V5h6v2z"})})}const s=i.forwardRef(a)},56348:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,o.tZ)("path",{d:"M22 6.9v3.8l-10 7.7-10-7.7V6.9l10 7.7 10-7.7z"})})}const s=i.forwardRef(a)},87873:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),n=r(73518),o=r(33990);function a(e,t){return(0,o.tZ)(n.Z,{viewBox:"0 0 20 20",ref:t,...e,children:(0,o.tZ)("path",{d:"M18.834 17l-3.666-3.667c.916-1.333 1.5-2.916 1.5-4.666C16.667 4.333 13.083.75 8.75.75 4.417.75.834 4.333.834 8.667c0 4.333 3.583 7.916 7.917 7.916 1.75 0 3.333-.583 4.666-1.5l3.667 3.667 1.75-1.75zm-15.5-8.25c0-3 2.417-5.417 5.417-5.417s5.416 2.417 5.416 5.417-2.416 5.417-5.416 5.417c-3 0-5.417-2.417-5.417-5.417z"})})}const s=i.forwardRef(a)},53456:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(91931),n=r(37555),o=r(94579),a=r(33990);const s=(0,i.zo)("div",(e=>{let{$color:t,$checked:r,$hideBackground:i,$theme:n,$hasShadow:a}=e;return{...n.typography.LabelSmall,padding:"8px 12px",boxSizing:"border-box",...r?{backgroundColor:n.colors.buttonPrimaryFill,color:n.colors.buttonPrimaryText}:{backgroundColor:n.colors.buttonSecondaryFill,color:n.colors.buttonSecondaryText},...i?{backgroundColor:"initial"}:{},...t?{color:n.colors[t]}:{},cursor:"pointer",userSelect:"none",...a?{boxShadow:n.lighting.shadow400,transition:"box-shadow ease 0ms",transitionDelay:r?o.pB.defaultDuration:"0ms"}:{}}})),l=(0,i.Le)(s,(e=>function(t){return(0,a.tZ)(e,{$color:t.color,$checked:t.checked,$hideBackground:t.hideBackground,$hasShadow:t.hasShadow,role:t.type,"aria-checked":t.checked,tabIndex:0,"aria-label":t.label,onClick:()=>t.onChange(t.value),onKeyDown:e=>e.keyCode===n.Fx&&t.onChange(t.value),$as:t.$as,to:t.to,children:t.label})}))},6573:(e,t,r)=>{r.d(t,{Z:()=>x});var i=r(91931),n=r(46933),o=r(36278),a=r(79908),s=r(94579),l=r(81707),d=r(33990);const c=(0,i.zo)("li",(e=>{let{$theme:t,$isHighlighted:r,$size:i}=e;return{backgroundColor:r?t.colors.menuFillHover:"transparent",padding:"mini"===i?t.sizing.scale500:t.sizing.scale600,display:"flex",cursor:"pointer",transition:s.pB.itemBackground,outline:"none",":hover":{background:t.colors.menuFillHover}}})),u=(0,i.zo)("div",{alignSelf:"start"}),h=(0,i.zo)("div",{minWidth:0}),p=(0,i.zo)("div",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.ParagraphSmall:t.typography.ParagraphMedium,color:t.colors.contentPrimary,textOverflow:"ellipsis",overflow:"hidden"}})),g=(0,i.zo)("div",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.ParagraphXSmall:t.typography.ParagraphSmall,color:t.colors.contentSecondary,textOverflow:"ellipsis",overflow:"hidden"}})),m=e=>(0,d.BX)(c,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),$size:e.size,children:[(0,d.tZ)(u,{children:(0,d.tZ)(a.Z,{type:"Pin",background:!0})}),(0,d.tZ)(o.ZP,{$width:"8px"}),(0,d.BX)(h,{children:[(0,d.tZ)(p,{$size:e.size,children:e.location.addressLine1}),(0,d.tZ)(g,{$size:e.size,children:e.location.addressLine2})]})]}),Z=e=>(0,d.BX)(c,{$isHighlighted:e.highlightedIndex===e.index,...e.getItemProps({index:e.index}),children:[(0,d.BX)(u,{children:["work"===e.taggedLocation.tag.toLowerCase()?(0,d.tZ)(l.Z,{..."mini"===e.size?{size:20}:{}}):null,"work"!==e.taggedLocation.tag.toLowerCase()?(0,d.tZ)(a.Z,{type:"home"===e.taggedLocation.tag?"Home":"Time",background:!0,..."mini"===e.size?{width:20,height:20}:{}}):null]}),(0,d.tZ)(o.ZP,{$width:"8px"}),(0,d.BX)(h,{children:[(0,d.tZ)(p,{$size:e.size,children:e.taggedLocation.address.address.title}),(0,d.tZ)(g,{$size:e.size,children:e.taggedLocation.address.address.subtitle}),e.taggedLocation.interactionString&&e.taggedLocation.instructionNotes?(0,d.tZ)(g,{$size:e.size,children:(0,d.tZ)(n.v,{id:"shared.taggedLocationInstructions",data:{interaction:e.taggedLocation.interactionString,notes:e.taggedLocation.instructionNotes}})}):(0,d.tZ)(g,{$size:e.size,children:e.taggedLocation.interactionString||e.taggedLocation.instructionNotes})]})]}),y=(0,i.zo)("li",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,padding:"16px"}})),v=e=>{let{getItemProps:t}=e;return(0,d.tZ)(y,{...t({index:0}),children:(0,d.tZ)(n.v,{id:"shared.hmmCantFindThisAddress"})})},f=(0,i.zo)("ul",(e=>{let{$hasResults:t,$theme:r,$size:i}=e;return{background:r.colors.menuFill,position:"absolute",top:"100%",left:0,right:0,zIndex:s.I_.foreground,boxShadow:r.shadows.box,...t?{paddingBottom:"8px"}:{},..."mini"===i?{borderRadius:r.borders.inputBorderRadiusMini,marginTop:r.sizing.scale300}:{}}})),x=e=>{let t=null,r=!1;return e.isOpen&&(e.showTryAgainMessage?t=(0,d.tZ)(v,{getItemProps:e.getItemProps}):(t=e.locations.map(((t,r)=>"isTaggedLocation"in t&&t.isTaggedLocation?(0,d.tZ)(Z,{index:r,taggedLocation:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex,size:e.size},r):"isTaggedLocation"in t?void 0:(0,d.tZ)(m,{index:r,location:t,getItemProps:e.getItemProps,highlightedIndex:e.highlightedIndex,size:e.size},r))),r=e.locations.length>0)),(0,d.tZ)(f,{...e.getMenuProps(),$hasResults:r,$size:e.size,children:t})}},639:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(14016),n=r(91931),o=r(6573),a=r(33535),s=r(48402),l=r(69404),d=r(54669),c=r(94579),u=r(68568),h=r(33990);const p=(0,n.zo)("label",c.E2),g=e=>{const t=(0,a.ZP)(),r=(0,d.Z)(),n=(0,i.T)(),{query:c,placeholder:g,locations:m,isLoading:Z,highlightedIndex:y,isOpen:v,showTryAgainMessage:f,openMenu:x,reset:b,getItemProps:S,getMenuProps:$,getInputProps:C,getLabelProps:_}=(0,u.Z)({onLocationSelected:e.onLocationSelected,initialQuery:e.initialQuery,id:e.id,initialIsClosed:!0});return(0,h.tZ)(l.Z,{children:(0,h.BX)("div",{ref:e.registerRef,children:[(0,h.tZ)(p,{..._(),children:n("shared.combobox.a11y_instructions")}),(0,h.tZ)(s.Z,{query:c,getInputProps:C,reset:b,placeholder:g,isLoading:Z,iconType:"Pin",backgroundColor:"inputFill",onFocus:()=>{x(),t("eats:enter_delivery_address_start",{address:r?.address.address1,latitude:r?.latitude,longitude:r?.longitude})},size:e.size,highlightFocus:e.highlightFocus}),(0,h.tZ)(o.Z,{locations:m.data||[],getMenuProps:$,getItemProps:S,highlightedIndex:y,showTryAgainMessage:f,isOpen:v,size:e.size})]})})}},43675:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(36151),n=r(58984),o=r(94813),a=r(44692),s=r(69086),l=r(78034),d=r(33535),c=r(54669),u=r(65717),h=r(7819),p=r(41878),g=r(25862),m=r(65014),Z=r(73472),y=r(33990);const v=e=>{const{searchHomeResults:t=[],sections:r=[],verticalList:v,selectedVertical:f}=e,x=(0,o.TH)(),b=(0,n.I0)(),S=(0,d.ZP)(),$=(0,c.Z)(),{startTiming:C}=(0,Z.K3)(),_=(0,u.Z)(),w=(e,r)=>({itemPosition:r,title:e.titleTerm,type:e.type,sectionItemsCount:t.length-1,sectionPosition:0,sectionTitle:e.type});i.useEffect((()=>{b((0,l.Vw)(v))}),[b,v]);const z=(t,r)=>{C(m.B.SEARCH_FEED_LOAD_EVENT_NAME),S("eats:search_end",{userQuery:t?.title,page:x.pathname,hasDeliveryLocation:Boolean($),searchType:"suggestion",mvsMeta:{verticalList:v.map((e=>e.verticalType)).join(","),selectedVertical:f}}),e.onItemClick&&e.onItemClick(t,r)};return(0,g.Z)(m.B.SEARCH_HOME_LOAD_EVENT_NAME),(0,y.tZ)(y.HY,{children:t.map(((e,i)=>{const n=i<t.length-1,o=(0,p.aJ)(e,x,$,_,f);switch(e.type){case"sectionTitle":return(0,y.tZ)(a.L1,{title:e.title},i);case"searchHistory":case"searchHistoryV2":return(0,y.tZ)(a.rG,{onClick:()=>{z(t[i],i)},item:{title:e.title||"",url:o,iconType:a.d.CLOCK,eventData:r.length?w(e,i):void 0},hasBorder:n},i);case"popularCategory":case"topCategory":return(0,y.tZ)(a.rG,{onClick:()=>{z(t[i],i)},item:{title:e.title||"",url:o,iconType:a.d.CATEGORY,iconUrl:e.iconUrl},hasBorder:n},i);case"searchText":return(0,y.tZ)(a.rG,{onClick:()=>{z(t[i],i)},item:{title:e.title,iconType:a.d.SEARCH,url:o},hasBorder:n},i);case"store":return(0,y.tZ)(y.HY,{children:e.store?(0,y.tZ)(s.Z,{store:e.store,hasBorder:n,url:(0,h.C)(e.store,_,x)},i):null});default:return null}}))})}},66740:(e,t,r)=>{r.d(t,{Z:()=>y});var i=r(36151),n=r(91931),o=r(97415),a=r(67206),s=r(94579),l=r(33990);const d=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...(0,a.Z)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:s.I_.background}})),c=(0,n.zo)("div",{display:"flex",flex:1}),u=(0,n.zo)("div",{position:"relative",display:"flex"}),h=(0,n.zo)("div",{flex:"none",display:"flex",flexDirection:"column",justifySectionWrapper:"center",alignItems:"center"}),p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{width:"40px",height:"40px",background:`radial-gradient(transparent 20px, ${t.colors.backgroundPrimary} 20px)`}})),g=(0,n.zo)("div",{display:"flex",flexDirection:"column",flex:1}),m=e=>{let{titleWidth:t}=e;return(0,l.BX)(c,{children:[(0,l.BX)(h,{children:[(0,l.tZ)(o.CB,{$height:"10px",$width:"40px"}),(0,l.tZ)(p,{}),(0,l.tZ)(o.CB,{$height:"10px",$width:"40px"})]}),(0,l.tZ)(o.CB,{$width:"12px"}),(0,l.BX)(g,{children:[(0,l.tZ)(o.CB,{$width:"100%",$grow:!0}),(0,l.tZ)(o.gD,{width:`${t}%`,height:"24px"}),(0,l.tZ)(o.CB,{$width:"100%",$grow:!0})]})]})},Z=e=>{let{itemWidths:t}=e;return(0,l.BX)(g,{children:[(0,l.BX)(g,{children:[(0,l.tZ)(o.CB,{$width:"100%",$height:"16px"}),(0,l.tZ)(o.gD,{width:"40%",height:"30px"}),(0,l.tZ)(o.CB,{$width:"100%",$height:"12px"})]}),(0,l.tZ)(g,{children:t.map(((e,t)=>(0,l.tZ)(m,{titleWidth:e},t)))})]})},y=e=>{const[t]=(0,i.useState)(e.itemNumbers.map((e=>(e=>[...Array(e)].map((()=>Math.floor(50*Math.random())+30)))(e))));return(0,l.BX)(u,{children:[(0,l.tZ)(d,{}),(0,l.tZ)(g,{children:t.map(((e,t)=>(0,l.tZ)(Z,{itemWidths:e},t)))})]})}},69086:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(94024),n=r.n(i),o=r(91931),a=r(36278),s=r(31913),l=r(39957),d=r(79857),c=r(2139),u=r(33990);const h=(0,o.zo)(l.Z,(e=>{let{$isGrayedOut:t}=e;return{display:"flex",width:"100%",alignItems:"center",opacity:t?.6:void 0}})),p=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale950,display:"flex",justifyContent:"center",alignItems:"center"}})),g=(0,o.zo)("div",(e=>{let{$theme:t,$src:r}=e;return{borderRadius:"50%",width:t.sizing.scale950,height:t.sizing.scale950,backgroundImage:`url(${n()(r)})`,backgroundSize:"cover"}})),m=(0,o.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{padding:`${t.sizing.scale600} 0`,width:"100%",boxSizing:"border-box",...r?{borderBottom:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`}:{}}})),Z=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),y=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),v=e=>{const{url:t,hasBorder:r,onClick:i}=e,{categories:n=[],title:o="",heroImageUrl:l="",meta1:v,isOrderable:f}=e.store||{},x=(0,d.Z)(),b=(0,c.Z)(),S=x&&!b;return(0,u.BX)(h,{suggestionAction:t,$isGrayedOut:!1===f,onClick:i,shouldReplaceOnNavigate:S,children:[(0,u.tZ)(p,{children:l?(0,u.tZ)(g,{$src:l,title:o,"aria-hidden":!0}):null}),(0,u.tZ)(a.IQ,{}),(0,u.BX)(m,{$hasBorder:r,children:[(0,u.tZ)(Z,{children:o}),v?(0,u.tZ)(s.ZP,{text:v}):(0,u.tZ)(y,{children:n.join(" • ")})]})]})}},44692:(e,t,r)=>{r.d(t,{L1:()=>S,d:()=>m,rG:()=>b});var i=r(43193),n=r(91931),o=r(78422),a=r(36278),s=r(85191),l=r(39957),d=r(94024),c=r.n(d),u=r(81702),h=r(79857),p=r(2139),g=r(33990);const m={SEARCH:"search",CLOCK:"clock",CATEGORY:"category"},Z=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,margin:"12px 0 8px 0"}})),y=(0,n.zo)(l.Z,(e=>{let{$theme:t}=e;return{display:"flex",width:"100%",height:"64px",alignItems:"center"}})),v=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:0,flexShrink:0,boxSizing:"border-box",justifyContent:"center",alignItems:"center",width:"36px",height:"36px",borderRadius:"50%",color:t.colors.contentTertiary}})),f=(0,n.zo)("div",(e=>{let{$theme:t,$hasBorder:r}=e;return{...t.typography.LabelMedium,display:"flex",alignItems:"center",justifyContent:"space-between",flexGrow:1,height:"100%",overflow:"hidden",boxSizing:"border-box",...r?{borderBottom:`${t.sizing.scale0} solid ${t.colors.borderOpaque}`}:{}}})),x=(0,n.zo)("div",(e=>({borderRadius:"50%",width:"40px",height:"40px",backgroundImage:`url(${c()(e.$src)})`,backgroundSize:"cover"}))),b=e=>{let{item:t,hasBorder:r,onClick:n}=e;const{iconType:l,title:d,url:c,iconUrl:Z}=t,[b,S]=(0,s.T)({root:null}),{trackSearchHomeItemClick:$,trackSearchHomeItemView:C}=(0,u.Z)(),_=(0,h.Z)(),w=(0,p.Z)(),z=(_||w)&&"link"===c.type;return i.useEffect((()=>{t.eventData&&S&&S.isIntersecting&&C(t.eventData)}),[S]),(0,g.BX)(y,{suggestionAction:c,ref:b,onClick:()=>{t.eventData&&$(t.eventData),n&&n(d)},shouldReplaceOnNavigate:z,children:[(0,g.tZ)(v,{children:l===m.CLOCK?(0,g.tZ)(o.Z,{name:"ClockOutlined",size:16}):l===m.SEARCH?(0,g.tZ)(o.Z,{name:"SearchOutlined",size:18}):l===m.CATEGORY&&Z?(0,g.tZ)(x,{$src:Z,title:d,"aria-hidden":!0}):null}),(0,g.tZ)(a.IQ,{}),(0,g.tZ)(f,{$hasBorder:r,children:d})]})},S=e=>{let{title:t}=e;return(0,g.tZ)(Z,{children:t})}},28700:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(43193),n=r(44692),o=r(91931),a=r(69086),s=r(73472),l=r(65014),d=r(33990);const c=(0,o.zo)("ul",(e=>{let{$theme:t}=e;return{width:"100%"}})),u=(0,o.zo)("li",(e=>({backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center",outline:"none",...e.$showBackground?{":hover":{background:e.$theme.colors.menuFillHover}}:{},transition:"opacity .45s .5s,visibility .45s .5s,transform .45s ease .3s",transform:"translateY(0)",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}))),h=(e,t,r,i,o)=>{switch(e.type){case"sectionTitle":return(0,d.tZ)(n.L1,{title:e.title},o);case"text":case"textV2":case"searchText":case"searchTextV2":return(0,d.tZ)(n.rG,{item:{title:i,iconType:n.d.SEARCH,url:r},hasBorder:t});case"searchHistory":case"searchHistoryV2":return(0,d.tZ)(n.rG,{item:{title:i,iconType:n.d.CLOCK,eventData:void 0,url:r},hasBorder:t},o);case"store":case"croStore":return(0,d.tZ)(a.Z,{store:e.store,hasBorder:t,url:r});case"popularCategory":return(0,d.tZ)(n.rG,{item:{title:i,url:r,iconType:n.d.CATEGORY},hasBorder:t},o);default:return null}},p=e=>{const{stopTiming:t}=(0,s.K3)();return i.useEffect((()=>{e.suggestions.length>0&&t(l.B.SEARCH_SUGGESTION_LOAD_EVENT_NAME,{shouldEmitTiming:!0})}),[e.suggestions,t]),(0,d.tZ)(c,{...e.getMenuProps(),children:e.suggestions.map(((t,r)=>{const i=r<e.suggestions.length-1,n=e.getSuggestionAction(t),o=t.title||"";return(0,d.tZ)(u,{...e.getItemProps({index:r,disabled:"sectionTitle"===t.type}),onClick:()=>{e.onItemClick&&e.onItemClick(t,r)},$showBackground:"sectionTitle"!==t.type,children:h(t,i,n,o,r)},r)}))})}},39957:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(36151),n=r(52246),o=r(33990);const a=i.forwardRef((function(e,t){let{suggestionAction:r,shouldReplaceOnNavigate:i,onClick:a,children:s,...l}=e;return"link"===r.type?(0,o.tZ)(n.rU,{...l,...i?{replace:!0}:null,to:r.to,onClick:a,ref:t,children:s}):"anchor"===r.type?(0,o.tZ)("a",{...l,href:r.href,onClick:a,ref:t,children:s}):(0,o.tZ)("a",{...l,onClick:e=>{e.preventDefault(),a&&a(e)},ref:t,children:s})}))},48402:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r(36151),n=r(14016),o=r(46933),a=r(91931),s=r(79908),l=r(14770),d=r(62851),c=r(36278),u=r(79168),h=r(33990);const p=(0,a.w1)(d.U,(e=>({display:"flex",padding:"8px 16px",position:"relative",...e.$backgroundColor?{backgroundColor:e.$theme.colors[e.$backgroundColor]}:{},...e.$isFocused?{boxShadow:e.$theme.shadows.focusedInput}:{},...e.$height?{height:`${e.$height}px`}:{},...e.$borderRadius?{borderRadius:e.$borderRadius}:{}}))),g=(0,a.zo)("div",(e=>{let{$shouldAnimatePin:t}=e;return{padding:"8px 0",display:"flex",flexShrink:0,alignItems:"center",...t?{animationDuration:"3s",animationDelay:"2s",animationIterationCount:"infinite",animationName:{"0%":{transform:"rotateY(0deg)"},"20%":{transform:"rotateY(360deg)"},"100%":{transform:"rotateY(360deg)"}}}:{}}})),m=(0,a.zo)("input",(e=>({flex:1,backgroundColor:e.$backgroundColor?e.$theme.colors[e.$backgroundColor]:e.$theme.colors.inputFill,...e.$width?{width:`${e.$width}px`}:{},appearance:"none",fontSize:e.$fontSize,outline:"none","::placeholder":{..."mini"===e.$size?e.$theme.typography.LabelSmall:e.$theme.typography.LabelMedium,color:e.$theme.colors.contentTertiary}}))),Z=(0,a.zo)("button",(e=>{let{$theme:t,$size:r}=e;return{..."mini"===r?t.typography.LabelXSmall:t.typography.LabelSmall,color:t.colors.contentTertiary,cursor:"pointer"}})),y=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),v=(0,a.zo)(l.Z,{cursor:"pointer"}),f=e=>{const[t,r]=(0,a.hQ)(),l=(0,n.T)(),[d,f]=i.useState(!1),x=i.useRef(null),{value:b,...S}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),f(!0)},onBlur:()=>f(!1),ref:x}),{fontSize:$,height:C}=(0,u.Z)(e.size);return(0,h.BX)(p,{$backgroundColor:e.backgroundColor,$isFocused:d&&(e.highlightFocus??!0),$height:e.size?parseInt(C,10):e.height,$borderRadius:"mini"===e.size||"rounded"===e.borderStyle?r.borders.pillButtonBorderRadius:null,children:[(0,h.tZ)(g,{$shouldAnimatePin:e.shouldAnimatePin,children:(0,h.tZ)(s.Z,{type:e.isLoading?"Loading":e.iconType,ariaLabel:e.isLoading?l("loading"):void 0,..."mini"===e.size?{width:20,height:20}:{}})}),(0,h.tZ)(c.ZP,{$width:"mini"===e.size?"8px":"16px"}),(0,h.tZ)(m,{...S,value:b||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$backgroundColor:e.backgroundColor,$width:e.queryWidth,$fontSize:$,$size:e.size}),(0,h.tZ)(c.ZP,{$width:"8px"}),e.query.length>0?(0,h.tZ)(Z,{type:"button",onClick:()=>{e.reset(),x.current&&x.current.focus()},$size:e.size,children:(0,h.tZ)(o.v,{id:"shared.clear"})}):null,e.onClose&&e.query.length>0?(0,h.tZ)(y,{}):null,e.onClose?(0,h.tZ)(v,{onClick:e.onClose}):null]})}},69404:(e,t,r)=>{r.d(t,{Z:()=>i});const i=(0,r(91931).zo)("div",{flexDirection:"column",position:"relative",flex:1})},70471:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(54669);function n(){return"apple_maps_store_inherit"===(0,i.Z)()?.originType}},11849:(e,t,r)=>{r.d(t,{Z:()=>Z});var i=r(12517),n=r(31913),o=r(48700),a=r(74334),s=r(8639);const l={[a.Ou.PILL]:o.X3.pill,[a.Ou.RECTANGLE]:o.X3.rectangle};const d={[a.fi.PRIMARY]:o.T5.primary,[a.fi.SECONDARY]:o.T5.secondary};const c={[a.vZ.POSITIVE]:o.r$.positive,[a.vZ.ACCENT]:o.r$.accent,[a.vZ.NEGATIVE]:o.r$.negative,[a.vZ.WARNING]:o.r$.warning};var u=r(52200),h=r(36278),p=r(91931),g=r(91483),m=r(33990);function Z(e){let{viewModel:t}=e;const{content:r,hierarchy:a,color:Z,shape:y,accessibilityText:v}=t,[f,x]=(0,p.hQ)(),b=function(e){return e&&l[e]||o.X3.rectangle}(y),S=function(e){return e&&d[e]||o.T5.primary}(a);let $=null;"standard"===Z?.type&&($=Z.standard);const C=function(e){return e&&c[e]||o.r$.accent}($),_={Badge:{style:{...function(e,t){let r={};if("custom"===e?.type){const i=e&&"custom"in e?e.custom:null,n=(0,s.Lq)(i?.contentColor),o=(0,s.Lq)(i?.backgroundColor);r={color:t?.colors[`${n}`],backgroundColor:t?.colors[`${o}`]}}return r}(Z,x),maxWidth:"100%",width:"fit-content"}}};let w=null;switch(r.type){case"richText":{const e=(0,g._M)(r.richText),t=(0,s.Lq)(e);w=(0,m.tZ)("span",{className:f({maxWidth:"100%",textOverflow:"ellipsis",overflow:"hidden",...t?{color:x.colors[t]}:null}),children:(0,m.tZ)(n.ZP,{text:r.richText,whiteSpace:"nowrap"})});break}case"standard":{const e=r.standard.iconContent?.icon?{richIllustration:{illustration:{type:"icon",icon:{icon:r.standard.iconContent.icon,dimensions:{width:{type:"pointValue",pointValue:12},height:{type:"pointValue",pointValue:12}}}},accessibilityText:r.standard.iconContent?.accessibilityText||""}}:{richIllustration:null};w=(0,m.BX)(m.HY,{children:["LEADING"===r.standard.iconContent?.iconLayout?(0,m.BX)(m.HY,{children:[(0,m.tZ)(u.SZ,{...e}),(0,m.tZ)(h.Q3,{})]}):null,r.standard.title,"TRAILING"===r.standard.iconContent?.iconLayout?(0,m.BX)(m.HY,{children:[(0,m.tZ)(h.Q3,{}),(0,m.tZ)(u.SZ,{...e})]}):null]});break}default:return null}return(0,m.tZ)(i.Ct,{color:C,shape:b,hierarchy:S,content:w,overrides:_,...v?{"aria-label":v}:{}})}},31248:(e,t,r)=>{r.d(t,{Z:()=>fe});var i=r(83960),n=r(8961),o=r(43193),a=r(36151),s=r(46933),l=r(14016),d=r(71110),c=r(91631),u=r(94813),h=r(36278),p=r(97415),g=r(91931),m=r(76150),Z=r(31854),y=r(56348),v=r(34567),f=r(24316),x=r(33535),b=r(21661),S=r(94579),$=r(8690),C=r(67206),_=r(29194),w=r(63346),z=r(86255),k=r(32518),I=r(32562),L=r(70247),T=r(98942),B=r(38777),E=r(47986),P=r(34626),R=r(49373),O=r(79168),D=r(33990);const H=Math.round(555.5),M=(0,d.pZ)(r(44412)),A=(0,g.zo)("div",(e=>({display:"flex",transition:"max-width 400ms ease, opacity 400ms ease 100ms",maxWidth:e.$isVisible?"300px":0,opacity:e.$isVisible?1:0,position:"relative"}))),U=(0,g.zo)("div",(e=>{let{$theme:t,$isOverlapping:r,$isLoading:i}=e;return{...i?{...(0,C.Z)({$theme:t}),backgroundSize:"100vw 100%"}:{backgroundColor:t.colors.buttonPrimaryFill},display:"flex",flexDirection:"row",alignItems:"stretch",cursor:"pointer",height:"48px",borderRadius:t.borders.pillButtonBorderRadius,overflow:"hidden",boxShadow:r?t.shadows.filterCard:"none",margin:r?"24px 16px":0,...t.typography.LabelMedium,whiteSpace:"nowrap"}})),V={display:"flex",flexDirection:"row",alignItems:"center"},N=(0,g.zo)("div",V),X=(0,g.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{width:"24px",height:"48px",background:`radial-gradient(circle at ${"ltr"===r?"100%":"0%"}, transparent 24px, ${t.colors.backgroundPrimary} 24px)`}})),F=(0,g.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{width:"24px",height:"48px",background:`radial-gradient(circle at ${"ltr"===r?"0%":"100%"}, transparent 24px, ${t.colors.backgroundPrimary} 24px)`}})),Y=(0,g.zo)("button",(e=>{let{$theme:t,$isDualButtons:r}=e;return{...V,padding:r?"14px 16px 14px 12px":"8px 16px",...(0,v.x)({$theme:t})}})),Q=(0,g.zo)("button",(e=>{let{$theme:t,$isDualButtons:r,$isLoggedIn:i}=e;return{...V,padding:i?r?"14px 12px 14px 8px":"8px 16px 8px 8px":"8px 12px",...(0,v.x)({$theme:t})}})),G=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{height:"32px",width:"32px",flexShrink:0,borderRadius:t.borders.radiusFull,overflow:"hidden",position:"relative"}})),q=(0,g.zo)("img",{height:"32px",width:"32px",objectFit:"cover",flexShrink:0}),W=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{width:"1.5px",margin:"12px 0",background:t.colors.contentSecondary}})),j=(0,g.zo)("div",(e=>{let{$theme:t,$isOverlapping:r}=e;return{background:t.colors.menuFill,color:t.colors.contentPrimary,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:"8px",top:r?"64px":t.sizing.scale1000,right:"0",position:"absolute",width:"420px",borderRadius:"16px",maxHeight:`${H}px`,overflow:"auto",zIndex:S.I_.modal}})),K=(0,g.zo)("div",(e=>{let{$theme:t,$isHovering:r}=e;return{borderRadius:"50%",width:t.sizing.scale950,height:t.sizing.scale950,position:"absolute",left:`-${t.sizing.scale0}`,...r?{backgroundColor:t.colors.buttonPrimaryHover}:{backgroundColor:t.colors.buttonPrimaryFill}}})),J=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",position:"relative",width:t.sizing.scale1400}})),ee=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",left:t.sizing.scale750}})),te=(0,g.zo)("div",{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"}),re=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,position:"absolute",width:t.sizing.scale950,height:t.sizing.scale950,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",backgroundColor:"rgba(0, 0, 0, 0.5)"}})),ie=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,whiteSpace:"nowrap"}})),ne=e=>e.storeImage?.length>1?(0,D.BX)(J,{children:[(0,D.tZ)("div",{children:(0,D.tZ)(G,{children:(0,D.tZ)(q,{src:e.storeImage[0],alt:"store"})})}),(0,D.tZ)(ee,{children:(0,D.BX)(te,{children:[(0,D.tZ)(K,{$isHovering:e.isHovering}),(0,D.tZ)(G,{children:(0,D.tZ)(q,{src:e.storeImage[1],alt:"store"})}),e.storeImage.length>2?(0,D.BX)(re,{children:["+",e.storeImage.length-1]}):null]})})]}):(0,D.tZ)(G,{children:(0,D.tZ)(q,{src:e.storeImage[0],alt:"store"})}),oe=e=>1===e.totalOrders?(0,D.tZ)(s.v,{id:"shared.numCartsSingular",data:{numCarts:e.totalOrders}}):(0,D.tZ)(s.v,{id:"shared.numCarts",data:{numCarts:e.totalOrders}}),ae=e=>1===e.numCartItems?(0,D.tZ)(s.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e.numCartItems}}):(0,D.tZ)(s.v,{id:"shared.numCartItems",data:{numCartItems:e.numCartItems}}),se=()=>{const{serverCart:e}=(0,L.iQ)(),t=e.data?.items||[],r=(0,R.dH)(t);return(0,D.BX)(D.HY,{children:[(0,D.tZ)(Z.Z,{size:16}),(0,D.BX)(ie,{children:[(0,D.tZ)(s.v,{id:"shared.cart"})," • ",r]})]})},le=e=>{let{isOverlapping:t,floatingMenuOpen:r,handleFloatingMenuOpen:n,size:s}=e;const{toggleSidebarCartVisible:d,headerCartDropdownVisible:g,setHeaderCartDropdownVisible:v}=(0,m.Lb)(),{totalOrders:S,cartViews:C,activeDraftOrderUUID:R,currentStoreDraftOrderUUID:H,draftOrders:V,draftOrderUUIDs:G,setActiveDraftOrder:q,cartsViewIsLoading:K}=(0,f.Z)(),{isDelegatedBooking:J}=(0,B.W)(),{bundleGroupUUID:ee,isBundledOrder:te}=(0,L.Dz)(),re=(0,x.ZP)(),ie=(0,l.T)(),{toggleIsDropdownOpen:le,dropdownRef:de,isDropdownOpen:ce,onCartSelect:ue}=(0,b.Z)({isDropdownOpen:r??g,setIsDropdownOpen:n??v}),he=(0,c.UO)(),pe=(0,z.Z)({encodedStoreUuid:he?.encodedStoreUuid}),{isEditOrder:ge,currentUserItemCount:me,isRepeatGroupOrder:Ze}=(0,i.Z)(pe),ye=Boolean(H),ve=(0,_.gm)(),fe=(0,T.qM)(),{user:xe}=(0,P.Z)(),{isRepeatOrderCartView:be}=(0,$.Z)(),Se=(0,u.TH)(),{cartOpen:$e}=(0,E.RAN)(Se,["cartOpen"]),Ce=o.useCallback((()=>{if(0===S||J)d();else if(1!==S||be(C[0])||(0,k.ed)(C[0]))le();else{const e=C[0]?.metadata?.openCheckoutMetadata,t=e?.draftOrderUUID??e?.bundleGroupMetadata?.primaryDraftOrderUUID??G[0];q(t),d()}re("eats:cart_cta_click",{isMulticart:"true"})}),[S,J,be,C,re,d,G,q,le]),_e=ee||H||R,we=(0,a.useMemo)((()=>C.find((e=>e.draftOrderUUID===_e||e.metadata?.openCheckoutMetadata?.bundleGroupMetadata?.bundleGroupUUID===_e))),[C,_e]),ze=o.useRef(null),ke=(0,I.Z)(ze),Ie=(()=>{const e=[M,M],t=[M];return K&&te?e:K&&!te?t:we?.storeImageUrls&&we?.storeImageUrls?.length>0?we.storeImageUrls:te&&!K?e:t})(),Le=S>1||ye&&Ze,Te=Boolean(ye&&Le),Be=te?fe:me;o.useEffect((()=>{re("eats:multicart_cart_pill",{...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})}),[re,te]),o.useEffect((()=>{$e&&V.hasLoaded&&("single"===$e?d():Ce())}),[V.hasLoaded]);const Ee=(0,O.Z)(s);return(0,D.BX)(A,{ref:de,$isVisible:!0,children:[(0,D.tZ)(h.ZP,{$width:"24px"}),(0,D.tZ)(U,{$isOverlapping:t,$isLoading:!V.hasLoaded,$style:Ee,children:V.hasLoaded?(0,D.BX)(D.HY,{children:[ye||ge?(0,D.tZ)(Q,{ref:ze,"data-test":"items-button",$isDualButtons:Te,$isLoggedIn:Boolean(xe.data?.isLoggedIn),type:"button",onClick:()=>{q(H||""),d(),re("eats:cart_cta_click",{isMulticart:"true",...te?{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}}:null})},children:xe.data?.isLoggedIn?(0,D.BX)(D.HY,{children:[(0,D.tZ)(ne,{storeImage:Ie,isHovering:ke}),(0,D.tZ)(h.ZP,{$width:"8px"}),(0,D.tZ)(ae,{numCartItems:Be})]}):(0,D.tZ)(se,{})}):null,ye&&!Le||ge?null:(0,D.BX)(D.HY,{children:[Te?(0,D.tZ)(W,{}):null,(0,D.tZ)(Y,{"data-test":"cart-btn",$isDualButtons:Te,"aria-label":ie("multicart.carts"),type:"button",onClick:Ce,children:xe.data?.isLoggedIn?(0,D.BX)(D.HY,{children:[(0,D.tZ)(Z.Z,{size:20}),(0,D.tZ)(h.ZP,{$width:"8px"}),ye?null:(0,D.tZ)(oe,{totalOrders:S}),Le?(0,D.BX)(D.HY,{children:[ye?null:(0,D.tZ)(h.ZP,{$width:"8px"}),(0,D.tZ)(y.Z,{size:12})]}):null]}):(0,D.tZ)(se,{})}),ce?(0,D.tZ)(j,{$isOverlapping:t,children:(0,D.tZ)(w.Z,{onCartSelect:(e,t)=>{ue(e,t),d()},isMobile:!1})}):null]})]}):(0,D.BX)(N,{children:[(0,D.tZ)(X,{$direction:ve}),(0,D.tZ)(p.CB,{$width:"80px"}),(0,D.tZ)(F,{$direction:ve})]})})]})};var de=r(57444),ce=r(58814);const ue=e=>{let{$theme:t,disabled:r}=e;return{color:t.colors.onlineOrderingSecondaryInverseText,background:t.colors.onlineOrderingSecondaryInverse,...r?(0,de.Z)(t):{":hover":{background:t.colors.onlineOrderingSecondaryInverseHover},":active":{background:t.colors.onlineOrderingSecondaryInverseActive},...(0,ce.Z)(t)}}};var he=r(69630),pe=r(28222),ge=r(60306);const me=(0,g.zo)("div",(e=>({display:"flex",transition:"max-width 400ms ease, opacity 400ms ease 100ms",maxWidth:e.$isVisible?"300px":0,opacity:e.$isVisible?1:0,overflow:"hidden",position:"relative"}))),Ze=(0,g.zo)("button",(e=>{let{$theme:t,$isOverlapping:r,$isOnlineOrdering:i}=e;return{display:"flex",flexDirection:"row",alignItems:"center",cursor:"pointer",padding:"8px 12px",height:S.GC,borderRadius:t.borders.pillButtonBorderRadius,boxShadow:r?t.shadows.filterCard:"none",margin:r?"24px 16px":0,...i?ue({$theme:t}):(0,v.x)({$theme:t}),...t.typography.LabelSmall}})),ye=(0,g.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,whiteSpace:"nowrap"}})),ve=e=>{let{isOverlapping:t}=e;const r=(0,n.Z)(),{serverCart:o}=(0,L.iQ)(),{toggleSidebarCartVisible:a}=(0,m.Lb)(),l=o.data?.items||[],d=(0,R.dH)(l),{isDraftOrderParticipant:c,isBillSplitOrder:u}=(0,i.Z)(),p=(0,he.Z)(),g=(0,x.ZP)(),y=(0,ge.Z)(),v=(0,pe.Z)();return r&&(!c||p||y&&u)?(0,D.BX)(me,{$isVisible:!0,children:[(0,D.tZ)(h.ZP,{$width:"24px"}),(0,D.BX)(Ze,{"data-test":"cart-btn",$isOverlapping:t,type:"button","aria-label":"checkout",onClick:()=>{a(),g("eats:cart_cta_click")},$isOnlineOrdering:v,children:[(0,D.tZ)(Z.Z,{size:16}),(0,D.BX)(ye,{children:[(0,D.tZ)(s.v,{id:"shared.cart"})," • ",d]})]})]}):null},fe=e=>{let{isOverlapping:t=!1,floatingMenuOpen:r,handleFloatingMenuOpen:o,size:a}=e;const s=(0,n.Z)(),l=(0,he.Z)(),{isDraftOrderParticipant:d,isBillSplitOrder:c}=(0,i.Z)(),u=(0,ge.Z)();return(s||l)&&(!d||l||u&&c)?l?(0,D.tZ)(le,{isOverlapping:t,floatingMenuOpen:r,handleFloatingMenuOpen:o,size:a}):(0,D.tZ)(ve,{isOverlapping:t}):null}},97420:(e,t,r)=>{r.d(t,{Z:()=>Le});var i=r(75514),n=r(36151),o=r(52246),a=r(91631),s=r(72843),l=r(46933),d=r(91931),c=r(76150),u=r(83960),h=r(50262),p=r(8398),g=r(33841),m=r(52298),Z=r(72275),y=r(94579),v=r(81549),f=r(6966),x=r(74419),b=r(47986),S=r(7646),$=r(36278),C=r(79908),_=r(33535),w=r(69630),z=r(10825),k=r(64388),I=r(33990);const L=(0,d.w1)(S.Bi,{padding:"0px 12px 0 8px"}),T=(0,d.zo)("div",(e=>{let{$theme:t}=e;return t.typography.LabelSmall})),B=e=>{const t=(0,w.Z)(),r=(0,_.ZP)(),i=(0,z.Z)(),{deliveryAddress:n,deliveryTime:a,diningMode:s,storeUuid:d}=(0,u.Z)(),{getStore:c}=(0,k.ZP)(d,{deliveryAddress:n,deliveryTime:a,diningMode:s}),{restaurantLink:h}=(0,Z.Z)({storeUuid:d});return h?(0,I.BX)(L,{"data-testid":"add-items-mini-button",$as:o.rU,to:h,onClick:()=>{t&&(i(),c()),r("eats:click_store_link",{source:e.source,...t?{activePreferenceType:"draft_order"}:{}}),e.onClick&&e.onClick()},children:[(0,I.tZ)(C.Z,{type:"PlusSmall"}),(0,I.tZ)($.Q3,{}),(0,I.tZ)(T,{children:(0,I.tZ)(l.v,{id:"shared.addItems"})})]}):null};var E=r(25400),P=r(70247),R=r(19496),O=r(55811),D=r(25750),H=r(31854);const M=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale1600,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}})),A=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,marginTop:"16px",textAlign:"center"}})),U=()=>(0,I.BX)(M,{children:[(0,I.tZ)(H.Z,{size:44,color:"contentInverseTertiary"}),(0,I.tZ)(A,{children:(0,I.tZ)(l.v,{id:"shared.emptycartmessage"})})]});var V=r(79876),N=r(74365),X=r(37740),F=r(37573),Y=r(35972),Q=r(90961),G=r(86255),q=r(82133),W=r(60306),j=r(94813),K=r(72147),J=r(59210),ee=r(98470);const te=e=>{let{completionPercentage:t}=e;return(0,I.tZ)(ee.Z,{value:t,overrides:{Bar:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.white}}},BarProgress:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.positive}}},BarContainer:{style:e=>{let{$theme:t}=e;return{margin:"0px !important"}}}}})};var re=r(56965),ie=r(14016),ne=r(60849),oe=r(15649),ae=r(34626),se=r(27871),le=r(86977),de=r(30085);const ce="control",ue="treatment_1",he="treatment_2",pe={[ce]:ce,[ue]:"sticky_banner",[he]:"sticky_progress_bar"},ge=e=>{const t=(0,ne.F2)(),{hasActiveUberOne:r}=(0,ae.Z)(),i=e.currencyCode||"",{subtotal:o}=(0,se.ZP)(["subtotal"]).checkoutPayloads,a=(Number(o?.subtotal?.value?.amountE5)||0)/1e3,s=(0,oe.Z)(),l=(0,ie.T)(),d=Array.isArray(e.promoTrackings)&&e.promoTrackings.find((e=>"FLAT"===e?.discountInfo?.promoType))||null,c=Boolean(d),u=(0,_.ZP)();return(0,n.useMemo)((()=>{if(r||!c)return{treatmentValue:ce};const e=t.getString({...de.m.dynamic_promo_messaging,defaultValue:ce});if(u("eats:eats_web_cro_dynamic_promo_messaging_cart_inclusion",{param_name:de.m.dynamic_promo_messaging.key,param_value:e,variant:pe[e]}),![ue,he].includes(e))return{treatmentValue:ce};const n=d?(0,le.E)(d,i,a,s):null,o=d?.minBasketSizeConstraintInDecimal||0,h=o-a,p=(o-h)/o*100,g=Boolean(n&&n.key.includes("_EARNED")),m=n?g?l("checkout.promo.flat.earned",{x:n?.data.x}):l("checkout.promo.flat.unearned",{x:n?.data.x,y:n?.data.y}):"";return u("eats:eats_web_cro_dynamic_promo_messaging_cart_details",{param_name:de.m.dynamic_promo_messaging.key,param_value:e,variant:pe[e],amount:String(h),currencyCode:i}),{treatmentValue:e,hasValidPromo:c,promoGoalReached:g,promoProgress:p,calculatedPromo:m}}),[u,r,c,t,a,d,i,s,l])},me=(0,d.zo)("div",(e=>{let{$theme:t,$goalReached:r}=e;return{display:"flex",alignItems:"center",backgroundColor:r?t.colors.backgroundPositive:t.colors.backgroundPositiveLight,margin:`-${t.sizing.scale800} -${t.sizing.scale800} ${t.sizing.scale600} -${t.sizing.scale800}`,padding:`${t.sizing.scale500} ${t.sizing.scale800}`,gap:t.sizing.scale600,...t.borders.border300}})),Ze=(0,d.zo)(re.Z,(e=>{let{$theme:t,$goalReached:r}=e;return{...r?{fill:t.colors.contentOnColor}:{}}})),ye=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",width:"100%",flexGrow:1,gap:t.sizing.scale500}})),ve=e=>{let{store:t}=e;const{hasValidPromo:r,treatmentValue:i,calculatedPromo:n,promoProgress:o,promoGoalReached:a}=ge(t);return[ue,he].includes(i)&&r?(0,I.BX)(me,{$goalReached:a,children:[(0,I.tZ)(Ze,{$goalReached:a}),(0,I.BX)(ye,{children:[(0,I.tZ)(J.Uc,{color:a?"contentOnColor":"",children:n}),a||i!==he?null:(0,I.tZ)(te,{completionPercentage:o})]})]}):null};var fe=r(87444),xe=r(38777),be=r(80341);const Se=(0,d.zo)("div",(e=>{let{$theme:t,$isClosing:r}=e;return{position:"fixed",top:"62px",right:"82px",width:"432px",zIndex:y.I_.modal,background:t.colors.backgroundPrimary,boxShadow:t.shadows.box,transition:"opacity 500ms",opacity:r?0:1,color:t.colors.contentPrimary}})),$e=(0,d.zo)("div",{maxHeight:"calc(100vh - 150px)",overflowY:"scroll"}),Ce=(0,d.zo)("div",{padding:"0 24px"}),_e=(0,d.zo)("div",{paddingTop:"16px",display:"flex"}),we=(0,d.zo)("div",(e=>e.$theme.typography.DisplayXSmall)),ze=(0,d.zo)(o.rU,(e=>({...e.$theme.typography.ParagraphSmall,color:e.$theme.colors.contentSecondary}))),ke=(0,d.zo)("div",{display:"flex",alignItems:"center"}),Ie=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,display:"inline"}})),Le=()=>{const e=(0,j.TH)(),t=s.parse(e.search)[b.FSm.cartDisplay],[r,o]=(0,n.useState)(!1),{cartRef:d,sidebarCartVisible:y,sidebarCartClosing:S,openSidebarCart:C,closeSidebarCart:w,hideSidebarCart:z}=(0,c.Lb)({transitionMS:500}),{isDraftOrderCreator:L,isDraftOrderParticipant:T,hasGroupOrder:H,isDraftOrderCartLocked:M,isBillSplitOrder:A,orderDisplayName:J}=(0,u.Z)(),{title:ee,storeTitle:te,restaurantLink:re,restaurantLinkNode:ie}=(0,Z.Z)(),{elementRef:ne,isStuck:oe}=(0,f.Z)(),ae=(0,n.useRef)(null),{serverCart:se}=(0,P.iQ)(),le=se.data?.storeUuid,{store:de}=(0,k.ZP)(le),ce=(0,O.Z)(),ue=(0,j.UO)(),he=(0,G.Z)({encodedStoreUuid:ue.encodedStoreUuid}),pe=(0,a.k6)(),ge=(0,Q.Z)(),me=Boolean(ge),Ze="postmates"===ce,ye=(0,_.ZP)(),{isDelegatedBooking:Le}=(0,xe.W)(),Te=!se.data?.items.length,{guestCheckoutEnabled:Be}=(0,F.Z)(),Ee=(0,q.xZ)(),Pe=(0,fe.Z)("canonical_product_smart_cart");(0,n.useEffect)((()=>{if(t){clearTimeout(ae.current??void 0),C();const e=setTimeout((()=>{o(!0)}),300);return()=>{clearTimeout(e)}}o(!0)}),[t,C]),(0,n.useEffect)((()=>{if("undefined"==typeof i.Z||S)return;const e=()=>{r&&!S&&w()};return i.Z&&i.Z.addEventListener("scroll",e),()=>{i.Z&&i.Z.removeEventListener("scroll",e)}}),[r,w,S]),(0,n.useEffect)((()=>z),[z]);const Re=(0,W.Z)();(0,n.useEffect)((()=>{y&&ye("eats:cart_view",{storeUuid:String(de.data?.uuid),cartView:Ee,isDelegatedBooking:String(Le)})}),[y,ye,de]);const{currentCartIsSmartCart:Oe}=(0,be.R)(),De=Oe&&Pe;return y&&(!T||Re&&A)?(0,I.tZ)(Se,{ref:d,$isClosing:S,children:(0,I.BX)($e,{"data-test":"cart",children:[L&&M?(0,I.tZ)(N.c,{children:(0,I.tZ)(Ie,{children:(0,I.tZ)(l.v,{id:"go.unlock_cart_warning_text_2"})})}):null,(0,I.tZ)(x.Z,{hasCloseButton:!0,headerRef:ne,isStuck:oe,onClose:w,title:H&&J||te,...L?{topRightIconButton:{icon:(0,I.tZ)(V.Z,{color:"black"}),onClick:()=>pe.push((0,b.vN_)(e,"shareGroupOrder"))}}:{}}),Te&&!L?(0,I.tZ)(U,{}):(0,I.BX)(Ce,{children:[(0,I.tZ)(m.ZP,{$height:24}),(0,I.tZ)(we,{"data-test":"cart-header",children:L||De?ee:te}),Pe?(0,I.tZ)(K.C,{defaultSelectedStoreUuid:le}):null,L?(0,I.BX)(I.HY,{children:[(0,I.tZ)(m.ZP,{$height:16}),(0,I.BX)(ke,{children:[(0,I.tZ)(ze,{to:re,onClick:()=>{ye("eats:click_store_link",{source:"cart"})},children:ie}),(0,I.tZ)(R.Z,{})]})]}):null,(0,I.tZ)(_e,{children:(0,I.BX)(D.Z,{separator:$.sA,children:[L||he===le?null:(0,I.tZ)(B,{source:"cart"}),H||de.data?.isGroupOrderingDisabled||Ze||Be?null:(0,I.tZ)(E.Z,{store:de})]})}),me?(0,I.tZ)(Y.Q,{$spaceBefore:32}):(0,I.tZ)(m.ZP,{$height:16}),L||Re&&A?(0,I.BX)(I.HY,{children:[(0,I.tZ)(X.Z,{gutterWidth:24}),(0,I.tZ)(h.Z,{gutterWidth:24,showAddGuestsBtn:!1,showFacePile:!0,showRemoveParticipantButton:!0})]}):(0,I.tZ)(I.HY,{children:(0,I.tZ)(p.Z,{})}),(0,I.BX)(g.Z,{children:[de.data?(0,I.tZ)(ve,{store:de.data}):null,(0,I.tZ)(v.Z,{})]})]})]})}):null}},25400:(e,t,r)=>{r.d(t,{Z:()=>S});var i=r(47986),n=r(46933),o=r(52298),a=r(7646),s=r(52246),l=r(36278),d=r(34626),c=r(55186),u=r(79876),h=r(91931),p=r(58984),g=r(83960),m=r(69630),Z=r(7876),y=r(33535),v=r(94813),f=r(33990);const x=(0,h.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall}})),b=e=>{const t=(0,v.TH)(),r=(0,y.ZP)(),d={...e.authOnClick?{onClick:t=>{r("eats:start_group_order_button"),e.authOnClick&&e.authOnClick(t)}}:{...e.beforeNavigate?{onClick:()=>{r("eats:start_group_order_button"),e.beforeNavigate&&e.beforeNavigate()}}:null,to:e.store.data?(0,i.Ljk)(t,(0,i.Btk)(e.store.data)):""},...e.href?{href:e.href}:null,...e.href&&e.authOnClick?{$as:"a"}:{$as:s.rU}};return(0,f.BX)(f.HY,{children:[(0,f.tZ)(o.ZP,{$height:24}),(0,f.BX)(a.Bi,{...d,children:[(0,f.tZ)(u.Z,{size:16}),(0,f.tZ)(l.sA,{}),(0,f.tZ)(x,{children:(0,f.tZ)(n.v,{id:"components.checkout.group_order"})})]})]})},S=e=>{const{user:t}=(0,d.Z)(),r=(0,v.TH)(),n=(0,p.I0)(),o=(0,m.Z)(),{deliveryAddress:a,deliveryTime:s,storeUuid:l,diningMode:u,isEditOrder:h}=(0,g.Z)();return h?null:!t.data?.isLoggedIn&&e.store.data?(0,f.tZ)(c.Z,{type:"login",redirectTo:(0,i.Ljk)(r,(0,i.Btk)(e.store.data)),children:t=>{let{onClick:r,href:i}=t;return(0,f.tZ)(b,{store:e.store,authOnClick:r,href:i})}}):(0,f.tZ)(b,{store:e.store,...o&&l?{beforeNavigate:()=>{n((0,Z.A0)(l,{...s?{storeScheduledTime:s}:{},...a?{storeDeliveryLocation:a}:{},...u?{storeDiningMode:u}:{}}))}}:{}})}},12517:(e,t,r)=>{r.d(t,{Ct:()=>o});var i=r(90985),n=r(33990);function o(e){return(0,n.tZ)(i.Z,{...e})}},79168:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(91931);function n(e){const[t,r]=(0,i.hQ)();switch(e){case"mini":return{height:r.sizing.scale950,fontSize:r.sizing.scale550};case"small":return{height:r.sizing.scale1000,fontSize:r.sizing.scale600};default:return{height:r.sizing.scale1200,fontSize:r.sizing.scale600}}}},929:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(20115),n=r(29230),o=r(74634);function a(){const e=(0,o.Z)(),t=(0,i.Z)("features_config");return{headerHeight:e?n.Kv.height:t.header.height,isHeaderSticky:Boolean(t?.header?.sticky),headerShadowEnabled:Boolean(t?.header?.shadow)}}},57820:(e,t,r)=>{r.d(t,{Z:()=>K});var i=r(36151),n=r(46933),o=r(91631),a=r(68095),s=r(91931),l=r(76150),d=r(83960),c=r(50192),u=r(24316),h=r(31017),p=r(72179),g=r(19681),m=r(44997),Z=r(33990);const y=(0,s.zo)("div",(e=>{let{$theme:t,$shouldStick:r}=e;return{...t.typography.LabelMedium,opacity:r?1:0,transition:`opacity ${t.animation.timing300} ease`}})),v=(0,s.zo)("div",(()=>({position:"sticky",top:0,zIndex:1}))),f=(0,s.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{margin:`0 -${t.sizing.scale600}`,...r?{padding:`${t.sizing.scale700} ${t.sizing.scale800} 0 ${t.sizing.scale300}`,marginBottom:`-${t.sizing.scale600}`}:{padding:`0 ${t.sizing.scale800} 0 ${t.sizing.scale300}`,minHeight:t.sizing.scale1400},backgroundColor:t.colors.backgroundPrimary,display:"flex",justifyContent:"space-between",alignItems:"center"}})),x=e=>{const{isCartDrafting:t}=(0,p.Z)();return t?(0,Z.tZ)(v,{children:e.children}):(0,Z.tZ)("div",{children:e.children})},b=(0,s.zo)(c.Z,{position:"static"}),S=e=>{const{isCartDrafting:t}=(0,p.Z)(),{totalOrders:r,draftOrders:i}=(0,u.Z)(),{isEditOrder:n}=(0,d.Z)(),[,o]=(0,s.hQ)(),{isLiveOrder:a}=(0,m.W)();return(0,Z.tZ)(x,{children:(0,Z.BX)(f,{$isCartDrafting:t,children:[(0,Z.tZ)(b,{onClick:e.onClose,$noBackground:t,iconSize:t?o.sizing.scale800:void 0}),0!==r||i.isLoading||n?null:(0,Z.tZ)(h.X,{}),t&&e.store.hasLoaded&&e.store.data?(0,Z.tZ)(y,{$shouldStick:e.shouldStick,children:e.store.data.title}):null,a?null:(0,Z.tZ)(Z.HY,{children:t&&e.store.hasLoaded&&e.store.data?(0,Z.tZ)(g.Z,{store:e.store.data,onClearCart:e.onClose}):null})]})})};var $=r(70247),C=r(17593),_=r(97679),w=r(74365),z=r(71279),k=r(82333),I=r(79851),L=r(6509),T=r(30586),B=r(93633),E=r(51741),P=r(70327),R=r(35972),O=r(86255),D=r(90961),H=r(73845),M=r(33535),A=r(72147),U=r(34771),V=r(94261),N=r(94579),X=r(87444),F=r(9545),Y=r(72275),Q=r(61559),G=r(85191),q=r(13672);const W=(0,s.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",rowGap:t.sizing.scale600,...r?{":first-child > :is(div)":{margin:`0 ${t.sizing.scale600}`},":first-child > :is(ul)":{marginTop:0,marginLeft:t.sizing.scale600,marginBottom:-t.sizing.scale600,marginRight:t.sizing.scale600}}:{":first-child > :is(div, ul)":{margin:`0 ${t.sizing.scale600}`}}}})),j=(0,s.zo)("span",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),K=e=>{let{startShoppingRedirect:t}=e;const r=(0,o.k6)(),s=(0,I.Z)(),c=(0,o.UO)(),h=(0,O.Z)({encodedStoreUuid:c?.encodedStoreUuid}),[g,m]=(0,G.Z)({root:null,rootMargin:"0px 0px 0px 0px",threshold:1}),{isGroupOrder:y,isBundledOrder:v}=(0,$.Dz)(),f=Boolean(m&&!m.isIntersecting),{sidebarCartVisible:x,sidebarCartIn:b,sidebarCartClosing:K,closeSidebarCart:J}=(0,l.Lb)({transitionMS:500}),{hasGroupOrder:ee,isDraftOrderCreator:te,storeUuid:re,isDraftOrderCartLocked:ie,creatorName:ne,isEditOrder:oe}=(0,d.Z)(),{isLiveOrder:ae,liveOrderStoreUuid:se}=(0,q.l)(),le=ae?se:re,{store:de}=(0,Y.Z)({storeUuid:le}),{serverCart:ce}=(0,$.iQ)(),{hasCartToLoad:ue}=(0,F.Z)(),{totalOrders:he,setActiveDraftOrder:pe,activeDraftOrderUUID:ge,currentStoreDraftOrderUUID:me}=(0,u.Z)(),Ze=(0,D.Z)(),ye=Boolean(Ze),{isManagingGroupOrder:ve}=(0,B.Z)(),fe=(0,M.ZP)(),xe=0===he&&!oe&&!ue&&!ce.isLoading,be=!x&&!b,Se=(0,X.Z)("canonical_product_smart_cart"),{isCartDrafting:$e}=(0,p.Z)();return(0,U.Z)(!be),(0,L.Z)(),(0,C.Z)(x),(0,H.Z)({cartOpen:x&&b,store:de,draftOrder:ce}),(0,i.useEffect)((()=>{K&&ge&&me&&pe(me||"")}),[K,me,pe,ge,h]),be?null:(0,Z.tZ)(P.Z,{messageKey:"cart-drawer",children:(0,Z.tZ)(V.ZP,{zIndex:N.I_.cover,children:(0,Z.tZ)(a.Z,{isOpen:x&&b,onClose:J,overrides:{Close:{style:{display:"none"}},DrawerContainer:{style:{width:"478px"}},DrawerBody:{style:{marginTop:0,marginBottom:0,marginLeft:0,marginRight:0}}},children:ve?(0,Z.tZ)(E.Z,{}):(0,Z.BX)(W,{$isCartDrafting:$e,"data-test":"cart",children:[(0,Z.tZ)(S,{shouldStick:!y&&!v&&f,store:de,onClose:()=>{J(),fe("eats:close_cart_cta")}}),xe?(0,Z.tZ)(k.Z,{onClick:()=>{J(),t&&r.push(s),fe("eats:start_shopping_cta_click")}}):(0,Z.tZ)(_.Z,{store:de,isLiveOrder:ae,draftOrder:ce,loaded:(e,t)=>(0,Z.BX)(Z.HY,{children:[(0,Z.BX)("div",{children:[ie?(0,Z.tZ)(w.c,{children:(0,Z.tZ)(j,{children:te?(0,Z.tZ)(n.v,{id:"go.unlock_cart_warning_text_2"}):(0,Z.tZ)(n.v,{id:"go.creator_order_locked_description",data:{creatorName:ne}})})}):null,ae?null:(0,Z.BX)(Z.HY,{children:[(0,Z.tZ)("div",{ref:g}),(0,Z.tZ)(T.Z,{store:e,onCartClose:J,onClearCart:J,cartActionsType:"dropdown"})]})]}),Se?(0,Z.tZ)(A.C,{defaultSelectedStoreUuid:e.uuid}):null,(0,Z.BX)(Z.HY,{children:[ye?(0,Z.tZ)(R.Q,{$spaceBefore:24}):null,(0,Z.tZ)(z.Z,{})]}),(0,Z.tZ)(Q.Z,{hasGroupOrder:ee,store:e,isMobile:!1,quantitySelectType:$e?"stepper":"picker",isLiveOrder:ae})]})})]})})})})}},21661:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(36151),n=r(91931),o=r(76686),a=r(24316),s=r(33535),l=r(53213),d=r(94579),c=r(58984),u=r(24484),h=r(87444);const p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.menuFill,boxShadow:"0px 4px 16px rgba(0, 0, 0, 0.12)",marginTop:"8px",right:"8px",position:"absolute",width:"420px",borderRadius:"16px",maxHeight:"505px",overflow:"auto",zIndex:d.I_.foreground}})),g=e=>{let{isDropdownOpen:t,setIsDropdownOpen:r}=e;const{totalOrders:n,draftOrderUUIDs:d,setActiveDraftOrder:g}=(0,a.Z)(),m=(0,o.Z)(),Z=(0,s.ZP)(),y=i.useRef(null),v=(0,c.I0)(),f=(0,h.Z)("canonical_product_smart_cart");(0,l.Z)(y,(()=>{r(!1)}),t);const x=i.useCallback((()=>{const e=!t;r(e),e&&Z("eats:carts_list_view",{multicart:{numTotalCarts:n,draftOrderUuids:d}})}),[t,r,Z,n,d]),b=i.useCallback(((e,t)=>{g(e),m(e,t),r(!1),f&&v((0,u.kw)())}),[g,m,f,r,v]);return{toggleIsDropdownOpen:x,dropdownRef:y,isDropdownOpen:t,onCartSelect:b,DropdownWrapperDesktop:p}}},25862:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(36151),n=r(73472),o=r(33535);const a=(e,t)=>{const{stopTiming:r}=(0,n.K3)(),a=i.useRef(!1),s=(0,o.ZP)();i.useEffect((()=>{if(!a.current){a.current=!0;const i=r(e);i&&s("eats:timing",{label:t??e,timeElapsed:i})}}),[r,s,e,t])}},1604:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(60849),n=r(97763);const o=()=>(0,i.ip)({...n.J.eatsfeed_citrus_top_category_icon_web_enabled,defaultValue:!1})},81702:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(36151),n=r(5639),o=r(79857),a=r(1604),s=r(15070),l=r(55758),d=r(94813),c=r(47986),u=r(92060),h=r(33535);const p=()=>{const e=(0,n.hU)(),t=(0,o.Z)(),r=(0,a.Z)(),p=r||e.isMobile||t,g=(0,s.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),m=(0,l.d)(),Z=(0,d.TH)(),{vertical:y,userQuery:v}=(0,c.RAN)(Z,["vertical","userQuery"]),f=v?.trim(),x=r?Boolean(p)&&!f:Boolean(p)&&"PICKUP"!==m&&!f,[b,S]=i.useState(x),[$,C]=i.useState(!0),_=(0,h.ZP)(),w=i.useCallback((e=>{p&&_("eats:search_end",{userQuery:e,mvsMeta:{verticalList:g.map((e=>e.verticalType)).join(","),selectedVertical:y||u.g}})}),[_,p,g,y]),z=i.useCallback((e=>{_("eats:search_home_item_click",e)}),[_]),k=i.useCallback((e=>{_("eats:search_home_item_view",e)}),[_]);return{trackSearchCategoryClick:w,showSearchHome:b,showPastOrdersSuggestions:$,setShowPastOrdersSuggestions:C,searchShortcutsEnabled:p,setShowSearchHome:e=>{p&&S(e)},trackSearchHomeItemClick:z,trackSearchHomeItemView:k}}},41878:(e,t,r)=>{r.d(t,{ZP:()=>z,aJ:()=>w});var i=r(36151),n=r(60849),o=r(15070),a=r(91631),s=r(14016),l=r(20568),d=r(41497),c=r(33535),u=r(47986),h=r(54669),p=r(16046),g=r(87891),m=r(97763),Z=r(16372),y=r(65717),v=r(92060),f=r(87444),x=r(7819),b=r(94813),S=r(1604),$=r(79857),C=r(2139),_=r(35212);const w=(e,t,r,i,n)=>["text","textV2","searchHistory","searchHistoryV2","popularCategory","topCategory","searchFor","searchText","searchTextV2"].includes(e.type)?{type:"link",to:(0,u.Xqq)(t,{vertical:n||v.g,userQuery:e.searchTerm?e.searchTerm:e.title,searchSource:Z.xH.SEARCH_SUGGESTION,searchType:Z.Sc.GLOBAL_SEARCH,...r?{deliveryLocation:r}:{}})}:"store"===e.type&&e.store?(0,x.C)(e.store,i,t):"croStore"===e.type&&e.store?{type:"link",to:(0,u.gfM)(t,{storeSlug:e.store.slug,storeUuid:e.store.uuid})}:{type:"unknown"},z=e=>{let{initialQuery:t,onSuggestionSelected:r,initialIsClosed:x,searchTypeaheadPlaceholder:z,vertical:k,isMultiVerticalDesktop:I}=e;const L=(0,b.TH)(),T=(0,a.k6)(),B=(0,s.T)(),E=(0,h.Z)(),P=(0,c.ZP)(),R=(0,l.Z)("getSearchSuggestionsV1"),O=(0,f.Z)("clear_search_results_cache_on_location_change"),D=(0,_.Z)(E,!0),H=(0,n.qp)({...m.J.eats_web_eater_home_search_home_style,defaultValue:""}),M=(0,g.t)({dropPastOrders:I||""!==H},I?{}:{queryObserverOptions:{enabled:!1}}),A=(0,y.Z)(),U=(0,n.ip)({...m.J.cs_other_entrypoint_xlb,defaultValue:!1}),V=(0,f.Z)("can_enable_cs_other_entrypoint_xlb"),N=(0,o.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),{setLastClickedPartialStore:X}=i.useContext(p.C),{userQuery:F}=(0,u.RAN)(L,["userQuery"]),Y=(0,S.Z)(),Q=(0,$.Z)(),G=(0,C.Z)(),q=i.useCallback((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";"replace"===t?T.replace(e):T.push(e)}),[T]),W=i.useCallback((async e=>{if(P("eats:search_end",{userQuery:e.title,page:L.pathname,hasDeliveryLocation:Boolean(E),mvsMeta:{verticalList:N.map((e=>e.verticalType)).join(","),selectedVertical:k||v.g},searchType:"searchFor"!==e.type&&"text"!==e.type||!e.title?"suggestion":"manual"}),r&&r(),e.store&&("store"===e.type&&!e.store.actionUrl||"croStore"===e.type)&&X({heroImageUrl:e.store.heroImageUrl,title:e.store.title,storeUuid:e.store.uuid}),"store"===e.type&&e.store){if(e.store.actionUrl)return;q((0,u.gfM)(L,{storeSlug:e.store.slug,storeUuid:e.store.uuid}),Q&&!G?"replace":"push")}else"croStore"===e.type&&e.store?P("eats:search_bar_past_order_store_click",{storeUuid:e.store?.uuid}):"searchFor"!==e.type&&"text"!==e.type||!e.title||q((0,u.Xqq)(L,{userQuery:e.title,searchSource:Z.xH.SEARCH_BAR,searchType:Z.Sc.GLOBAL_SEARCH}),Q||G?"replace":"push")}),[P,L,E,N,k,r,X,q,Q,G]),j=i.useCallback(((e,t)=>{const r={title:e.trim(),type:"searchFor"};W(r)}),[W]),K=i.useCallback((async e=>{if(!e){if(""!==H)return[];let e;if(M.isFetched){if(I)return(M.data?.verticalSearchHomeResults||{})[k||v.g];e=M.data?.searchHistory}else{const t=await M.refetch().then((e=>e.data)),r=t?.verticalSearchHomeResults;if(I)return(r||{})[k||v.g];e=t?.searchHistory}return e||[]}const{date:t,startTime:r,endTime:i}=(0,u.RAN)(L,["date","startTime","endTime"]),n=await R({userQuery:e,date:t,startTime:Number(r),endTime:Number(i),vertical:k});return 0===n.length?P("eats:global_search_suggestions_zero_results",{mvsMeta:{verticalList:N.map((e=>e.verticalType)).join(","),selectedVertical:k||v.g}}):P("eats:global_search_suggestions_viewed",{mvsMeta:{verticalList:N.map((e=>e.verticalType)).join(","),selectedVertical:k||v.g}}),!A||U&&V?n:n.filter((e=>!e.store?.actionUrl))}),[L,R,k,P,N,A,U,V,H,M,I]),J=i.useCallback((async e=>{if(!e)return[];const{date:t,startTime:r,endTime:i}=(0,u.RAN)(L,["date","startTime","endTime"]),n=await R({userQuery:e,date:t,startTime:Number(r),endTime:Number(i),vertical:k});return 0===n.length?P("eats:global_search_suggestions_zero_results",{mvsMeta:{verticalList:N.map((e=>e.verticalType)).join(","),selectedVertical:k||v.g}}):P("eats:global_search_suggestions_viewed",{mvsMeta:{verticalList:N.map((e=>e.verticalType)).join(","),selectedVertical:k||v.g}}),!A||U&&V?n:n.filter((e=>!e.store?.actionUrl))}),[L,R,k,P,N,A,U,V]),ee=i.useCallback((e=>{let{results:t,query:r}=e;return 0===t.length?r?B("shared.noSuggestionsForTerm",{searchTerm:r}):"":r?B("components.MarketplaceSearch.resultsDescription",{numResults:t.length,searchTerm:r}):B("shared.searchResultsCount",{resultsCount:t.length})}),[]),{query:te,results:re,getLabelProps:ie,getInputProps:ne,getMenuProps:oe,getItemProps:ae,reset:se,openMenu:le,isOpen:de,highlightedIndex:ce,clearCacheAndRefetchResults:ue,selectItem:he}=(0,d.Z)({id:"search-suggestions-typeahead",initialQuery:t||F,fetchResults:Y?J:K,initialIsClosed:x,onResultSelected:W,getQueryFromResult:e=>e?.title||"",onEnterKeyWithNoSelectedResult:j,getA11yStatusMessage:ee,fetchResultsTrigger:k,shouldTrimQuery:!0}),pe=z||B("shared.searchPlaceholder");return i.useEffect((()=>{!G&&O&&ue&&ue()}),[E]),i.useEffect((()=>{G&&O&&ue&&D!==E&&ue()}),[G,E,D,O,ue]),{query:te,results:re,isOpen:de,getLabelProps:ie,getInputProps:ne,getMenuProps:oe,getItemProps:ae,openMenu:le,reset:se,highlightedIndex:ce,placeholder:pe,getSuggestionAction:e=>w(e,L,E,A,k||v.g),handleSuggestionSelected:W,selectItem:he}}},57955:(e,t,r)=>{r.d(t,{Z:()=>P});var i=r(36151),n=r(46933),o=r("__fusion__1509"),a=r("__fusion__680"),s=r(91931),l=r(75161),d=r(32857),c=r(68065),u=r(11841),h=r(14016),p=r(44133),g=r("__fusion__914"),m=r("__fusion__703"),Z=r(72238),y=r(21322),v=r("__fusion__1019"),f=r(32583),x=r(54669),b=r(33535),S=r(33990);const $={StartEnhancer:{style:e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale300,paddingLeft:t.sizing.scale300}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300}}},Input:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale300}}},Root:{style:e=>{let{$theme:t}=e;return{paddingLeft:t.sizing.scale200,paddingRight:t.sizing.scale200,borderRadius:t.sizing.scale1200}}}},C={Root:{style:()=>({cursor:"pointer"})},LabelContent:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentPrimary,...t.typography.LabelMedium}}},LabelDescription:{style:e=>{let{$theme:t}=e;return{color:t.colors.contentSecondary,...t.typography.ParagraphSmall}}}},_=(0,s.zo)("div",(e=>{let{$expanded:t}=e;return{display:"flex",flexDirection:"column",justifyContent:"flex-start",minHeight:t?"577px":"216px"}})),w=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingSmall,display:"flex",justifyContent:"space-between",alignItems:"center",margin:`${t.sizing.scale800} ${t.sizing.scale550} ${t.sizing.scale300} ${t.sizing.scale800}`}})),z=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",margin:`${t.sizing.scale600} ${t.sizing.scale800}`,flexGrow:1}})),k=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale800,marginRight:t.sizing.scale800}})),I=(0,s.zo)("ul",(e=>{let{$theme:t}=e;return{marginLeft:t.sizing.scale300,marginRight:t.sizing.scale300}})),L=e=>{let{open:t,onClose:r}=e;const[a,L]=(0,i.useState)(""),[,T]=(0,s.hQ)(),B=(0,x.Z)(),{locationSuggestions:E,handleLocationSelected:P,isLoading:R,hasLoaded:O}=(0,p.Z)({query:a}),D=(0,h.T)(),H=(0,b.ZP)(),M=a.length>0,A=E?.length>0;(0,i.useEffect)((()=>{t&&(H("eats:enter_delivery_address_start",{address:B?.address?.address1,latitude:B?.latitude,longitude:B?.longitude}),H("eats:store_ephemeral_address_input_modal_impression"))}),[t,H,B]),(0,i.useEffect)((()=>{R&&H("eats:store_ephemeral_address_input_modal_search")}),[R,H]);const U=()=>{L("")};return(0,S.tZ)(l.u_,{isOpen:t,onClose:r,children:(0,S.BX)(_,{$expanded:A,children:[(0,S.BX)(w,{children:[(0,S.tZ)(n.v,{id:"shared.enterDeliveryAddress"}),(0,S.tZ)(d.Z,{kind:c.TO.tertiary,shape:c.X3.circle,onClick:r,children:(0,S.tZ)(v.default,{size:20})})]}),(0,S.tZ)(k,{children:(0,S.tZ)(u.Z,{startEnhancer:e=>(0,S.tZ)(g.default,{...e,size:16,onClick:e=>e.stopPropagation()}),placeholder:D("location_manager.search_placeholder"),overrides:$,value:a,onChange:e=>L(e.target.value),endEnhancer:e=>R?(0,S.tZ)(f.$,{$size:20}):M?(0,S.tZ)(m.default,{...e,size:20,...e,onClick:U}):null})}),(0,S.BX)(I,{children:[E?.map((e=>(0,S.tZ)(Z.Z,{artwork:e=>(0,S.tZ)(o.default,{...e,size:20,color:T.colors.gray600}),overrides:C,onClick:()=>{H("eats:store_ephemeral_address_input_modal_select_location"),P(e)},children:(0,S.tZ)(y.Z,{description:e.addressLine2,children:e.addressLine1})},e.id))),O&&0===E?.length?(0,S.tZ)(Z.Z,{children:(0,S.tZ)(y.Z,{children:(0,S.tZ)(n.v,{id:"components.store_address_input.no_results"})})},"no-results"):null]}),A?(0,S.tZ)(z,{children:(0,S.tZ)(d.Z,{kind:c.TO.secondary,onClick:r,children:(0,S.tZ)(n.v,{id:"back"})})}):null]})})};var T=r(51170),B=r(94579);const E=(0,s.zo)("div",(e=>{let{$theme:t,$isHighlighted:r}=e;return{...t.typography.LabelSmall,height:t.sizing.scale950,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,display:"flex",alignItems:"center",alignSelf:"center",gap:t.sizing.scale100,borderRadius:t.sizing.scale950,cursor:"pointer",":hover":{opacity:.8},whiteSpace:"nowrap",transition:B.pB.default,...r?{backgroundColor:t.colors.backgroundInversePrimary,color:t.colors.contentInversePrimary}:{backgroundColor:"transparent",color:t.colors.contentPrimary}}})),P=()=>{const[e,t]=(0,i.useState)(!1),{state:r}=(0,T.D)();return(0,S.BX)(S.HY,{children:[(0,S.BX)(E,{onClick:()=>t(!0),$isHighlighted:r.isAddressInputHighlighted,children:[(0,S.tZ)(o.default,{size:20}),(0,S.tZ)(n.v,{id:"shared.enterDeliveryAddress"}),(0,S.tZ)(a.default,{size:16})]}),(0,S.tZ)(L,{open:e,onClose:()=>t(!1)})]})}},3641:(e,t,r)=>{r.d(t,{Z:()=>G});var i=r(36151),n=r(14016),o=r(91631),a=r(47986),s=r(16372),l=r(58984),d=r(54669),c=r(87891),u=r(33535),h=r(78034),p=r(53213),g=r(19889),m=r(52298),Z=r(54176),y=r(30768),v=r(94813),f=r(64388),x=r(41878),b=r(53685),S=r(92060),$=r(91931),C=r(87873),_=r(14770),w=r(36278),z=r(37555),k=r(79168),I=r("__fusion__703"),L=r(33990);const T=(0,$.zo)("div",(e=>{let{$theme:t,$isFocused:r,$maxWidth:i}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",height:t.sizing.scale1200,borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",...r?{maxWidth:"1494px"}:{maxWidth:`${i??1036}px`},transition:`min-width ${t.animation.timing400} ease, max-width ${t.animation.timing400} ease`}})),B=(0,$.zo)("div",(e=>({display:"flex",flexShrink:0,alignSelf:"center",marginLeft:e.$theme.sizing.scale600,marginRight:e.$theme.sizing.scale500}))),E=(0,$.zo)("input",(e=>({flex:1,backgroundColor:e.$theme.colors.inputFill,...e.$width?{width:`${e.$width}px`}:{},appearance:"none",outline:"none","::placeholder":{..."mini"===e.$size?e.$theme.typography.LabelSmall:e.$theme.typography.LabelMedium,color:e.$theme.colors.contentSecondary},textOverflow:"ellipsis",overflow:"hidden",caretColor:e.$theme.colors.eatsBusiness}))),P=(0,$.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,cursor:"pointer",display:"flex",alignItems:"center"}})),R=(0,$.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),O=(0,$.zo)(_.Z,{cursor:"pointer"}),D=e=>{const[t,r]=i.useState(!1),[n,o]=i.useState(!0),a=i.useRef(null),s=(0,u.ZP)(),{value:l,...d}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),e.setExpandedState&&e.setExpandedState(),r(!0),0===l?.length&&o(!0)},onChange:t=>{n&&(s("eats:search_type_started",{numberRecentSearchSuggestions:e.numberRecentSearchSuggestions}),o(!1))},onBlur:()=>{r(!1)},onInput:t=>{e.onInput&&e.onInput(t)},ref:a});i.useEffect((()=>{e.expandedState&&a.current&&a.current.focus()}),[e.expandedState]);const c=e.expandedState&&e.query.length>0,h=(0,k.Z)(e.size);return(0,L.BX)(T,{$isFocused:e.expandedState||t,$style:h,$maxWidth:e.size?"100%":void 0,children:[(0,L.tZ)(B,{children:(0,L.tZ)(C.Z,{size:16})}),(0,L.tZ)(E,{...d,value:l||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$width:e.queryWidth,onKeyDown:t=>{t.keyCode===z.q7&&e.handleEnterClick&&e.query.trim().length>0&&e.handleEnterClick()},$size:e.size}),(0,L.tZ)(w.ZP,{$width:"8px"}),c?(0,L.BX)(L.HY,{children:[(0,L.tZ)(P,{type:"button",onClick:()=>{e.reset(),a.current&&(a.current.focus(),e.setExpandedState&&e.setExpandedState())},children:(0,L.tZ)(I.default,{size:16})}),(0,L.tZ)(w.IQ,{})]}):null,e.onClose&&e.query.length>0?(0,L.tZ)(R,{}):null,e.onClose?(0,L.tZ)(O,{onClick:e.onClose}):null]})};var H=r(46280),M=r(19566),A=r(40606),U=r(66740),V=r(93801),N=r(55758),X=r(43675),F=r(32762),Y=r(28700),Q=r(81702);const G=e=>{let{storeUuid:t,isSearchFeed:r,wrapperRef:C,expandedState:_,setExpandedState:w,size:z}=e;const[k]=(0,$.hQ)(),I=(0,l.I0)(),T=(0,o.k6)(),B=(0,n.T)(),E=(0,v.TH)(),P=(0,d.Z)(),{showSearchHome:R,setShowSearchHome:O}=(0,Q.Z)(),G=(0,c.t)({dropPastOrders:!0}),q=(0,N.d)(),W=Boolean("DELIVERY"===q),j=G.data?.verticalSuggestionLists,{store:K}=(0,f.ZP)(t),J=K?.data?.title||"",{desktopFeatures:ee}=(0,F.Z)();(0,i.useEffect)((()=>{j&&I((0,h.Vw)(j))}),[I,j]);const te=(0,u.ZP)();(0,i.useEffect)((()=>{te("eats:search_bar_impression")}),[te]);const{userQuery:re,vertical:ie,storeSearchQuery:ne,entryPoint:oe}=(0,a.RAN)(E,["userQuery","vertical","storeSearchQuery","entryPoint"]),[ae,se]=(0,i.useState)(ie||S.g);(0,i.useEffect)((()=>{se(ie||S.g)}),[ie]);const le=(0,y.Z)(),de=Boolean(t)?s.OT.STORE_SEARCH:r?s.OT.GLOBAL_SEARCH:""!==le?s.OT.VERTICAL_FEED:s.OT.HOME_FEED,{feed:ce}=(0,Z.Z)(),ue=()=>{te("eats:search_bar_closed"),w(!1)},{query:he,results:pe,getInputProps:ge,reset:me,placeholder:Ze,getLabelProps:ye,getItemProps:ve,getMenuProps:fe,getSuggestionAction:xe}=(0,x.ZP)({..."shoppingList"===oe?{initialQuery:re}:{initialQuery:re||ne},initialIsClosed:!0,searchTypeaheadPlaceholder:B("shared.searchBarHintText"),vertical:ae||S.g,onSuggestionSelected:ue,isMultiVerticalDesktop:!0}),be=pe.data||[],Se=()=>{se(ie||S.g),r||(O(!0),me()),ue()};(0,p.Z)(C,(()=>{Se()}),_),(0,g.Z)((()=>{ue(),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur()}));const $e=Boolean(J)&&!ee.hasNewInStoreSearch?B("shared.searchStoreTitle",{storeTitle:J}):Ze,Ce=e=>{ue(),te("eats:search_end",{userQuery:e?.title,page:E.pathname,hasDeliveryLocation:Boolean(P),mvsMeta:{verticalList:(j||[]).map((e=>e.verticalType)).join(","),selectedVertical:ae||S.g},searchType:"suggestion"})};return(0,L.BX)(L.HY,{children:[(0,L.tZ)(H.ag,{$showOverlay:_,onClick:Se}),(0,L.BX)(H.vr,{$expanded:_,children:[(0,L.BX)(H.kN,{role:"search","aria-label":B("shared.searchBarHintText"),$expanded:_,"data-testid":"multi-vertical-desktop-global-search-bar-wrapper",children:[(0,L.tZ)(H.E7,{...ye(),children:$e}),(0,L.tZ)(D,{query:he,getInputProps:ge,reset:()=>{me(),O(!0)},placeholder:Ze,setExpandedState:()=>{te("eats:search_multi_vertical_bar_click"),te("eats:search_bar_clicked"),w(!0)},expandedState:_,verticalLists:j,handleEnterClick:()=>(te("eats:search_end",{userQuery:he,page:E.pathname,hasDeliveryLocation:Boolean(P),searchType:"manual"}),T.push((0,a.Xqq)(E,{vertical:ae||S.g,userQuery:he.trim(),searchSource:s.xH.SEARCH_BAR,searchType:s.Sc.GLOBAL_SEARCH})),void ue()),isSearchFeed:r,isCategoryPage:"CATEGORY_PAGE"===ce.data?.searchDisplayConfig,onFocus:()=>{""===he&&"HOME_FEED"===de&&te("eats:search_start",{page:E.pathname,hasDeliveryLocation:Boolean(P),mvsMeta:{verticalList:j?.map((e=>e.verticalType)).join(",")||"",selectedVertical:ae||S.g},searchSource:de,numberRecentSearchSuggestions:(0,b.C)(be)})},onInput:e=>{e.target.value.trim()?O(!1):O(!0)},size:z,numberRecentSearchSuggestions:(0,b.C)(be)})]}),(0,L.tZ)(H.bf,{$showPopover:_,children:(0,L.BX)(H.YD,{$showPopover:_,$needsPadding:!1,children:[W?(0,L.tZ)(M.Z,{onSelect:e=>{se(e)},selectedVertical:ae||S.g,expandedState:_,surface:"ZERO_STATE"}):null,(0,L.BX)(H.Cz,{$needsLeftMargin:!0,children:[R?null:be.length>0?(0,L.tZ)(Y.Z,{suggestions:be,getMenuProps:fe,getItemProps:ve,onItemClick:Ce,getSuggestionAction:xe}):(0,L.tZ)(H.p5,{}),R?(0,L.tZ)(A.Z,{source:{isLoading:G.isLoading,hasLoaded:G.isFetched,data:G.data,error:G.error},error:()=>(0,L.tZ)(V.nQ,{code:500}),loaded:e=>(0,L.tZ)(X.Z,{selectedVertical:ae||S.g,searchHomeResults:(e.verticalSearchHomeResults||{})[ae||S.g]??[],verticalList:e.verticalSuggestionLists||[],onItemClick:Ce}),loading:()=>(0,L.tZ)(U.Z,{itemNumbers:[5,3]})}):null,(0,L.tZ)(m.ZP,{$height:69})]})]})})]})]})}},46294:(e,t,r)=>{r.d(t,{Z:()=>pe});var i=r(36151),n=r(14016),o=r(91631),a=r(86695),s=r(91931),l=r(69404),d=r(47986),c=r(16372),u=r(58984),h=r(87891),p=r(33535),g=r(78034),m=r(53213),Z=r(19889),y=r(36278),v=r(97450),f=r(93866),x=r(55811),b=r(30768),S=r(94813),$=r(43193),C=r(76204),_=r(14869),w=r(42751),z=r(45631),k=r(24236),I=r(33990);const L=()=>null,T=(0,s.zo)("div",{display:"flex"}),B=(0,s.zo)("div",{display:"flex",width:"100%"}),E=(0,s.zo)("div",{display:"flex",width:"inherit",flexDirection:"column"}),P=(0,s.zo)("div",(e=>{let{$numOfColumns:t}=e;return{display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,width:"inherit"}})),R=(0,s.zo)("div",{display:"flex",width:"100%"}),O=e=>{let{item:t,index:r,compositionMap:n,virtualListScrollEl:o,isGrocery:a,fallbackErrorComponent:s,emitEvent:l,handleSuggestionSelected:d}=e;const c=s||L,{elementRef:u,isElementHidden:h}=(0,k.Z)({initialHidden:!0,waitTime:0,shouldListen:!0}),p=t.type;if(i.useEffect((()=>{!h&&l&&"content"===p&&t?.content?.template.serverDrivenUI&&l(t?.content?.template.serverDrivenUI)}),[l,h,t?.content?.template.serverDrivenUI,p]),"container"===p){const e=t.container;return(0,I.tZ)(D,{bloxContainer:e,compositionMapGlobal:n,virtualListScrollEl:o,isGrocery:a,emitEvent:l})}if("content"===p){const e=t?.content?.template.serverDrivenUI;if(!e)return(0,I.BX)(I.HY,{children:[(0,I.tZ)(c,{}),";",(0,I.tZ)(_.Z,{children:(0,I.tZ)(i.Fragment,{children:(0,I.tZ)(T,{children:"Container serverDrivenUIItem did not load"})},r)})]});const o=e?.compositionKey,a=o&&n?n[o]:{};if(!a?.root?.escapedJsonData||a?.root?.jsonData){const e=JSON.stringify(a?.root);return(0,I.BX)(_.Z,{children:[(0,I.tZ)(T,{children:"Web client needs escapedJsonData not jsonData"}),e]})}return(0,I.tZ)(R,{ref:u,onClick:()=>{d(e,r)},"data-testid":"blox-parser-suggestion-item",children:(0,I.tZ)(C.Z,{index:r,encodedViewModel:a?.root,data:e?.elements||null,clientViews:e?.clientViews,analytics:e?.analytics})},r)}return(0,I.BX)(I.HY,{children:[(0,I.tZ)(c,{}),";",(0,I.BX)(i.Fragment,{children:[(0,I.tZ)(_.Z,{children:"Container Item did not load"}),";"]},r)]})},D=e=>{let{bloxContainer:t,compositionMapGlobal:r,virtualListScrollEl:n,isGrocery:o,fallbackErrorComponent:a,emitEvent:s,handleSuggestionSelected:l}=e;const d=a||L,c=t.items,u=t.compositionMap||r,h=t.type,p="vertical"===h?.type?Number(h.vertical.columnCount):1,g=i.useMemo((()=>(0,z.Z)(c,p)),[p,c]),m=i.useMemo((()=>c.length<=1&&"content"===c[0]?.type||c.length>1?g:g[0]),[c,g]);return t&&t.type?(0,I.tZ)(B,{children:(0,I.tZ)(E,{children:o&&p>=2?(0,I.tZ)(w.ZP,{calculateHeight:()=>224,scrollEl:n,children:m&&m.map(((e,t)=>(0,I.tZ)(P,{$numOfColumns:p,children:e.map(((e,t)=>(0,I.tZ)(O,{item:e,index:t,compositionMap:u,virtualListScrollEl:n,isGrocery:o,fallbackErrorComponent:a,emitEvent:s,handleSuggestionSelected:l},`${t}-ivl`)))},`${t}-gc`)))}):(0,I.tZ)(I.HY,{children:c.map(((e,t)=>(0,I.tZ)(O,{item:e,index:t,compositionMap:u,virtualListScrollEl:n,isGrocery:o,fallbackErrorComponent:a,emitEvent:s,handleSuggestionSelected:l},`${t}-non-ivl`)))})})}):(0,I.BX)(I.HY,{children:[(0,I.tZ)(d,{}),";",(0,I.tZ)(_.Z,{children:(0,I.tZ)(T,{children:"Error in Container Component"})})]})},H=i.memo(D);var M=r(43832),A=r(49160),U=r(80803);const V=(0,s.zo)("div",{margin:0,padding:0,width:"100%",height:"100%"}),N=e=>{let{searchSuggestBloxResponse:t,handleSuggestionSelected:r}=e;const i=(0,p.ZP)(),n=$.useRef(!1),{store:o}=(0,M.QT)(),a=(0,A.Z)(o.data),s=o.data?(0,U.tl)(o.data,a):void 0;return $.useEffect((()=>{if(t?.bloxContainer?.items&&!n.current){n.current=!0;t.bloxContainer.items.forEach(((e,t)=>{if("content"===e.type&&"serverDrivenUI"===e.content.template?.type){const r=e.content.template.serverDrivenUI.analytics?.data?.maps?.stringMap;i("eats:store_search_suggestion_impression",{displaySurface:r?.displaySurface&&String(r?.displaySurface),searchSuggestion:r?.searchSuggestion&&String(r?.searchSuggestion),searchTerm:r?.searchTerm&&String(r?.searchTerm),storeUuid:r?.storeUuid&&String(r?.storeUuid),suggestionType:r?.suggestionType&&String(r?.suggestionType),itemPosition:t,storeLayout:s})}}))}}),[i,t?.bloxContainer?.items,s]),t&&t?.bloxContainer?null===t?.bloxContainer.items?null:(0,I.tZ)(V,{"data-testid":"desktop-in-store-suggestions",children:(0,I.tZ)(H,{bloxContainer:t.bloxContainer,compositionMapGlobal:t.bloxContainer?.compositionMap,handleSuggestionSelected:r})}):null};var X=r(64388),F=r(15070),Y=r(41497),Q=r(54669),G=r(20568),q=r(87444);const W=e=>{let{initialQuery:t,onSuggestionSelected:r,initialIsClosed:o,searchTypeaheadPlaceholder:a,vertical:s,store:l}=e;const c=(0,S.TH)(),u=(0,n.T)(),h=(0,Q.Z)(),p=(0,G.Z)("searchSuggestV2"),g=(0,q.Z)("clear_search_results_cache_on_location_change"),{xlbHeaderBridge:m}=(0,F.v)((e=>{let{embeddedFeatures:t}=e;return t})),{userQuery:Z}=(0,d.RAN)(c,["userQuery"]),y=i.useCallback((async e=>{r&&r()}),[r]),v=i.useCallback((async e=>{if(!e)return[];return[await p({userQuery:e,storeUuid:l?.data?.uuid||"",storeLocation:l?.data?.location,locationType:l?.data?.location?.locationType,parentChainUuid:l?.data?.parentChain?.uuid||"",webClientType:"DESKTOP"})]}),[p,l?.data?.uuid,l?.data?.location,l?.data?.parentChain?.uuid]),f=i.useCallback((e=>{let{results:t,query:r}=e;return 0===t.length?r?u("shared.noSuggestionsForTerm",{searchTerm:r}):"":r?u("components.MarketplaceSearch.resultsDescription",{numResults:t.length,searchTerm:r}):u("shared.searchResultsCount",{resultsCount:t.length})}),[]),{query:x,results:b,getLabelProps:$,getInputProps:C,getMenuProps:_,getItemProps:w,reset:z,openMenu:k,isOpen:I,highlightedIndex:L,clearCacheAndRefetchResults:T,selectItem:B}=(0,Y.Z)({id:"search-suggestions-typeahead",initialQuery:t||Z,fetchResults:v,initialIsClosed:o,onResultSelected:y,getQueryFromResult:e=>"",getA11yStatusMessage:f,fetchResultsTrigger:s,updateInputOnSelectedItemChange:!0,shouldTrimQuery:!0}),E=a||u("shared.searchPlaceholder");return i.useEffect((()=>{g&&T&&T()}),[h]),{query:x,results:b,isOpen:I,getLabelProps:$,getInputProps:C,getMenuProps:_,getItemProps:w,openMenu:k,reset:z,highlightedIndex:L,placeholder:m?"":E,getSuggestionAction:e=>({type:"unknown"}),handleSuggestionSelected:y,selectItem:B}};var j=r(92060),K=r(46933),J=r(87873),ee=r(14770),te=r(37555),re=r(79168);const ie=(0,s.zo)("div",(e=>{let{$theme:t,$isFocused:r,$height:i,$maxWidth:n}=e;return{...t.typography.LabelMedium,backgroundColor:t.colors.inputFill,color:t.colors.inputText,width:"100%",display:"flex",position:"absolute",height:i,borderRadius:t.borders.pillButtonBorderRadius,alignItems:"center",right:"0",transform:"translateY(-50%)",...r?{maxWidth:"1494px",minWidth:"600px"}:{maxWidth:"1036px",minWidth:"180px"},...n?{maxWidth:n}:void 0,transition:"min-width 400ms ease, max-width 400ms ease"}})),ne=(0,s.zo)("div",{display:"flex",flexShrink:0,alignSelf:"center"}),oe=(0,s.zo)("input",(e=>{let{$theme:t,$width:r}=e;return{flex:1,backgroundColor:t.colors.inputFill,...r?{width:`${r}px`}:{},appearance:"none",outline:"none","::placeholder":{...t.typography.LabelMedium,color:t.colors.contentSecondary},textOverflow:"ellipsis",overflow:"hidden"}})),ae=(0,s.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentTertiary,cursor:"pointer"}})),se=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{width:"1px",margin:"0 16px",backgroundColor:t.colors.borderOpaque}})),le=(0,s.zo)(ee.Z,{cursor:"pointer"}),de=e=>{const[t,r]=i.useState(!1),n=i.useRef(null),{value:o,...a}=e.getInputProps({onFocus:()=>{e.onFocus&&e.onFocus(),e.setExpandedState&&e.setExpandedState(),r(!0)},onBlur:()=>r(!1),ref:n});i.useEffect((()=>{e.expandedState&&n.current&&n?.current?.focus()}),[e.expandedState]);const s=e.expandedState&&e.query.length>0,{height:l}=(0,re.Z)(e.size);return(0,I.tZ)(I.HY,{children:(0,I.BX)(ie,{$isFocused:e.expandedState||t,$height:l,$maxWidth:"mini"===e.size?"100%":void 0,children:[(0,I.tZ)(y.IQ,{}),(0,I.tZ)(ne,{children:(0,I.tZ)(J.Z,{size:14})}),(0,I.tZ)(y.ZP,{$width:"16px"}),(0,I.tZ)(oe,{...a,value:o||"",type:"text",autoComplete:"off",name:"searchTerm",placeholder:e.placeholder,$width:e.queryWidth,onKeyDown:t=>{t.keyCode===te.q7&&e.handleEnterClick&&e.query.trim().length>0&&(e.handleEnterClick(),r(!1))}}),(0,I.tZ)(y.ZP,{$width:"8px"}),s?(0,I.BX)(I.HY,{children:[(0,I.tZ)(ae,{type:"button",onClick:()=>{e.reset(),n.current&&(n?.current?.focus(),e.setExpandedState&&e.setExpandedState())},children:(0,I.tZ)(K.v,{id:"shared.clear"})}),(0,I.tZ)(y.IQ,{})]}):null,e.onClose&&e.query.length>0?(0,I.tZ)(se,{}):null,e.onClose?(0,I.tZ)(le,{onClick:e.onClose}):null]})})};var ce=r(46280),ue=r(32762),he=r(40964);const pe=e=>{let{storeUuid:t,isSearchFeed:r,wrapperRef:$,expandedState:C,setExpandedState:_,size:w}=e;const[z,k]=(0,s.hQ)(),L=(0,u.I0)(),T=(0,o.k6)(),B=(0,n.T)(),E=(0,S.TH)(),P=(0,h.t)({dropPastOrders:!0}).data?.verticalSuggestionLists,R=(0,o.UO)(),{store:O}=(0,X.ZP)(t),D=O.data&&(0,he.A)(O.data),H=O?.data?.title||"",M=(0,U.dI)(),{desktopFeatures:A}=(0,ue.Z)();(0,i.useEffect)((()=>{P&&L((0,g.Vw)(P))}),[L,P]);const V=(0,p.ZP)();(0,i.useEffect)((()=>{V("eats:search_bar_impression")}),[V]);const{userQuery:F,vertical:Y,storeSearchQuery:Q,entryPoint:G}=(0,d.RAN)(E,["userQuery","vertical","storeSearchQuery","entryPoint"]),[q,K]=(0,i.useState)(Y||j.g);(0,i.useEffect)((()=>{Y&&K(Y)}),[Y]);const J=(0,b.Z)(),ee=Boolean(t)?c.OT.STORE_SEARCH:r?c.OT.GLOBAL_SEARCH:""!==J?c.OT.VERTICAL_FEED:c.OT.HOME_FEED,te=()=>{V("eats:search_bar_closed"),_(!1)},{query:re,results:ie,getInputProps:ne,reset:oe,placeholder:ae,getLabelProps:se,selectItem:le}=W({..."shoppingList"===G?{initialQuery:F}:{initialQuery:F||Q},initialIsClosed:!0,searchTypeaheadPlaceholder:B("shared.searchBarHintText"),vertical:q,onSuggestionSelected:te,isMultiVerticalDesktop:!0,store:O}),pe=ie.data||[],ge=()=>{K(Y),te()},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=(0,d.WxO)(R),r=(0,d.CiO)(E,["entryPoint","sortAndFilters"]),i=(0,d.AC5)({location:r,args:t,storeSearchQuery:(e||re).trim(),isOfd:!D&&A.hasNewInStoreSearch});T.push(i),te(),V("eats:store_search_fetch_results_enter_press",{storeUuid:O?.data?.uuid||"",storeSearchQuery:e||re})};(0,m.Z)($,(()=>{ge()}),C),(0,Z.Z)((()=>{te(),document.activeElement instanceof HTMLInputElement&&document.activeElement.blur()}));const Ze="postmates"===(0,x.Z)(),ye=Boolean(H)&&!A.hasNewInStoreSearch?B("shared.searchStoreTitle",{storeTitle:H}):ae;return(0,I.BX)(I.HY,{children:[(0,I.tZ)(ce.cI,{children:(0,I.tZ)(ce.im,{role:"search","aria-label":B("shared.searchBarHintText"),children:(0,I.BX)(l.Z,{"data-testid":"multi-vertical-desktop-in-store-search-bar-wrapper",children:[(0,I.tZ)(ce.E7,{...se(),children:ye}),(0,I.tZ)(de,{query:re,getInputProps:ne,reset:()=>{oe(),V("eats:store_search_clear",{storeUuid:O?.data?.uuid||""})},placeholder:ye,setExpandedState:()=>{V("eats:search_multi_vertical_bar_click"),V("eats:search_bar_clicked"),_(!0)},expandedState:C,handleEnterClick:()=>me(),onFocus:()=>{V("eats:store_search_grocery_entrypoint_click",{storeUuid:O?.data?.uuid||""}),re&&""!==re||M({searchSource:ee,searchDataInfoLayer:"L1",searchDataInfoTab:"SHOP"})},size:w})]})})}),C?(0,I.tZ)(I.HY,{children:(0,I.BX)(ce.F$,{$style:{marginLeft:"mini"===w?k.sizing.scale700:k.sizing.scale950},children:[(0,I.tZ)(a.zx,{kind:"tertiary",shape:"circle",title:B("close"),onClick:ge,children:(0,I.tZ)(v.Z,{size:18})}),(0,I.tZ)(f.Z,{})]})}):null,(e=>!!(e&&e.length&&e.length>0)&&Boolean(e[0]?.bloxContainer?.items))(pe)?(0,I.BX)(ce.eh,{$showPopover:C,children:[(0,I.tZ)(y.KG,{$width:Ze?ce.aG:ce.Bq}),(0,I.tZ)(ce.YD,{$showPopover:C,children:(0,I.tZ)(ce.Cz,{children:(0,I.tZ)(N,{searchSuggestBloxResponse:pe[0],handleSuggestionSelected:(e,t)=>{if(e){const r=e?.analytics?.data?.maps?.stringMap,i=r?.searchSuggestion;r&&i&&(V("eats:store_search_suggestion_click",{displaySurface:r?.displaySurface&&String(r?.displaySurface),searchSuggestion:r?.searchSuggestion&&String(r?.searchSuggestion),searchTerm:r?.searchTerm&&String(r?.searchTerm),storeUuid:r?.storeUuid&&String(r?.storeUuid),suggestionType:r?.suggestionType&&String(r?.suggestionType),itemPosition:t}),le(i),me(i))}}})})}),(0,I.tZ)(y.KG,{$width:ce.Od})]}):null]})}},46280:(e,t,r)=>{r.d(t,{E7:()=>ae,YD:()=>ce,sA:()=>re,ag:()=>W,p5:()=>K,qX:()=>te,aV:()=>q,aG:()=>Q,Od:()=>G,Bq:()=>Y,FE:()=>j,bf:()=>le,vr:()=>ne,F$:()=>ie,eh:()=>de,cI:()=>oe,kN:()=>se,Cz:()=>J,im:()=>ee,ZP:()=>ue});var i=r(91931),n=r(15208),o=r(94579),a=r(1795),s=r(64388),l=r(94072),d=r(70940),c=r(36151),u=r(43193),h=r(31248),p=r(97420),g=r(9071),m=r(52419),Z=r(96965),y=r(93866),v=r(83563),f=r(60582),x=r(639),b=r(58984),S=r(36278),$=r(54176),C=r(87891),_=r(54669),w=r(34626),z=r(4525),k=r(28222),I=r(80165),L=r(78034),T=r(57820),B=r(69630),E=r(46857),P=r(929),R=r(33535),O=r(19889),D=r(57955),H=r(32762),M=r(46294),A=r(33990);const U=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:i,isSearchFeed:n,showSigninSignup:o,customizedDiningModeToggle:a,logSignInSignUpClick:s,campaign:l,storeUuid:d,isSchedulable:U}=e;const{user:V}=(0,w.Z)(),N=(0,b.I0)(),X=(0,k.Z)(),F=(0,_.Z)(),Y=(0,C.t)({dropPastOrders:!0}).data?.verticalSuggestionLists,Q=(0,R.ZP)();(0,c.useEffect)((()=>{Y&&N((0,L.Vw)(Y))}),[N,Y]),(0,c.useEffect)((()=>{Q("eats:search_bar_impression")}),[Q]);const G=(0,I.WI)("header-location-typeahead"),{closeAndUpdate:W}=(0,z.Z)(),K=(0,B.Z)(),[J,ne]=(0,c.useState)(!1),oe=Boolean(d),{feed:ae}=(0,$.Z)(),{isStoreOfdRedesignPhase2XpEnabled:se}=(0,H.Z)();let le;le=K?(0,A.tZ)(T.Z,{startShoppingRedirect:!n&&!oe}):(0,A.tZ)(p.Z,{});const de=u.useRef(null);(0,O.Z)((()=>{ne(!1)}));const{headerHeight:ce}=(0,P.Z)(),ue=F?.address.address1||"";let he;return he=se?(0,A.BX)(A.HY,{children:[(0,A.tZ)(D.Z,{}),(0,A.tZ)(re,{})]}):(0,A.BX)(A.HY,{children:[(0,A.tZ)(S.ZP,{$width:"64px"}),(0,A.tZ)(te,{children:(0,A.tZ)(x.Z,{registerRef:G,onLocationSelected:e=>{W(e,void 0,t)},initialQuery:ue,id:"header"})}),(0,A.tZ)(re,{})]}),(0,A.tZ)(q,{$showOverlay:J,children:(0,A.tZ)(ee,{ref:de,children:(0,A.BX)(j,{$headerHeight:ce,children:[X?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(m.Z,{}),(0,A.tZ)(S.ZP,{$width:"32px"}),(0,A.tZ)(v.Z,{}),(0,A.tZ)(S.ZP,{$width:se&&!F?"8px":"40px"})]}),F?(0,A.BX)(A.HY,{children:[J?null:(0,A.BX)(A.HY,{children:[r?(0,A.BX)(A.HY,{children:[a||(0,A.tZ)(g.Z,{isDisabled:ae.isLoading}),(0,A.tZ)(S.ZP,{$width:"16px"})]}):null,(0,A.tZ)(Z.Z,{size:"large",storeUuid:d,isSchedulable:U}),(0,A.tZ)(S.ZP,{$width:"48px"})]}),X?null:(0,A.tZ)(M.Z,{wrapperRef:de,expandedState:J,setExpandedState:ne,isSearchFeed:n,storeUuid:d})]}):he,(0,A.tZ)(ie,{children:J?null:(0,A.BX)(A.HY,{children:[F||i?(0,A.tZ)(h.Z,{}):null,(0,A.tZ)(A.HY,{children:le}),(0,A.tZ)(y.Z,{}),V.data?.isLoggedIn?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(S.ZP,{$width:"24px"}),o?(0,A.tZ)(f.m,{campaign:l}):(0,A.tZ)(E.Z,{campaign:l,beforeClick:()=>{s&&s("signin","header")}})]})]})})]})})})};var V=r(3641);const N=(0,i.zo)("div",{flex:"1 0 0"}),X=e=>{let{shouldNotRedirectToHomeFeed:t,showDiningMode:r,showCart:i,isSearchFeed:n,showSigninSignup:o,customizedDiningModeToggle:a,logSignInSignUpClick:s,campaign:l,storeUuid:d,isSchedulable:b}=e;const{user:C}=(0,w.Z)(),L=(0,k.Z)(),R=(0,_.Z)(),O=(0,I.WI)("header-location-typeahead"),{closeAndUpdate:M}=(0,z.Z)(),U=(0,B.Z)(),[X,F]=(0,c.useState)(!1),Y=Boolean(d),{feed:Q}=(0,$.Z)(),{isStoreOfdRedesignPhase2XpEnabled:G}=(0,H.Z)();let W;W=U?(0,A.tZ)(T.Z,{startShoppingRedirect:!n&&!Y}):(0,A.tZ)(p.Z,{});const K=u.useRef(null),{headerHeight:J}=(0,P.Z)(),ne=R?.address?.address1||"";let oe;return oe=G?(0,A.BX)(A.HY,{children:[(0,A.tZ)(D.Z,{}),(0,A.tZ)(re,{})]}):(0,A.BX)(A.HY,{children:[(0,A.tZ)(S.ZP,{$width:"64px"}),(0,A.tZ)(te,{children:(0,A.tZ)(x.Z,{registerRef:O,onLocationSelected:e=>{M(e,void 0,t)},initialQuery:ne,id:"header"})}),(0,A.tZ)(re,{})]}),(0,A.tZ)(q,{$showOverlay:X,children:(0,A.tZ)(ee,{ref:K,children:(0,A.BX)(j,{$headerHeight:J,children:[L?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(m.Z,{}),(0,A.tZ)(S.ZP,{$width:"32px"}),(0,A.tZ)(v.Z,{}),(0,A.tZ)(S.ZP,{$width:G&&!R?"8px":"24px"})]}),R?(0,A.BX)(A.HY,{children:[X?null:(0,A.BX)(A.HY,{children:[r?(0,A.BX)(A.HY,{children:[a||(0,A.tZ)(g.Z,{isDisabled:Q.isLoading}),(0,A.tZ)(S.ZP,{$width:"16px"})]}):null,(0,A.tZ)(Z.Z,{size:"large",storeUuid:d,isSchedulable:b}),L?(0,A.tZ)(N,{}):(0,A.tZ)(S.ZP,{$width:"16px"})]}),L?null:(0,A.tZ)(V.Z,{wrapperRef:K,expandedState:X,setExpandedState:F,isSearchFeed:n,storeUuid:d})]}):oe,X?null:(0,A.BX)(ie,{children:[R||i?(0,A.tZ)(h.Z,{}):null,(0,A.tZ)(A.HY,{children:W}),(0,A.tZ)(y.Z,{}),C.data?.isLoggedIn?null:(0,A.BX)(A.HY,{children:[(0,A.tZ)(S.ZP,{$width:"24px"}),o?(0,A.tZ)(f.m,{campaign:l}):(0,A.tZ)(E.Z,{campaign:l,beforeClick:()=>{s&&s("signin","header")}})]})]})]})})})};var F=r(29230);const Y="282px",Q="260px",G="148px",q=(0,i.zo)("div",(e=>{let{$theme:t,$showOverlay:r}=e;return{...r?{...t.overlays.full,position:"fixed",top:0,left:0,right:0,height:"100vh",zIndex:o.I_.modal,overflow:"auto",transition:"all 0.5s ease"}:{}}})),W=(0,i.zo)("div",(e=>{let{$theme:t,$showOverlay:r}=e;return{...r?{...t.overlays.full,backgroundColor:"rgba(0, 0, 0, 0.08)",position:"fixed",top:0,left:0,right:0,height:"100vh",zIndex:o.I_.modal,overflow:"auto",transition:`all 0.5s ${t.animation.easeOutQuinticCurve}`}:{transition:`all 0.5s ${t.animation.easeOutQuinticCurve}`}}})),j=(0,i.w1)(n.Z,(e=>{let{$theme:t,$headerHeight:r}=e;return{color:t.colors.onHeader,position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:`${r}px`}})),K=(0,i.w1)(a.Z,{margin:"40px auto"}),J=(0,i.zo)("div",(e=>{let{$needsLeftMargin:t}=e;return{minHeight:"472px",marginLeft:t?"16px":"-16px",maxHeight:"calc(100vh - 280px)",overflowY:"auto"}})),ee=((0,i.zo)("div",{position:"relative"}),(0,i.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,i.zo)("div",(e=>{let{$theme:t,$isTransparent:r,$hasBorderBottom:i}=e;return{width:"100%",background:r?"transparent":t.colors.backgroundPrimary,borderBottom:"1px solid",borderBottomColor:i?t.colors.borderOpaque:"transparent",margin:"0 auto",transition:o.pB.default}}))),te=(0,i.zo)("div",{width:"100%",maxWidth:"722px"}),re=(0,i.zo)("div",{flex:1}),ie=(0,i.zo)("div",{justifyContent:"flex-end",display:"flex",flexGrow:0,alignItems:"center"}),ne=(0,i.zo)("div",(e=>{let{$theme:t,$expanded:r}=e;const i={display:"flex",minWidth:r?"600px":`${F.Kv.searchMinWidth}px`,transition:`all ${t.animation.timing300} ${t.animation.easeOutQuinticCurve}`,flex:"1"};return r?{...i,alignSelf:"flex-start",flexDirection:"column"}:i})),oe=(0,i.zo)("div",{flex:"1 0",display:"flex",width:"100%",minWidth:`${F.Kv.searchMinWidth}px`}),ae=((0,i.zo)("button",{display:"flex",flexDirection:"row",cursor:"pointer",whiteSpace:"nowrap"}),(0,i.zo)("label",o.E2)),se=(0,i.zo)("div",(e=>{let{$theme:t,$expanded:r}=e;const i={flex:"1",paddingLeft:t.sizing.scale500,paddingRight:t.sizing.scale500,backgroundColor:t.colors.backgroundPrimary,borderTopRightRadius:t.borders.radius500,borderTopLeftRadius:t.borders.radius500};return r?{...i,paddingTop:t.sizing.scale500,zIndex:o.I_.modal,marginTop:t.sizing.scale0}:i})),le=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r}=e;return{display:"flex",zIndex:o.I_.modal,background:t.colors.backgroundPrimary,maxWidth:"1920px",borderBottomRightRadius:t.borders.radius500,borderBottomLeftRadius:t.borders.radius500,borderBottomColor:t.colors.borderOpaque,borderBottomStyle:"solid",borderBottomWidth:"1px",transform:"translateY(0)",overflow:"hidden",...r?{opacity:"1",width:"100%",maxHeight:"calc(100vh - 180px)"}:{maxHeight:"0",visibility:"hidden",opacity:"0",width:"0px"},transition:`opacity 0.5s ${t.animation.easeOutQuinticCurve}, visibility 0.5s ${t.animation.easeOutQuinticCurve}`}})),de=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r}=e;return{display:"flex",flexDirection:"row",zIndex:o.I_.modal,position:"absolute",background:t.colors.backgroundPrimary,width:"100%",maxWidth:"1920px",top:"100%",right:"0",left:"0",margin:"0 auto",boxShadow:"0 6px 4px -4px rgba(0, 0, 0, 0.1)",borderBottomColor:t.colors.borderOpaque,borderBottomStyle:"solid",borderBottomWidth:"1px",transform:"translateY(0)",overflow:"hidden",...r?{opacity:"1"}:{height:"0",visibility:"hidden",opacity:"0"},transition:"all 0.5s ease"}})),ce=(0,i.zo)("div",(e=>{let{$theme:t,$showPopover:r,$needsPadding:i}=e;return{display:"flex",width:"100%",flexDirection:"column",paddingLeft:i?t.sizing.scale1000:"0",paddingRight:i?t.sizing.scale1000:"0",...r?{visibility:"visible"}:{visibility:"hidden"}}})),ue=e=>{const{store:t}=(0,s.ZP)(e.storeUuid),r=t?.data?.title||"",i=(0,d.Z)(t?.data?.uuid||""),{isInStoreSearchSuggestionsXpEnabled:n}=(0,l.Z)(),o=Boolean(r);return(0,A.tZ)(A.HY,{children:o&&i&&n?(0,A.tZ)(U,{...e}):(0,A.tZ)(X,{...e})})}},19566:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(36151),n=r(94813),o=r(15070),a=r(71454),s=r.n(a),l=r(91931),d=r(47986),c=r(92060),u=r(87891),h=r(33535),p=r(94579),g=r(33990);const m=(0,l.zo)("ul",(e=>{let{$theme:t,$width:r}=e;return{display:"flex",textAlign:"center",marginBottom:"8px",width:r?`${r}px`:"100%",height:`${p.mc}px`,background:t.colors.backgroundPrimary}})),Z=(0,l.zo)("li",(e=>{let{$theme:t,$isSelected:r}=e;return{...t.typography.LabelSmall,borderBottom:`5px solid ${r?t.colors.black:t.colors.borderOpaque}`,alignSelf:"center",padding:t.sizing.scale600,color:r?t.colors.contentPrimary:t.colors.contentTertiary,cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),y=(0,l.zo)("li",(e=>{let{$theme:t}=e;return{borderBottom:`5px solid ${t.colors.borderOpaque}`,flexGrow:1,padding:"24px",alignSelf:"center"}})),v=e=>{const t=(0,n.TH)(),r=(0,h.ZP)(),a=(0,o.v)((e=>{let{multiVertical:t}=e;return t.verticalList})),{userQuery:l}=(0,d.RAN)(t,["userQuery"]),[p,v]=(0,i.useState)(!1),f=(0,u.t)({dropPastOrders:!0}),x=(0,i.useCallback)((e=>f?.data?.verticalSearchHomeResults[e]?.length||0),[f]),b=(0,i.useMemo)((()=>({verticalList:a.map((e=>e.verticalType)).join(","),type:"TAB",surface:e.surface,searchTermText:l,previousSelectedVertical:e.selectedVertical||c.g,selectedVertical:e.selectedVertical||c.g})),[a,e.selectedVertical,e.surface,l]),S=(0,i.useCallback)((i=>()=>{e.onSelect&&e.onSelect(i),r("eats:search_vertical_tab_tapped",{mvsMeta:{...b,selectedVertical:i,page:t.pathname}}),e.expandedState&&r("eats:global_search_zero_state_viewed",{numberOfSuggestions:x(i),mvsMeta:{verticalList:b.verticalList,selectedVertical:i}})}),[e,r,b,x,t.pathname]),$=s()((()=>{r("eats:search_vertical_tab_scrolled",{mvsMeta:b})}),1e3);return(0,i.useEffect)((()=>{f.data&&!p&&e.expandedState&&(v(!0),r("eats:global_search_zero_state_viewed",{numberOfSuggestions:x(b.selectedVertical),mvsMeta:{verticalList:b.verticalList,selectedVertical:b.selectedVertical}}))}),[f,r,x,b.verticalList,b.selectedVertical,p,e.expandedState]),(0,i.useEffect)((()=>{r("eats:search_vertical_tab_view",{mvsMeta:b})}),[]),a.length>1?(0,g.BX)(m,{$width:e.tableWidth,onScroll:$,children:[a.map(((t,r)=>(0,g.tZ)(Z,{onClick:S(t.verticalType),$isSelected:t.verticalType===(e.selectedVertical||c.g),children:t.title},r))),(0,g.tZ)(y,{})]}):null}},53685:(e,t,r)=>{r.d(t,{C:()=>i});const i=e=>{let t=0;for(const r of e)"store"!==r.type&&"searchHistory"!==r.type||t++;return t}},7819:(e,t,r)=>{r.d(t,{C:()=>a});var i=r(40841),n=r(47986),o=r(16372);function a(e,t,r){return e.actionUrl?t?{type:"anchor",href:(0,i.W)(e.actionUrl)}:{type:"anchor",href:e.actionUrl}:{type:"link",to:(0,n.gfM)(r,{storeSlug:e.slug,storeUuid:e.uuid,newQueryParams:{searchSource:o.xH.SEARCH_SUGGESTION}})}}},44133:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(36151),n=r(91631),o=r(94813),a=r(32711),s=r(70496),l=r(68093),d=r(47986),c=r(78284);const u=e=>{let{query:t,delay:r=500}=e;const u=(0,n.k6)(),h=(0,o.TH)(),p=(0,s.Z)(),g=(0,l.Z)(t,r),[m,Z]=(0,i.useState)(!1),[y,v]=(0,i.useState)({}),[f,x]=(0,i.useState)([]),{fetchLocations:b,handleLocationSelected:S,areLocationDetailsLoading:$}=(0,a.Z)({onLocationSelected:e=>{x([]),p(e),u.replace((0,d.DZj)({location:h,newQueryParams:{place:(0,c.aj)((0,c.VN)(e))}}))}}),C=(0,i.useRef)(b);C.current=b;const _=(0,i.useRef)(y);return _.current=y,(0,i.useEffect)((()=>{if(g.length>3){const e=_.current[g];e?x(e):(Z(!0),C.current(g).then((e=>{v((t=>({...t,[g]:e}))),x(e)})).finally((()=>{Z(!1)})))}else 0===g.length&&x([])}),[g]),{searchResults:y,locationSuggestions:f,handleLocationSelected:S,isLoading:m,hasLoaded:!m&&_.current[g]&&g.length>3,areLocationDetailsLoading:$}}},32762:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(60849),n=r(41063),o=r(43832),a=r(54669),s=r(34626);const l=()=>{const e=(0,i.ip)({...n.v.store_ofd_redesign,defaultValue:!1}),t=(0,i.ip)({...n.v.store_ofd_redesign_phase_2,defaultValue:!1}),r=(0,i.ip)({...n.v.store_ofd_redesign_phase_3,defaultValue:!1}),l=(0,i.ip)({...n.v.store_rating_redesign,defaultValue:!1}),d=(0,i.ip)({...n.v.store_ofd_redesign_search_results,defaultValue:!1}),{isGrStore:c,store:u}=(0,o.QT)(),{user:h}=(0,s.Z)(),p=h.data?.isLoggedIn,g=(0,a.Z)(),m=Boolean(!c&&t&&!g&&!p),Z=Boolean(!c&&r&&!p),y=Boolean(!c&&r&&p),v=m||Z,f=m||Z||y,x=f,b=f,S=m||Z,$=m||Z,C=l&&f,_=m||Z,w=y,z=Boolean(u?.data)&&d&&(m||Z||y),k=m||Z||y,I=y,L=m||Z||y,T=y,B=y,E=!c&&"NEW_VERTICALS"===u?.data?.headerBrandingInfo?.headerType&&x,P=Boolean((u?.data?.featuredReviews?.length||0)>=2&&u?.data?.rating),R=Boolean(u?.data?.nuggets?.length||0);return{isStoreOfdRedesignXpEnabled:e,isStoreOfdRedesignPhase2XpEnabled:t,isStoreOfdRedesignPhase3XpEnabled:r,isStoreRatingRedesignEnabled:l,isStoreOfdRedesignSearchResultsEnabled:d,desktopFeatures:{hasStickyHorizontalMenuNav:_,hasStickyVerticalMenuNav:w,hasStoreInfoSection:v,hasNewHeader:x,hasNewPageWrapper:f,hasDisclaimerAtBottom:b,hasNewBreadcrumbs:S,hasNewFaqSection:$,hasNewReviewsLayout:C,hasNewInStoreSearch:z,overwriteHorizontalGridColumns:k,moveTopExploreMoreStoresToCatalog:I,horizontalGridColumns:m||Z?5:4,hasNewLoader:L,isLegacyHeaderWithBrandingInfo:E,storeInfoConfig:{infoCardOrientation:P||R?"portrait":"landscape",showBrandingInfoAndControls:Boolean(!P&&g&&!E),showDescription:Boolean(u?.data?.seoMeta?.content&&!u?.data?.optoutRestaurantExperiments?.optoutMenuExperiments?.optoutAllExperiments),showReviews:P},hasDeliveryRowControls:T,hasStoreBannersInCatalogColumn:B}}}},87891:(e,t,r)=>{r.d(t,{t:()=>a});var i=r(74622),n=r(2237),o=r(62459);function a(e,t){const r=(0,o.Z)("getSearchHomeV2"),a=(0,n.H)("getSearchHomeV2",e);return(0,i.useQuery)({queryKey:a,queryFn:e=>{let{queryKey:t}=e;return r.request("getSearchHomeV2",t[1])},...t?.queryObserverOptions})}},24187:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(36151);function n(){const[e,t]=(0,i.useState)(null),r=(0,i.useCallback)((r=>{if(r){const i=r.getBoundingClientRect();e&&e?.height===i.height&&e?.width===i.width||t(i)}}),[e]);return[e,r]}},68093:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(36151);function n(e,t){const[r,n]=(0,i.useState)(e);return(0,i.useEffect)((()=>{const r=setTimeout((()=>{n(e)}),t);return()=>{clearTimeout(r)}}),[t,e]),r}},4525:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(43193),n=r(91631),o=r(94813),a=r(47986),s=r(33535),l=r(54669),d=r(70496),c=r(34626);const u={location:"eats:enter_delivery_address_start",time:"",search:"eats:search_start",user:"eats:user_menu_open",diningMode:"eats:dining_mode_menu_open"};function h(){const[e,t]=i.useState(null),r=(0,o.TH)(),h=(0,n.k6)(),p=(0,s.ZP)(),g=(0,l.Z)(),m=(0,d.Z)(),{user:Z}=(0,c.Z)(),y=()=>t(null);return{activeMenu:e,openMenu:e=>{const r=e&&u[e];r&&p(r),t(e)},closeMenu:y,closeAndUpdate:(e,t,i)=>{if(y(),m(e,t),!e||i)return;if(e.address.title!==g?.address.title)return h.push((0,a.dat)(r,{deliveryLocation:e}));const n=(0,a.RAN)(r,["place","startTime"]);(n.place||n.startTime)&&h.push((0,a.m0g)(r,e,t||{asap:!0}))},user:Z}}},68568:(e,t,r)=>{r.d(t,{Z:()=>c});var i=r(36151),n=r(14016),o=r(32711),a=r(41497),s=r(20568),l=r(34626),d=r(4865);const c=e=>{const t=(0,n.T)(),{fetchLocations:r,handleLocationSelected:c,areLocationDetailsLoading:u,placeholder:h}=(0,o.Z)({onLocationSelected:e.onLocationSelected}),{user:p}=(0,l.Z)(),g=(0,s.Z)("getDeliveryLocationsV2"),m=i.useCallback((async()=>{const e=await g({locationTypes:["SUGGESTED"]});return(0,d.BU)(e?.deliveryLocations?.SUGGESTED||[])}),[g]),Z=t=>t.isTaggedLocation?(e.onLocationSelected(t.address),Promise.resolve()):c(t),y=(e,t)=>{const r=t?.[0];r&&Z(r)},v=i.useCallback((e=>{let{results:r,query:i}=e;return 0===r.length?i?t("components.DeliveryLocationSearch.noResults"):"":i?t("components.MarketplaceSearch.resultsDescription",{numResults:r.length,searchTerm:i}):t("shared.searchResultsCount",{resultsCount:r.length})}),[]),{query:f,results:x,getLabelProps:b,getInputProps:S,getMenuProps:$,getItemProps:C,reset:_,highlightedIndex:w,isOpen:z,openMenu:k}=(0,a.Z)({id:`location-typeahead-${e.id}`,initialQuery:e.initialQuery,fetchResults:e=>p.data?.isLoggedIn&&0===e.length?m():r(e),onResultSelected:Z,getQueryFromResult:e=>e?e.isTaggedLocation?e.address.address.address1:e?.addressLine1||"":"",initialIsClosed:e.initialIsClosed,onEnterKeyWithNoSelectedResult:y,getA11yStatusMessage:v});return{query:f,locations:x,getLabelProps:b,getInputProps:S,getMenuProps:$,getItemProps:C,reset:_,highlightedIndex:w,placeholder:h,isLoading:u||x.isLoading,showTryAgainMessage:Boolean(f&&x.hasLoaded&&x.data&&0===x.data.length),isOpen:z,openMenu:k,onSubmitWithNoSelectedResult:y}}},32711:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(36151),n=r(14016),o=r(20568),a=r(71076),s=r(55758),l=r(55546),d=r(33535),c=r(94813),u=r(97130);const h=e=>{let{onLocationSelected:t,overrideDiningMode:r,onLocationSelectedV2:h}=e;const{isAddressPickerRevampEnabled:p}=(0,u.X)(),[g,m]=(0,i.useState)(!1),Z=(0,n.T)(),y=(0,s.d)(),v=r??y;let f;const x=(0,d.ZP)(),b=(0,c.TH)().pathname;f=v===l.k5.DINE_IN?Z("shared.enterDineInAddress"):v===l.k5.PICKUP?Z("shared.enterPickupAddress"):v===l.k5.DELIVERY_API?Z("shared.enterFullDeliveryAddress"):Z("shared.enterDeliveryAddress");const S=(0,o.Z)("getLocationAutocompleteV1"),$=(0,o.Z)("getDeliveryLocationV1"),C=(0,o.Z)("getDeliveryLocationV2");return{fetchLocations:e=>e?S({query:e}):Promise.resolve([]),handleLocationSelected:(0,i.useCallback)((e=>(m(!0),h&&p?C({placeId:e.id,provider:e.provider,source:"manual_auto_complete"}).then((e=>{let{deliveryLocation:t}=e;t&&(m(!1),x("eats:location_manager_typeahead_result_click",{originType:"user_autocomplete",page:b,userState:t?.deliveryConfig?.analytics?.user_state}),h(t))})).catch((e=>{e instanceof a.F||m(!1)})):$({placeId:e.id,provider:e.provider,source:"manual_auto_complete"}).then((e=>{m(!1),x("eats:location_manager_typeahead_result_click",{originType:e.originType,page:b,userState:e.userState}),t?.(e)})).catch((e=>{e instanceof a.F||m(!1)})))),[x,$,C,p,t,h,b]),areLocationDetailsLoading:g,placeholder:f}}},86977:(e,t,r)=>{r.d(t,{$:()=>n,E:()=>o});var i=r(49201);const n={FLAT_EARNED:"flat.earned",FLAT_UNEARNED:"flat.unearned",PERCENT_EARNED:"percent.earned",PERCENT_UNEARNED:"percent.unearned",FREE_DELIVERY_EARNED:"free_delivery.earned",FREE_DELIVERY_UNEARNED:"free_delivery.unearned",DISCOUNT_DELIVERY_EARNED:"discount_delivery.earned",DISCOUNT_DELIVERY_UNEARNED:"discount_delivery.unearned"};function o(e,t,r,n){const o=e.discountInfo;if(!o||null===o.promoType||null===e.minBasketSizeConstraintInDecimal)return null;const a=e.minBasketSizeConstraintInDecimal||0,s=o.valueInCents||0,l=o.maxValueInCents||0,d=o.promoType,c=(0,i.xG)(n,t,s),u=a-r,h=(0,i.xG)(n,t,u);return u>0?function(e,t,r,n,o){switch(n){case"FLAT":return{key:"FLAT_UNEARNED",data:{x:t,y:r}};case"PERCENT":return{key:"PERCENT_UNEARNED",data:{x:t,y:(0,i.rl)(o,e/100)}};case"FREE_DELIVERY":return{key:"FREE_DELIVERY_UNEARNED",data:{x:t,y:r}};case"DISCOUNT_DELIVERY":return{key:"DISCOUNT_DELIVERY_UNEARNED",data:{x:t,y:r}};default:return null}}(s,h,c,d,n):function(e,t,r,n,o,a,s){switch(n){case"FLAT":return{key:"FLAT_EARNED",data:{x:t}};case"PERCENT":{const t=o*e/100;if(t>=r)return{key:"FLAT_EARNED",data:{x:(0,i.xG)(a,s,r)}};const n=t/o;return{key:"PERCENT_EARNED",data:{x:(0,i.rl)(a,n||0)}}}case"FREE_DELIVERY":return{key:"FREE_DELIVERY_EARNED",data:{x:t}};case"DISCOUNT_DELIVERY":return{key:"DISCOUNT_DELIVERY_EARNED",data:{x:t}};default:return null}}(s,c,l,d,r,n,t)}},47091:(e,t,r)=>{r.d(t,{k:()=>i});const i="@media all and (-ms-high-contrast: none), (-ms-high-contrast: active)"}}]);