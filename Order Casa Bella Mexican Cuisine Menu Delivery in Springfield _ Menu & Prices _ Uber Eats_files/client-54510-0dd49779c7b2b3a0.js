"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[54510],{80542:(e,t,i)=>{i.d(t,{WR:()=>r,kf:()=>E});Object.freeze({COURIER_RATING:"COURIER_RATING",COURIER_TIP:"COURIER_TIP",STORE_RATING:"STORE_RATING",ITEMS_RATING:"ITEMS_RATING",UNKNOWN:"UNKNOWN",COURIER_RATING_TIP:"COURIER_RATING_TIP",COURIER_TIP_V2:"COURIER_TIP_V2",COURIER_TIP_V2_EMBEDDED_TIP:"COURIER_TIP_V2_EMBEDDED_TIP",STORE_CUSTOM_TAGS:"STORE_CUSTOM_TAGS",STORE_PREDEFINED_TAGS:"STORE_PREDEFINED_TAGS",STORE_SUPERFAN_EDUCATION:"STORE_SUPERFAN_EDUCATION",STORE_SUPERFAN_COLLECTION:"STORE_SUPERFAN_COLLECTION"}),Object.freeze({UNKNOWN:"UNKNOWN",EVENT:"EVENT",CONVERSATION:"CONVERSATION"}),Object.freeze({OUT_OF_ITEM:"OUT_OF_ITEM",OUT_OF_OPTION:"OUT_OF_OPTION",CANNOT_FULFILL_ITEM_INSTRUCTION:"CANNOT_FULFILL_ITEM_INSTRUCTION",CANNOT_FULFILL_RESTAURANT_INSTRUCTION:"CANNOT_FULFILL_RESTAURANT_INSTRUCTION",UNKNOWN:"UNKNOWN",PARTIAL_ITEM_AVAILABILITY:"PARTIAL_ITEM_AVAILABILITY"}),Object.freeze({UNKNOWN:"UNKNOWN",BOTTOMSHEET:"BOTTOMSHEET",TOAST:"TOAST",SLOW_TOAST:"SLOW_TOAST",GENERIC_NOTIFICATION:"GENERIC_NOTIFICATION",FULL_SCREEN:"FULL_SCREEN"}),Object.freeze({UNKNOWN:"UNKNOWN",APT_OR_SUITE:"APT_OR_SUITE",BUILDING:"BUILDING",PLACEHOLDER_2:"PLACEHOLDER_2",PLACEHOLDER_3:"PLACEHOLDER_3",PLACEHOLDER_4:"PLACEHOLDER_4"}),Object.freeze({UNKNOWN:"UNKNOWN",UGC:"UGC",UBER:"UBER",GOOGLE:"GOOGLE"}),Object.freeze({UNKNOWN:"UNKNOWN",ACCESS_POINT:"ACCESS_POINT",DEVICE_POINT:"DEVICE_POINT"}),Object.freeze({UNKNOWN:"UNKNOWN",LEAVE_AT_DOOR:"LEAVE_AT_DOOR"}),Object.freeze({UNKNOWN:"UNKNOWN",PRIMARY_RESTAURANT:"PRIMARY_RESTAURANT",ADD_ON_RESTAURANT:"ADD_ON_RESTAURANT",RESERVED_3:"RESERVED_3"}),Object.freeze({UNKNOWN:"UNKNOWN",STAR:"STAR",THUMBS_UP:"THUMBS_UP",CUSTOM:"CUSTOM",CANCELLATION:"CANCELLATION",ACCEPTANCE:"ACCEPTANCE"}),Object.freeze({UNKNOWN:"UNKNOWN",SATISFACTION_RATE:"SATISFACTION_RATE",BACKGROUND_CHECK:"BACKGROUND_CHECK"}),Object.freeze({UNKNOWN:"UNKNOWN",ANIMATION:"ANIMATION",STATIC_IMAGE:"STATIC_IMAGE",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6"}),Object.freeze({UNKNOWN:"UNKNOWN",ORDER_DELIVERED:"ORDER_DELIVERED"}),Object.freeze({DEFAULT:"DEFAULT",VENUE:"VENUE"}),Object.freeze({POPULAR:"POPULAR",PFY:"PFY",TRENDING:"TRENDING",EATER_ENDORSED:"EATER_ENDORSED",SIMILAR_DISH:"SIMILAR_DISH",RECOMMENDED:"RECOMMENDED"}),Object.freeze({SHOPPING_BAG:"SHOPPING_BAG",BADGE:"BADGE"}),Object.freeze({OK:"OK",NO_ORDER:"NO_ORDER",NO_MATCHING_ORDER:"NO_MATCHING_ORDER",NO_ACTIVE_RATABLE_ORDER:"NO_ACTIVE_RATABLE_ORDER",NO_COMPLETED_RATABLE_ORDER:"NO_COMPLETED_RATABLE_ORDER",NOT_IN_RATABLE_TIME_WINDOW:"NOT_IN_RATABLE_TIME_WINDOW",ALREADY_RATED:"ALREADY_RATED",RATING_DISMISSED:"RATING_DISMISSED",NO_RATABLE_SUBJECT:"NO_RATABLE_SUBJECT",NOT_ELIGIBLE_FOR_SUPERFAN:"NOT_ELIGIBLE_FOR_SUPERFAN",NO_STORE:"NO_STORE",STORE_NOT_RATABLE:"STORE_NOT_RATABLE",NO_STORE_UUID:"NO_STORE_UUID",SUPPRESSED:"SUPPRESSED",REPLACED_WITH_BILLBOARD_CARD:"REPLACED_WITH_BILLBOARD_CARD",ERROR_GET_DURATION_SINCE_COMPLETION_IN_MINUTES:"ERROR_GET_DURATION_SINCE_COMPLETION_IN_MINUTES"}),Object.freeze({UNKNOWN:"UNKNOWN",EATS_CONFIG_TYPE:"EATS_CONFIG_TYPE",GROCERY_CONFIG_TYPE:"GROCERY_CONFIG_TYPE"}),Object.freeze({UNKNOWN:"UNKNOWN",GREEN:"GREEN",LUCKY_CHARMS:"LUCKY_CHARMS",GXGY_INVITER:"GXGY_INVITER",GXGY_INVITEE:"GXGY_INVITEE",EXGY:"EXGY",RESTAURANT_REWARD_REFERRALS:"RESTAURANT_REWARD_REFERRALS",UNUSED_TYPE7:"UNUSED_TYPE7",UNUSED_TYPE8:"UNUSED_TYPE8",UNUSED_TYPE9:"UNUSED_TYPE9",UNUSED_TYPE10:"UNUSED_TYPE10",UNUSED_TYPE11:"UNUSED_TYPE11",UNUSED_TYPE12:"UNUSED_TYPE12",UNUSED_TYPE13:"UNUSED_TYPE13",UNUSED_TYPE14:"UNUSED_TYPE14",UNUSED_TYPE15:"UNUSED_TYPE15",UNUSED_TYPE16:"UNUSED_TYPE16"}),Object.freeze({UNKNOWN:"UNKNOWN",AUTO_APPLY:"AUTO_APPLY",MANUAL_APPLY:"MANUAL_APPLY",GXGY:"GXGY",GXGY_INVITEE:"GXGY_INVITEE",EXGY:"EXGY"});const E=Object.freeze({ITEM:"ITEM",CANONICALPRODUCT:"CANONICALPRODUCT",CROSS_SELL:"CROSS_SELL"}),r=(Object.freeze({DEFAULT:"DEFAULT",CLICK_THROUGH:"CLICK_THROUGH",CHECKBOX:"CHECKBOX"}),Object.freeze({UNKNOWN:"UNKNOWN",SUPERFANS:"SUPERFANS",EATER_GENERATED_TAGS:"EATER_GENERATED_TAGS"}),Object.freeze({FALSE_MISLEADING_INFORMATION:"FALSE_MISLEADING_INFORMATION",STORE_AFFILIATE:"STORE_AFFILIATE",STORE_COMPETITOR:"STORE_COMPETITOR",THREAT_HATE_SPEECH:"THREAT_HATE_SPEECH",INAPPROPRIATE_OFFENSIVE:"INAPPROPRIATE_OFFENSIVE",OTHER:"OTHER"}));Object.freeze({UNKNOWN:"UNKNOWN",SKIPPED:"SKIPPED",SUBMITTED:"SUBMITTED"})},93259:(e,t,i)=>{i.d(t,{Z:()=>_});var E=i(72843),r=i(94813),o=i(47986),a=i(69425);const n=18,d=Array(9).fill("1").join(""),u=e=>{const t=(e.match(/.{1,2}/g)??[]).map((e=>Number(e).toString(16)));t.splice(8,0,"-"),t.splice(13,0,"-"),t.splice(18,0,"-"),t.splice(23,0,"-");const i=t.join("");return(e=>(0,a.Z)(e))(i)?i:null},s=e=>{const t={storeUuid:void 0,lat:void 0,lng:void 0};if(!(e=>"string"==typeof e&&82===e.length&&/^\d+$/.test(e))(e))return t;const i=e.slice(0,n),E=e.slice(n,82),r=u(E),[o,a]=(e=>{const[t,i]=e.match(new RegExp(".{1,9}","g"))??[void 0,void 0];if(t===d||i===d)return[null,null];const[E,r]=[t,i].map((e=>{if(e)return("1"===e[0]?1:-1)*(Number(e.slice(1))/1e5)}));return(e=>e>=-90&&e<=90)(E)&&(e=>e>=-180&&e<=180)(r)?[E,r]:[void 0,void 0]})(i);return"string"==typeof r&&void 0!==o&&void 0!==a?{storeUuid:r,lat:o,lng:a}:t};var N=i(42301),O=i(87444),T=i(91496);const _=()=>{const e=(0,O.Z)("canonical_pdp_google_ads"),t=(0,r.TH)(),i=(0,T.Z)();if(!e)return{isGoogleAd:!1,lat:void 0,lng:void 0,storeUuid:void 0};const a=E.parse(t.search),n=(0,N.u)(a[o.FSm.googleAdRegionId]),d=i.get(n),{lat:u,lng:_,storeUuid:I}=s(n);return!d&&n&&void 0!==I&&void 0!==u&&void 0!==_?{isGoogleAd:!0,lat:u,lng:_,storeUuid:I}:{isGoogleAd:!1,lat:void 0,lng:void 0,storeUuid:void 0}}},54510:(e,t,i)=>{i.d(t,{Z:()=>z});var E=i(36151),r=i(91631),o=i(14016),a=i(47986),n=i(64388),d=i(31755),u=i(53890),s=i(53176),N=i(70496),O=i(67476),T=i(88671),_=i(68094),I=i(60362),R=i(15649),c=i(34274),l=i(28222),A=i(49723),U=i(58984),S=i(6703),C=i(62155);const D=[i(67526).fn.STORES_WITH_PRODUCT],P=e=>{let{canonicalProduct:t,storeItem:i,isDeliveryLocationSet:E}=e;if(!(t.hasLoaded&&i.hasLoaded&&t.data&&i.data))return t;const r=(e=>{let{canonicalProduct:t,storeItem:i}=e;return[...(i.productDetailsItems||[]).filter((e=>!D.includes(e.type))),...(t?.productDetailsItems||[]).filter((e=>D.includes(e.type)))]})({canonicalProduct:t.data,storeItem:i.data}),o={...i.data,title:t.data?.title,itemDescription:t.data.itemDescription,imageUrl:t.data.imageUrl,images:t.data.images,nutritionalInfo:t.data.nutritionalInfo,brandName:t.data.brandName,productIdentifiers:t.data.productIdentifiers,productDetailsItems:r,seoMeta:t.data.seoMeta};return{...t,data:o}},L=e=>{let{canonicalProduct:t,storeUuid:i,isDeliveryLocationSet:E,isGoogleAd:r}=e;if(!t.hasLoaded||!t.data)return t;const o=(0,C.vu)(t?.data?.productDetailsItems),a=(E||r?null:((e,t)=>(e?.storesWithProduct||[]).reduce(((e,i)=>{let{minPrice:E,storeWithProduct:r}=e;const o=t[i?.itemUuid||""]?.price||null;return"number"!=typeof E||"number"!=typeof o||o<E?{minPrice:o,storeWithProduct:i}:{minPrice:E,storeWithProduct:r}}),{minPrice:null,storeWithProduct:null}).storeWithProduct?.storeUuid||null)(o,t.data?.storeItemsMap||{}))||i||o?.defaultSelectedStoreUuid;if(!a)return t;const n=o?.storesWithProduct?.find((e=>{let{storeUuid:t}=e;return t===a})),d=n?.itemUuid||"",u={...t,data:t.data?.storeItemsMap?.[d]||null};return P({canonicalProduct:t,storeItem:u,isDeliveryLocationSet:E})};var m=i(54669),p=i(83960),G=i(93259),g=i(87444),y=i(94813),M=i(22208),f=i(80542),F=i(84272),b=i(60849),K=i(57440),B=i(74622),W=i(2237),v=i(62459),Y=i(81436);var V=i(47857),H=i(98976);const h=e=>{let{itemUuid:t,storeUuid:i,isCanonicalItemFlow:E,canonicalItemDefaultStoreUuid:r,diningMode:o,primaryBundledStoreUuid:a,isQueryEnabled:n,itemRequestType:d,sectionUuid:u,subsectionUuid:s,hasGoogleAdLatLng:N,googleAdLat:O,googleAdLng:T}=e;const _=(0,g.Z)("canonical_pdp_use_get_canonical_product_item_rpc")&&E,I=(0,H.hn)((0,V.A)({itemRequestType:d,storeUuid:E?r:i,sectionUuid:E?"":u,subsectionUuid:E?"":s,menuItemUuid:t,diningMode:o,cbType:"EATER_ENDORSED",...a?{primaryBundledStoreUuid:a}:{},...N&&O&&T?{googleAdLocation:{lat:O,lng:T}}:{}},{preparedId:"mobile-menu-item",queryObserverOptions:{enabled:n&&!_}})),R=(0,H.hn)(function(e,t){const i=(0,v.Z)("getCanonicalProductItemV1"),E=(0,B.useQueryClient)(),r=(0,W.H)("getCanonicalProductItemV1",e),o=(0,B.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return i.request("getCanonicalProductItemV1",t[1])},...t?.queryObserverOptions}),a=Boolean(t.queryObserverOptions?.enabled??!0);return(0,Y.Z)((()=>!o.isFetched&&a?E.prefetchQuery({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return i.request("getCanonicalProductItemV1",t[1])}}):null),[o,i,r,E,a],t.preparedId,(0,B.hashQueryKey)(r)),o}({storeUuid:E?r:i,menuItemUuid:t,diningMode:o,cbType:"EATER_ENDORSED",...a?{primaryBundledStoreUuid:a}:{},...N&&O&&T?{googleAdLocation:{lat:O,lng:T}}:{}},{preparedId:"canonical-product-item",queryObserverOptions:{enabled:n&&_}}));return _?R:I},z=function(){let{shouldNavigateBackToStoreOnItemAdd:e=!0,canonicalItemStoreUuid:t,productUuid:i,itemParams:C,editItemParams:D,preparedId:P}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const B=Boolean(t||i),W=(0,r.UO)(),v=(0,y.TH)(),Y=(0,m.Z)(),{previousContext:V}=v.state||{},[H,z]=(0,E.useState)(!1),[j,Z]=(0,E.useState)(""),[q,Q]=(0,E.useState)(null),{primaryBundledStoreUuid:k}=(0,F.Z)();let X,w,x,J,$;if(C)X=C.storeUuid,w=C.itemUuid,x=C.sectionUuid,J=C.subsectionUuid,$=C.primaryBundledStoreUuid;else{const e=(0,a.x9r)(W);X=e.storeUuid,w=e.itemUuid,x=e.sectionUuid,J=e.subsectionUuid,$=k}const ee=t??X,te=i||w,ie=(0,b.ip)({...K.X.product_details_page_ssr,defaultValue:!1}),Ee=!Y&&ie&&P,re=Boolean(te&&(B||ee&&x&&J)),{store:oe}=(0,n.ZP)(ee,{...Ee?{preparedId:P}:{}}),{partialMenuItem:ae}=(0,d.Z)(oe,ee,x,J,te),ne=(0,T.k)(),de=(0,U.I0)(),ue=(t,i,E,r)=>{ne(Boolean(t),i,E,oe,e,B,void 0,r),de((0,S.AA)(te))},{isGoogleAd:se,storeUuid:Ne,lat:Oe,lng:Te}=(0,G.Z)(),_e=(0,g.Z)("canonical_pdp_google_ads"),Ie=_e&&se&&null!==Oe&&null!==Te,Re=_e&&Ne||"",ce=B?f.kf.CANONICALPRODUCT:V===M.x9.PDP_CROSS_SELL?f.kf.CROSS_SELL:f.kf.ITEM,{diningMode:le}=(0,p.Z)(ee),Ae=h({itemUuid:te,storeUuid:ee,isCanonicalItemFlow:B,canonicalItemDefaultStoreUuid:Re,diningMode:le,primaryBundledStoreUuid:$,isQueryEnabled:re,itemRequestType:ce,sectionUuid:x,subsectionUuid:J,hasGoogleAdLatLng:Ie,googleAdLat:Oe,googleAdLng:Te}),Ue=Boolean(Y&&"geolocation_api"!==Y?.originType),Se=(0,E.useMemo)((()=>B?L({canonicalProduct:Ae,storeUuid:ee,isDeliveryLocationSet:Ue,isGoogleAd:se}):Ae),[Ae,ee,Ue,B,se]),{outOfItemAction:Ce,updateOutOfItemAction:De,backupProduct:Pe,updateBackupProduct:Le,specialInstructions:me}=(0,A.Z)(),{quantity:pe,updateQuantity:Ge,decimalQuantity:ge,specialInstructions:ye,updateSpecialInstructions:Me,updateCustomizations:fe,selectedCustomizations:Fe,itemsUpsell:be,updateUpsellItemQuantity:Ke,hasErrors:Be,isOnSale:We,totalPrice:ve,discountedPrice:Ye,firstIncompleteGroup:Ve,spendingLimitError:He,canEditGroupOrderCart:he}=(0,u.ZP)({store:oe,menuItem:Se,selectedSavedCustomizationIndex:q,setSelectedSavedCustomizationIndex:Q,isEditQuantityFlow:D?.isEditQuantityFlow,...D?.isEditQuantityFlow&&Se.data?.hasCustomizations?null:D});(0,E.useEffect)((()=>{Ce&&"string"==typeof me&&me!==ye&&Me(me)}),[Ce,ye,me,Me]);const ze=(0,E.useCallback)((e=>{Me(e)}),[Me]),{addToCart:je,didAddItem:Ze}=(0,s.Z)({store:oe,menuItem:Se,selectedCustomizations:Fe,quantity:pe,specialInstructions:ye,outOfItemAction:Ce,onAddedToCart:ue,decimalQuantity:ge,backupProduct:Pe,productUuid:B?i:null}),qe=(0,N.Z)(),{isDraftOrderParticipantForStore:Qe}=(0,O.Z)(oe.data?.uuid||""),ke=(0,o.T)(),Xe=(0,R.Z)(),we=(0,_.Z)(),xe=we,Je=xe.scheduled?ke("shared.notAvailable.dateAndTimeRange",{date:(0,I.p6)(Xe,xe.date),startTime:(0,I.CJ)(Xe,xe.startTime),endTime:(0,I.CJ)(Xe,xe.endTime)}):oe.data?.closedMessage,$e=(0,l.Z)(),et=(0,c.Z)({storeUuid:oe.data?.uuid}),tt=Boolean(oe.data?.uuid&&!We&&!$e&&!et);return{isDraftOrderParticipantForStore:Qe,store:oe,menuItem:Se,didAddItem:Ze,partialMenuItem:ae,quantity:pe,decimalQuantity:ge,updateQuantity:Ge,specialInstructions:ye,updateSpecialInstructions:ze,updateCustomizations:fe,selectedCustomizations:Fe,itemsUpsell:be,hasErrors:Be,isOnSale:We,totalPrice:ve,discountedPrice:Ye,addToCart:je,firstIncompleteGroup:Ve,spendingLimitError:He,canEditGroupOrderCart:he,isDeliveryLocationSet:Ue,setDeliveryLocation:e=>{e&&!H&&(qe(e),z(!0))},incompleteSubmissionState:j||"",setIncompleteSubmissionState:e=>{Z(e)},outOfItemAction:Ce,updateUpsellItemQuantity:Ke,updateOutOfItemAction:De,showClosedRestaurantUX:tt,storeUnavailableMessage:Je||"",backupProduct:Pe,updateBackupProduct:Le,selectedSavedCustomizationIndex:q,setSelectedSavedCustomizationIndex:Q}}},66134:(e,t,i)=>{i.d(t,{Z:()=>a});var E=i(36151),r=i(70247),o=i(64388);const a=e=>{const{serverCart:t}=(0,r.iQ)(),{store:i}=(0,o.ZP)(e??t.data?.storeUuid);return(0,E.useMemo)((()=>i.data?.catalogSectionsMap?(e=>{const t=Object.values(e.data?.catalogSectionsMap||{}).reduce(((e,t)=>[...e,...t]),[]).map((e=>e.payload?e.payload[e.payload.type]?.catalogItems:[])).filter(Boolean).reduce(((e,t)=>[...e,...t]),[]);return Object.fromEntries(t.map((e=>[e.uuid,e])))})(i):(e=>Object.values(e.data?.sectionEntitiesMap||{}).reduce(((e,t)=>({...e,...t})),{}))(i)),[i])}},31755:(e,t,i)=>{i.d(t,{Z:()=>a});var E=i(36151),r=i(66134),o=i(40964);const a=(e,t,i,a,n)=>{const d=(0,r.Z)(t);return{partialMenuItem:(0,E.useMemo)((()=>{if(n&&d){const t=d[n];return t?{title:t.title||"",description:t.itemDescription||"",imageUrl:t.imageUrl||"",endorsement:null,isGrocery:!!e.data&&(0,o.A)(e.data)}:null}if(n&&e&&i){const t=e.data?.sectionEntitiesMap[i];if(!t)return null;const E=t[n];return E?{title:E.title||"",description:E.itemDescription||"",imageUrl:E.imageUrl||"",endorsement:E.endorsement,classifications:E.classifications,isGrocery:!!e.data&&(0,o.A)(e.data)}:null}return null}),[d,n,i,e])}}},47857:(e,t,i)=>{i.d(t,{A:()=>n});var E=i(74622),r=i(2237),o=i(62459),a=i(81436);function n(e,t){const i=(0,o.Z)("getMenuItemV1"),n=(0,E.useQueryClient)(),d=(0,r.H)("getMenuItemV1",e),u=(0,E.useQuery)({queryKey:d,queryFn:e=>{let{queryKey:t}=e;return i.request("getMenuItemV1",t[1])},...t?.queryObserverOptions}),s=Boolean(t.queryObserverOptions?.enabled??!0);return(0,a.Z)((()=>!u.isFetched&&s?n.prefetchQuery({queryKey:d,queryFn:e=>{let{queryKey:t}=e;return i.request("getMenuItemV1",t[1])}}):null),[u,i,d,n,s],t.preparedId,(0,E.hashQueryKey)(d)),u}}}]);