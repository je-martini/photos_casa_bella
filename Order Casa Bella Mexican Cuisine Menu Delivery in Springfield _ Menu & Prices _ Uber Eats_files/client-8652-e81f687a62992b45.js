"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[8652],{74748:(e,t,r)=>{r.d(t,{XH:()=>i,bE:()=>n,cz:()=>o});const i=Object.freeze({UNKNOWN:"UNKNOWN",ACK_ON_COMPLETION:"ACK_ON_COMPLETION"}),o=Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL_EXCEEDED_PER_ORDER_LIMIT:"ALCOHOL_EXCEEDED_PER_ORDER_LIMIT",MISSING_REQUIRED_FOOD_WITH_ALCOHOL:"MISSING_REQUIRED_FOOD_WITH_ALCOHOL",MAX_FARE_LIMIT_EXCEEDED:"MAX_FARE_LIMIT_EXCEEDED",ALCOHOL_WITH_CASH:"ALCOHOL_WITH_CASH",PICKUP_WITH_CASH:"PICKUP_WITH_CASH",PRODUCT_NOT_FOUND_AT_ORDER:"PRODUCT_NOT_FOUND_AT_ORDER",CART_ITEM_INVALID_UUID:"CART_ITEM_INVALID_UUID",CART_ITEM_SUSPENDED:"CART_ITEM_SUSPENDED",ALCOHOL_WITH_LEAVE_AT_DOOR:"ALCOHOL_WITH_LEAVE_AT_DOOR",CASH_WITH_LEAVE_AT_DOOR_MANDATORY:"CASH_WITH_LEAVE_AT_DOOR_MANDATORY",CASH_WITH_LEAVE_AT_DOOR_OPTIONAL:"CASH_WITH_LEAVE_AT_DOOR_OPTIONAL",BYOC_WITH_LEAVE_AT_DOOR:"BYOC_WITH_LEAVE_AT_DOOR",FORCE_LEAVE_AT_DOOR:"FORCE_LEAVE_AT_DOOR",STORE_UNAVAILABLE:"STORE_UNAVAILABLE",FULFILLMENT_ISSUE_NOT_RESOLVED:"FULFILLMENT_ISSUE_NOT_RESOLVED",NO_SUCH_STORE:"NO_SUCH_STORE",ITEMS_FROM_TOO_MANY_STORES:"ITEMS_FROM_TOO_MANY_STORES",INVALID_DELIVERY_TIME_RANGE:"INVALID_DELIVERY_TIME_RANGE",INVALID_DISPATCH_RADIUS:"INVALID_DISPATCH_RADIUS",INVALID_PAYMENT_PROFILE:"INVALID_PAYMENT_PROFILE",UNSUPPORTED_PAYMENT_PROFILE:"UNSUPPORTED_PAYMENT_PROFILE",STORE_CLOSED_CHECKOUT:"STORE_CLOSED_CHECKOUT",DINING_MODE_NOT_AVAILABLE:"DINING_MODE_NOT_AVAILABLE",SCHEDULE_ORDER_UNAVAILABLE:"SCHEDULE_ORDER_UNAVAILABLE",BACKGROUND_CHECK_FAILED:"BACKGROUND_CHECK_FAILED",UNAVAILABLE_ITEMS:"UNAVAILABLE_ITEMS",ITEMS_WITH_UNAVAILABLE_CUSTOMIZATIONS:"ITEMS_WITH_UNAVAILABLE_CUSTOMIZATIONS",MISCONFIGURED_ITEMS:"MISCONFIGURED_ITEMS",RADIUS_REDUCED_BY_SURGE:"RADIUS_REDUCED_BY_SURGE",GEOBOUND_BLOCKED:"GEOBOUND_BLOCKED",SCHEDULED_ORDER_NOT_EDITABLE:"SCHEDULED_ORDER_NOT_EDITABLE",INVALID_BASKET:"INVALID_BASKET",PIN_ORDER_WITH_LEAVE_AT_DOOR:"PIN_ORDER_WITH_LEAVE_AT_DOOR",NO_PAYMENT_METHOD:"NO_PAYMENT_METHOD",MARKETPLACE_HOURS_BLOCKED:"MARKETPLACE_HOURS_BLOCKED",STORE_UNAVAILABLE_BUT_SCHEDULABLE:"STORE_UNAVAILABLE_BUT_SCHEDULABLE",ALCOHOL_ORDER_BEYOND_SALES_HOURS:"ALCOHOL_ORDER_BEYOND_SALES_HOURS",INVALID_LEAVE_AT_DOOR_DELIVERY:"INVALID_LEAVE_AT_DOOR_DELIVERY",SCHEDULED_TIME_IN_THE_PAST:"SCHEDULED_TIME_IN_THE_PAST",ITEM_LIMITS_EXCEEDED:"ITEM_LIMITS_EXCEEDED",SURGE_MINIMUM_BASKET_NOT_MET:"SURGE_MINIMUM_BASKET_NOT_MET",NUDGE_TO_SCHEDULE:"NUDGE_TO_SCHEDULE",CART_LIMIT_EXCEEDED:"CART_LIMIT_EXCEEDED",CLOSING_TOO_SOON_TO_DELIVER:"CLOSING_TOO_SOON_TO_DELIVER",FARE_THRESHOLD_EXCEEDED:"FARE_THRESHOLD_EXCEEDED",LOCATION_INPUT_REQUIRED:"LOCATION_INPUT_REQUIRED",BUNDLE_NOT_DELIVERABLE:"BUNDLE_NOT_DELIVERABLE",LOCATION_CONFIRMATION_REQUIRED:"LOCATION_CONFIRMATION_REQUIRED",MEMBERSHIP_EXCLUSIVE_SHOPPING_REQUIRED:"MEMBERSHIP_EXCLUSIVE_SHOPPING_REQUIRED",HEALTH_CARE_CARD_INELIGIBLE_ITEMS:"HEALTH_CARE_CARD_INELIGIBLE_ITEMS",HEALTH_CARE_CARD_STORE_NOT_SUPPORTED:"HEALTH_CARE_CARD_STORE_NOT_SUPPORTED",INVALID_GIFT_ORDER:"INVALID_GIFT_ORDER",TAX_PROFILE_REQUIRED:"TAX_PROFILE_REQUIRED",CANNOT_REMOVE_ALL_ITEMS:"CANNOT_REMOVE_ALL_ITEMS",LIVE_ORDER_EDIT_UNSUCCESSFUL:"LIVE_ORDER_EDIT_UNSUCCESSFUL",LIVE_ORDER_EDIT_AFTER_SHOPPING_COMPLETE:"LIVE_ORDER_EDIT_AFTER_SHOPPING_COMPLETE",PAYMENT_RISK_FAILURE:"PAYMENT_RISK_FAILURE",BUNDLING_NO_PRIMARY_CART_ERROR:"BUNDLING_NO_PRIMARY_CART_ERROR",BANDWAGON_INVALID_COUNTDOWN_TOKEN:"BANDWAGON_INVALID_COUNTDOWN_TOKEN",LIVE_ORDER_LATE_EDIT_WARNING:"LIVE_ORDER_LATE_EDIT_WARNING",LIVE_ORDER_LATE_EDIT_UNSUCCESSFUL_WARNING:"LIVE_ORDER_LATE_EDIT_UNSUCCESSFUL_WARNING",PHONE_NUMBER_REQUIRED:"PHONE_NUMBER_REQUIRED",RESTRICTED_ITEM_UNDERAGE_USER:"RESTRICTED_ITEM_UNDERAGE_USER",UNIFIED_CHECKOUT_ACTION:"UNIFIED_CHECKOUT_ACTION"}),n=(Object.freeze({UNKNOWN:"UNKNOWN",DIALOG:"DIALOG",FULL_PAGE:"FULL_PAGE"}),Object.freeze({NONE:"NONE",RECUSTOMIZE:"RECUSTOMIZE",REMOVE_ITEMS:"REMOVE_ITEMS",CLEAR_CART:"CLEAR_CART",RETRY_ESTIMATE:"RETRY_ESTIMATE",SWITCH_PAYMENT:"SWITCH_PAYMENT",ADD_PAYMENT:"ADD_PAYMENT",SWITCH_TO_DOOR_TO_DOOR:"SWITCH_TO_DOOR_TO_DOOR",SWITCH_TO_LEAVE_AT_DOOR:"SWITCH_TO_LEAVE_AT_DOOR",OPEN_DEEPLINK:"OPEN_DEEPLINK",OPEN_WEBVIEW:"OPEN_WEBVIEW",REDIRECT_TO_FEED:"REDIRECT_TO_FEED",GET_ORDER_SUMMARY:"GET_ORDER_SUMMARY",SWITCH_DINING_MODE:"SWITCH_DINING_MODE",CLEAR_CART_AND_REDIRECT_TO_FEED:"CLEAR_CART_AND_REDIRECT_TO_FEED",CLEAR_CART_AND_REDIRECT_TO_ORDERS_TAB:"CLEAR_CART_AND_REDIRECT_TO_ORDERS_TAB",CONTINUE_WITHOUT_VOUCHER:"CONTINUE_WITHOUT_VOUCHER",REMOVE_INVALID_PARTICIPANTS:"REMOVE_INVALID_PARTICIPANTS",GO_BACK:"GO_BACK",REDIRECT_TO_FEED_AND_UPDATE_FEED_ADDRESS:"REDIRECT_TO_FEED_AND_UPDATE_FEED_ADDRESS",SELECT_DIFFERENT_DELIVERY_ADDRESS:"SELECT_DIFFERENT_DELIVERY_ADDRESS",REVIEW_ITEMS:"REVIEW_ITEMS",SWITCH_TO_PICKUP:"SWITCH_TO_PICKUP",SCHEDULE_ORDER:"SCHEDULE_ORDER",GO_TO_STORE:"GO_TO_STORE",NOTIFY_WHEN_AVAILABLE:"NOTIFY_WHEN_AVAILABLE",SELECT_REPLACEMENT:"SELECT_REPLACEMENT",DEBUNDLE_AND_NAVIGATE:"DEBUNDLE_AND_NAVIGATE",SWITCH_DELIVERY_TYPE:"SWITCH_DELIVERY_TYPE",REFRESH_PRESENTATION_DATA:"REFRESH_PRESENTATION_DATA",DISCARD_EXISTING_AND_CREATE_NEW_BUNDLE:"DISCARD_EXISTING_AND_CREATE_NEW_BUNDLE",RETRY_CREATE_DRAFT_ORDER:"RETRY_CREATE_DRAFT_ORDER",CLEAR_GIFT_INFO:"CLEAR_GIFT_INFO",SELECT_TAX_PROFILE:"SELECT_TAX_PROFILE",INPUT_PHONE_NUMBER:"INPUT_PHONE_NUMBER",CANCEL_GIFT_ORDER:"CANCEL_GIFT_ORDER"}));Object.freeze({CHECKOUT_ORDER_ERROR:"CHECKOUT_ORDER_ERROR"}),Object.freeze({DEFAULT:"DEFAULT",ALCOHOL:"ALCOHOL"}),Object.freeze({DEFAULT:"DEFAULT",CVV_VERIFY:"CVV_VERIFY",BAV_VERIFY:"BAV_VERIFY",CARDIO:"CARDIO"}),Object.freeze({ORDER_ALERT_ERROR:"ORDER_ALERT_ERROR"})},5137:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(91931),o=r(33497),n=r(57444);const l=(0,i.zo)("button",(e=>({...(0,o.Z)({$theme:e.$theme,radius:e.radius}),textAlign:"center",color:e.$theme.colors.negative,...e.disabled?(0,n.Z)(e.$theme):{}})))},54240:(e,t,r)=>{r.d(t,{Z:()=>I});var i=r(91931),o=r(62091),n=r(71110),l=r(33990);const a=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",position:"relative",height:"auto",maxWidth:t.sizing.scale4800,cursor:"pointer"}})),s=(0,i.zo)("h2",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.primary600}})),d=(0,i.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall}})),_=(0,i.zo)(o.Z,{objectFit:"contain"}),c=(0,i.zo)("div",{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.02)"}),u=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{position:"relative",borderRadius:t.borders.radius400,overflow:"hidden"}})),E=(0,n.pZ)(r(19702)),I=e=>{let{item:t,onProductSelect:r}=e;const[,o]=(0,i.hQ)(),n=t.imageURL||E;return(0,l.tZ)(l.HY,{children:(0,l.BX)(a,{onClick:r,children:[(0,l.BX)(u,{children:[(0,l.tZ)(_,{src:n,loading:"lazy",height:"148px",width:o.sizing.scale4800}),(0,l.tZ)(c,{})]}),(0,l.tZ)(d,{children:t.formattedPrice}),(0,l.tZ)(s,{children:t.title})]})})}},61552:(e,t,r)=>{r.d(t,{Z:()=>C});var i=r(43193),o=r(91931),n=r(40606),l=r(93801),a=r(92292),s=r(52298),d=r(47162),_=r(38349),c=r(22717),u=r(25598),E=r(30110),I=r(1636),m=r(54240),O=r(33990);const T=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",maxWidth:"676px",minWidth:"676px",boxSizing:"border-box",padding:`0 ${t.sizing.scale600} ${t.sizing.scale600}`,gap:`${t.sizing.scale600} ${t.sizing.scale800}`}})),D=(0,o.zo)("div",{width:"100%",display:"flex",justifyContent:"center"}),h=(0,o.zo)("div",{width:"100%"}),p=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{padding:`0 ${t.sizing.scale600}`,marginBottom:t.sizing.scale800}})),C=e=>{let{orderUUID:t,storeUUID:r,sourceItemUUID:o,handleProductSelection:C,sourceItemSectionUUID:R}=e;const[A,g]=i.useState(""),U=(0,u.o)({sourceItemSectionUUID:R,userQuery:A,sourceItemUUID:o,storeUUIDs:[r],orderUUID:t},{queryObserverOptions:{enabled:Boolean(A)}}),Z=(0,d.v)({storeUUID:r,itemUUID:o,orderUUID:t}),S=()=>{const{isLoading:e,hasResults:t,isError:r,refetch:i}=U;return A?r?(0,O.tZ)(E.Z,{refetch:i}):e?(0,O.BX)(O.HY,{children:[(0,O.tZ)(a.Z,{}),(0,O.tZ)(s.ZP,{$height:16})]}):t?(0,O.tZ)(h,{children:U?.catalogSections?.map((e=>(0,O.tZ)(_.Z,{items:e.items,title:e.title,onProductSelect:C},e?.title?.text)))}):(0,O.tZ)(I.Z,{userQuery:A}):null};return(0,O.BX)(O.HY,{children:[(0,O.tZ)(p,{children:(0,O.tZ)(c.Z,{setUserQuery:g})}),(0,O.tZ)(D,{children:(0,O.tZ)(T,{children:A?(0,O.tZ)(h,{children:(0,O.tZ)(S,{})}):(0,O.tZ)(n.a,{source:Z,loaded:e=>(0,O.tZ)(O.HY,{children:e?.itemSubstitutes?.map((e=>(0,O.tZ)(m.Z,{item:e,onProductSelect:()=>C(e)},e.itemUUID)))}),error:e=>(0,O.tZ)(l.nQ,{code:parseInt(e?.code||"500")}),loading:()=>(0,O.BX)(O.HY,{children:[(0,O.tZ)(a.Z,{}),(0,O.tZ)(s.ZP,{$height:16})]})})})})]})}},60147:(e,t,r)=>{r.d(t,{ZP:()=>u});var i=r("__fusion__1019"),o=r(38237),n=r(28397),l=r(20631),a=r(91931),s=r(8639);var d=r(33990);const _=(0,a.zo)("div",(e=>{let{$height:t,$width:r}=e;return{position:"relative",width:r||0,height:t||0}})),c=(0,a.zo)("div",(e=>{let{$theme:t,$backgroundColor:r,$color:i,$top:o,$bottom:n,$left:l,$right:a}=e;return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:o,right:a,left:l,bottom:n,width:t.sizing.scale700,borderRadius:t.borders.radiusFull,height:t.sizing.scale700,...r?{backgroundColor:t.colors[r]}:{},...i?{color:t.colors[i]}:{}}})),u=e=>{let{width:t,height:r,children:u,badge:E,position:I}=e;const[,m]=(0,a.hQ)();return(0,d.BX)(_,{$width:t,$height:r,children:[u,(()=>{if("icon"!==E?.content?.type)return;const e=E?.content?.icon,{backgroundColor:t,color:r}=(e=>{let t="contentOnColor",r=null;return"standard"===e?.type?r=(0,s.Lq)(e?.standard):"custom"===e?.type&&(t=(0,s.Lq)(e?.custom?.contentColor),r="JOY_PRIMARY"===e?.custom?.backgroundColor?(0,s.Lq)("WARNING"):(0,s.Lq)(e?.custom?.backgroundColor)),{color:t,backgroundColor:r}})(E?.color),a=(e=>{const t={$bottom:"auto",$top:"auto",$left:"auto",$right:"auto"};switch(e){case"BOTTOM_LEFT":return{...t,$bottom:"0",$left:"0"};case"BOTTOM_RIGHT":return{...t,$bottom:"0",$right:"0"};case"TOP_LEFT":return{...t,$top:"0",$left:"0"};case"TOP_RIGHT":return{...t,$top:"0",$right:"0"};default:return{...t}}})(I);switch(e){case"CHECKMARK":return(0,d.tZ)(c,{$color:r,$backgroundColor:t,...a,"data-test":"badge-icon",children:(0,d.tZ)(o.Z,{height:m.sizing.scale500,width:m.sizing.scale500,children:(0,d.tZ)(l.Z,{})})});case"ARROW_CIRCULAR":return(0,d.tZ)(c,{$color:r,$backgroundColor:t,...a,"data-test":"badge-icon",children:(0,d.tZ)(o.Z,{height:m.sizing.scale500,width:m.sizing.scale500,children:(0,d.tZ)(n.Z,{})})});case"X":return(0,d.tZ)(c,{$color:r,$backgroundColor:t,...a,"data-test":"badge-icon",children:(0,d.tZ)(o.Z,{height:m.sizing.scale500,width:m.sizing.scale500,children:(0,d.tZ)(i.default,{size:"24"})})});default:return null}})()]})}},20248:(e,t,r)=>{r.d(t,{Z:()=>te});var i=r(43193),o=r(75161),n=r(56899),l=r(91086),a=r(33259),s=r(70589),d=r(91931),_=r(31913),c=r(47073),u=r(46933),E=r(62091),I=r(86695),m=r(68065),O=r(61552),T=r(20461),D=r(4909),h=r(9066),p=r(59210),C=r(57376),R=r(14352),A=r(65434),g=r(81517),U=r(2228),Z=r(33990);const S=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}})),f=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600,margin:t.sizing.scale600}})),N=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),L=(0,d.zo)("div",{width:"100%",height:h.j,display:"flex",justifyContent:"center",alignItems:"center"}),v=(0,d.zo)("img",{width:"100%",height:"100%",objectFit:"contain",flexShrink:0}),b=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundTertiary,height:t.sizing.scale300}})),y=(0,d.zo)("div",{display:"flex",alignItems:"center",justifyContent:"space-between"}),P=e=>{let{originalItem:t,substituteItem:r,onClose:d,handleConfirm:_,store:c}=e;const E=t?.expanded?.auxiliarySections,{imageUrl:I,title:m,priceTagline:O,formattedPrice:T,description:h,imageURL:P}=r,{defaultQuantity:M,price:B}=(0,g._)(r),[H,k]=i.useState(M),z=B*H,F=(0,U.Z)(r);return(0,Z.BX)(o.u_,{size:n.NO.default,children:[(0,Z.tZ)(l.xB,{floatingMode:l.rY.floating,leftButton:(0,Z.tZ)(a.hQ,{onClick:d})}),(0,Z.BX)(S,{children:[r?(0,Z.BX)(f,{children:[I||P?(0,Z.tZ)(L,{children:(0,Z.tZ)(v,{src:I||P||""})}):null,(0,Z.BX)(N,{children:[m?(0,Z.tZ)(p.Ih,{children:m}):null,O?.text||T?(0,Z.tZ)(p.fH,{as:"span",children:O?.text||T}):null]}),(0,Z.BX)(y,{children:[(0,Z.tZ)(C.Z,{item:r,quantity:H,updateQuantity:k}),c?.currencyCode?(0,Z.tZ)(R.Z,{priceEstimate:z,currencyCode:c.currencyCode,isPricedByWeight:F}):null]})]}):null,(0,Z.tZ)(b,{}),(0,Z.tZ)(A.Z,{auxiliarySections:E}),(0,Z.tZ)(b,{}),h?(0,Z.BX)(f,{children:[(0,Z.tZ)(p.fH,{as:"span",children:(0,Z.tZ)(u.v,{id:"shared.description"})}),(0,Z.tZ)(p.aM,{children:h})]}):null]}),(0,Z.tZ)(s.m,{children:(0,Z.tZ)(D.V,{onClick:()=>_(H),"data-testid":"confirmReplacement",children:(0,Z.tZ)(u.v,{id:"activeOrder.summaryDetails.confirmReplacement"})})})]})},M=i.memo(P);var B=r(44606),H=r(64388);const k=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale300} ${t.sizing.scale800}`}})),z=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",marginRight:t.sizing.scale300}})),F=(0,d.zo)(E.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600}})),V=e=>{let{orderUUID:t,storeUuid:r,originalItemAction:s,onClose:d,item:c,handleSubstitutionPicking:E,open:D,handleRefund:h}=e;const[p,C]=i.useState(null),R=s?.requestModifications||null,A=R?.originalItemId?.itemID?.catalogItemUUID||"",g=R?.originalItemId?.sourceItemSectionUuid,U=R?.originalItemHeader?.itemThumbnail?.imageUrl?.dayImageUrl,S=R?.originalItemHeader,{store:f}=(0,H.ZP)(r),N=e=>{const t=B.Tf.from(e).toE5().toCoefficientDecimal();p&&E(p,t)};return D&&s&&c?p?(0,Z.tZ)(M,{originalItem:c,substituteItem:p,onClose:()=>C(null),handleConfirm:N,store:f.data}):(0,Z.BX)(o.u_,{size:n.NO.auto,isOpen:!0,onClose:d,children:[(0,Z.tZ)(l.xB,{leftButton:(0,Z.tZ)(a.hQ,{onClick:d}),title:(0,Z.tZ)(u.v,{id:"activeOrder.summaryDetails.requestAlternate"}),isExpanded:!0,rightButton:(0,Z.tZ)(I.zx,{kind:I.TO.secondary,size:m.NO.compact,shape:m.X3.pill,onClick:h,children:(0,Z.tZ)(u.v,{id:"activeOrder.summaryDetails.refund"})})}),(0,Z.tZ)(k,{children:(0,Z.tZ)(_.ZP,{text:S?.sectionHeaderText})}),(0,Z.BX)(T.O6,{children:[(0,Z.BX)(T.eh,{children:[U?(0,Z.tZ)(F,{src:U}):null,(0,Z.BX)(z,{children:[(0,Z.tZ)(_.ZP,{text:S?.itemTitleText}),(0,Z.tZ)(_.ZP,{text:S?.itemSubtitleText})]})]}),(0,Z.tZ)(_.ZP,{text:S?.itemPriceText})]}),r&&g?(0,Z.tZ)(O.Z,{orderUUID:t,handleProductSelection:C,sourceItemSectionUUID:g,sourceItemUUID:A,storeUUID:r}):null]}):null};var x=r(34217),w=r(14016),$=r(33535);const G=(0,d.zo)("div",{display:"flex",flexDirection:"column"}),Y=e=>{let{onClose:t,onSubmit:r,workflowUuid:d}=e;const _=(0,w.T)(),c=(0,$.ZP)(),E=()=>{c("eats:replacements_refund_bottom_sheet_dismissed",{workflowUuid:d}),t()};return i.useEffect((()=>{c("eats:replacements_refund_bottom_sheet_impression",{workflowUuid:d})}),[c,d]),(0,Z.BX)(o.u_,{size:n.NO.default,children:[(0,Z.tZ)(l.xB,{leftButton:(0,Z.tZ)(a.ay,{onClick:E}),title:_("activeOrder.summaryDetails.refundItemTitle"),isExpanded:!0}),(0,Z.tZ)(x.f,{children:(0,Z.tZ)(p.Yl,{children:(0,Z.tZ)(u.v,{id:"activeOrder.summaryDetails.refundItemDescription"})})}),(0,Z.tZ)(s.m,{children:(0,Z.BX)(G,{children:[(0,Z.tZ)(I.zx,{onClick:()=>{c("eats:replacements_refund_bottom_sheet_refund_tapped",{workflowUuid:d}),r()},"data-testid":"refund-button",overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundNegative}}}},children:(0,Z.tZ)(u.v,{id:"activeOrder.summaryDetails.refundItem"})}),(0,Z.tZ)(I.zx,{kind:I.TO.tertiary,onClick:E,children:(0,Z.tZ)(u.v,{id:"shared.goBack"})})]})})]})};var W=r(2367);const X=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{margin:`${t.sizing.scale600} 0`}})),K=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600,margin:t.sizing.scale600}})),Q=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale300}})),q=(0,d.zo)("div",{display:"flex"}),j=(0,d.zo)("div",{width:"100%",height:h.j,display:"flex",justifyContent:"center",alignItems:"center"}),J=(0,d.zo)("img",{width:"100%",height:"100%",objectFit:"contain",flexShrink:0}),ee=e=>{let{items:t,shoppingCartItemUuid:r,onClose:d,handleActionButtons:u,storeUuid:E}=e;const I=(0,$.ZP)(),m=t?.find((e=>e?.cursory?.descriptor?.itemId?.shoppingCartItemUuid===r)),O=m?.expanded?.descriptor?.displayableName?.text?.text??"",T=m?.expanded?.longWriteup?.text?.text??"",D=m?.expanded?.descriptor?.salientNotes||null,h=m?.expanded?.auxiliarySections||null,C=i.useMemo((()=>m?.expanded?.actionButtons||null),[m]),R=i.useMemo((()=>m?.cursory?.thumbnailImage?.imageUrl?.dayImageUrl||null),[m]),g=m?.cursory?.descriptor?.itemId?.cartId?.workflowId?.workflowUuid||"",U=m?.cursory?.descriptor?.itemId?.cartId?.cartUuid||"",S=m?.cursory?.descriptor?.itemId?.itemID?.catalogItemUUID||"",[f,N]=i.useState(!1),[L,v]=i.useState(null),[b,y]=i.useState(!1),[P,M]=i.useState(null),B=(e,t)=>{if(e||t)return"CART_ITEM_ACTION_TYPE_REQUEST_REFUND"!==e?.type||L?"CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&e?.requestModifications?(M(e),I("eats:replacements_item_details_more_options_tapped",{cartUuid:U,isSpecialItemRequest:(0,W.F)(t),itemUuid:S,storeUuid:E,workflowUuid:g}),N(!0),void v(null)):void u(e,t,!0):(v(e),I("eats:replacements_item_details_impression",{cartUuid:U,isSpecialItemRequest:(0,W.F)(t),itemUuid:S,storeUuid:E,workflowUuid:g}),void y(!0))},H=()=>{L&&m&&B(L,m),N(!1),y(!1)},k=()=>{v(null),y(!1)};if(i.useEffect((()=>{m&&I("eats:replacements_item_details_impression",{isSpecialItemRequest:(0,W.F)(m),workflowUuid:g})}),[I,m,g]),b)return(0,Z.tZ)(Y,{workflowUuid:g,onClose:k,onSubmit:H});const z=()=>{I("eats:replacements_item_details_close_tapped",{workflowUuid:g}),d()};return(0,Z.BX)(o.u_,{size:n.NO.default,onClose:z,"data-testid":"summary-details-desktop-item-expanded-modal",children:[(0,Z.tZ)(V,{open:f,orderUUID:g,item:m,storeUuid:E,onClose:()=>N(!1),originalItemAction:P,handleSubstitutionPicking:(e,t)=>{u(P,m,!0,e,t)},handleRefund:()=>{const e=C?.find((e=>"CART_ITEM_ACTION_TYPE_REQUEST_REFUND"===e?.action?.type));v(e?.action||null),y(!0)}}),(0,Z.tZ)(l.xB,{floatingMode:l.rY.floating,leftButton:(0,Z.tZ)(a.hQ,{onClick:z,"data-testid":"summary-details-desktop-item-expanded-close-button"})}),(0,Z.BX)(X,{children:[(0,Z.BX)(K,{children:[(0,Z.tZ)(j,{children:R?(0,Z.tZ)(J,{src:R}):null}),(0,Z.BX)(Q,{children:[O?(0,Z.tZ)(p.Ih,{as:"span",children:O}):null,D?.map(((e,t)=>(0,Z.tZ)(q,{children:(0,Z.tZ)(_.ZP,{text:e.text})},`price-${t}`))),T?(0,Z.tZ)(p.Yl,{as:"span",color:"contentSecondary",children:T}):null]})]}),(0,Z.tZ)(A.Z,{auxiliarySections:h})]}),(0,Z.tZ)(s.m,{children:(0,Z.tZ)(Q,{children:C?.map(((e,t)=>e?.button?(0,Z.tZ)("div",{children:(0,Z.tZ)(c.Z,{viewModel:e?.button,onClick:()=>B(e?.action,m)})},`button-${t}`):null))})})]})},te=i.memo(ee)},81549:(e,t,r)=>{r.d(t,{Z:()=>$});var i=r(36151),o=r(91631),n=r(52246),l=r(47986),a=r(91931),s=r(76150),d=r(46933),_=r(83960),c=r(22787),u=r(55186),E=r(34626),I=r(82532),m=r(72275),O=r(70247),T=r(24934),D=r(4864),h=r(37573),p=r(74622),C=r(2237),R=r(62459);var A=r(69694),g=r(72179),U=r(3015),Z=r(28222),S=r(14016),f=r(73472),N=r(34567),L=r(33535),v=r(94813),b=r(78989),y=r(65014),P=r(33990);const M=e=>{const t=(0,L.ZP)(),r=(0,L.XL)(),{checkoutType:i}=(0,g.Z)(),{startTiming:o}=(0,f.K3)(),a=(0,S.T)(),{restaurantLink:s,onGoToStore:c}=(0,m.Z)(),{serverCart:u}=(0,O.iQ)(),E=(0,D.ZP)(void 0,!u.data?.isOwner),{isDraftOrderCreator:I,hasGroupOrder:T,isBillSplitOrder:h,isEditOrder:p,mealPlanUUID:C}=(0,_.Z)(),{isOnPremiseDeliveryOrder:R}=(0,b.Z)(),A=(0,v.TH)(),U="eats:checkout_button",Z={checkoutType:i,isBillSplitOrder:h,isDraftOrderParticipant:!I,isGuestOrder:e.isGuestMode,isGroupOrder:T,isEditScheduledOrder:p,...C?{mealPlanUUID:C}:null};return 0===E?(0,P.tZ)(N.Z,{$as:n.rU,to:s,onClick:c,children:(0,P.tZ)(d.v,{id:"shared.addItems"})}):R?(0,P.tZ)(N.Z,{$as:n.rU,rel:"nofollow",to:e.authHref?{}:(0,l.vN_)(A,"premiseDeliveryInfo"),href:e.authHref,onClick:async t=>{e.disabled?t.preventDefault():e.onClick(t)},disabled:e.disabled,children:a("shared.go_to_checkout")}):(0,P.tZ)(N.Z,{$as:n.rU,rel:"nofollow",to:e.authHref?{}:e.checkoutUrl,href:e.authHref,"data-testid":"go-to-checkout-button",onClick:async i=>{e.disabled?i.preventDefault():(e.authHref?await r(U,Z):(o(y.B.CHECKOUT_LOAD_COMPLETE_EVENT_NAME),o(y.B.CHECKOUT_LOAD_COMPLETE_WITH_CMP_EVENT_NAME),o(y.B.CHECKOUT_PAGE_RENDER_EVENT_NAME),t(U,Z)),e.onClick(i))},disabled:e.disabled,children:a("shared.go_to_checkout")})};var B=r(26786),H=r(86695),k=r(1058),z=r(78365),F=r(23314);const V=(0,a.w1)(c.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}})),x=(0,a.w1)(B.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}}));function w(e,t,r){if("secondary_btn"!==e&&"tertiary_btn"!==e)return null;const i="secondary_btn"===e?V:x;return(0,P.tZ)(i,{$as:n.rU,to:t,disabled:r,children:(0,P.tZ)(d.v,{id:"checkout_as_guest"})})}const $=e=>{const t=(0,v.TH)(),r=(0,o.k6)(),{hideSidebarCart:a}=(0,s.Lb)(),{isDraftOrderCreator:c,isDraftOrderCartLocked:S,storeUuid:f,isDraftOrderParticipant:N,isBillSplitParticipant:L,currentUserGroupedItems:b}=(0,_.Z)(),{user:y}=(0,E.Z)(),B=(0,z.Z)(f),x=t=>{e.onNavigateToCheckout&&e.onNavigateToCheckout(t)},{isCartUnderMBS:$}=(0,I.f)(),{isCartDrafting:G}=(0,g.Z)(),{isEnabled:Y,treatment:W}=(0,k.Z)(),{guestCheckoutEnabled:X,emitGuestCheckoutEvent:K,guestCheckoutInGuestModeXP:Q}=(0,h.Z)(),{selectedInstruction:q}=(0,i.useContext)(T.X3),{data:j,isFetching:J,isLoading:ee}=function(e,t){const r=(0,R.Z)("getGuestCheckoutEligibilityV1"),i=(0,C.H)("getGuestCheckoutEligibilityV1",e);return(0,p.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getGuestCheckoutEligibilityV1",t[1])},...t?.queryObserverOptions})}({interactionType:q?.interactionType},{queryObserverOptions:{enabled:Boolean(X)}}),te=X&&(J||ee),re=j?.isEligible,ie=(0,U.Z)(),oe=(0,Z.Z)(),{isBundledOrder:ne}=(0,O.Dz)();(0,i.useEffect)((()=>{te||K(re)}),[K,te,re]);const le=e.$disabled||$||te,{restaurantLink:ae,onGoToStore:se}=(0,m.Z)({storeUuid:f}),{serverCart:de}=(0,O.iQ)(),_e=(0,D.ZP)(void 0,!de.data?.isOwner),{isGroupOrder:ce,isScheduledOrder:ue}=(0,A.Z)(f),Ee=Boolean(re&&X&&!ce&&!ue),Ie=ie&&oe,me=(0,F.Z)();return y.data?.isLoggedIn||Ie?L&&b?.confirmed||N&&!L?(0,P.tZ)(H.zx,{isFullWidth:!0,onClick:()=>{r.push(ae),se()},disabled:S,children:(0,P.tZ)(d.v,{id:"shared.addItems"})}):(0,P.BX)(P.HY,{children:[!N||L?(0,P.tZ)(M,{isGuestMode:Ee,disabled:le,onClick:async e=>{a(),x(e)},checkoutUrl:me}):null,c&&S?(0,P.tZ)(V,{$as:n.rU,to:(0,l.vN_)(t,"unlockGroupCart"),children:(0,P.tZ)(d.v,{id:"go.unlock_cart"})}):_e>0&&!ne&&(!G||ce)?(0,P.tZ)(V,{$as:n.rU,to:ae,onClick:e=>{if(Y&&"cart_animation"===W&&B)return e.preventDefault(),e.stopPropagation(),void a();se()},disabled:S,children:(0,P.tZ)(d.v,{id:"shared.addItems"})}):null]}):(0,P.BX)(P.HY,{children:[(0,P.tZ)(u.Z,{type:"login",redirectTo:(0,l.Zs0)(t),isGuestMode:Ee,children:e=>{let{href:t,onClick:r}=e;return(0,P.tZ)(M,{isGuestMode:Ee,disabled:le,onClick:async e=>{x(e),r(e)},authHref:t,checkoutUrl:me})}}),Ee?w(Q,me,le):null]})}},8398:(e,t,r)=>{r.d(t,{Z:()=>Qe});var i=r(43193),o=r(46933),n=r(60849),l=r(91931),a=r(51090),s=r(27871),d=r(40606),_=r(40017),c=r(15298),u=r(4864),E=r(70247),I=r(33990);const m=()=>{const{serverCart:e}=(0,E.iQ)(),t=(0,s.B0)("fareBreakdown"),r=(0,u.ZP)(void 0,!e.data?.isOwner),[,i]=(0,l.hQ)();return r?(0,I.tZ)(d.Z,{source:t,loaded:e=>{const t=e.charges?.find((e=>"Promotion"===e.title?.text));return t?(0,I.tZ)(c.jH,{charges:[t]}):null},error:()=>null,loading:()=>(0,I.tZ)(_.sM,{$width:i.sizing.scale1000})}):null};var O=r(47667),T=r(14016),D=r(31913);const h=e=>{let{subtotal:t,isLoading:r}=e;const i=(0,O.Z)(),{serverCart:o}=(0,E.iQ)(),n=(0,u.ZP)(void 0,!o.data?.isOwner),l=(0,T.T)();return r?(0,I.tZ)(_.sM,{$width:"40px"}):n&&t?i&&t.formattedSubtotalAmount?(0,I.tZ)("span",{"aria-label":l("shared.subtotal"),children:(0,I.tZ)(D.ZP,{text:t.formattedSubtotalAmount})}):(0,I.tZ)("span",{"aria-label":l("shared.subtotal"),children:t.subtotal?.formattedValue}):null};var p=r(73103),C=r(62091),R=r("__fusion__685"),A=r(64388),g=r(83960),U=r(72179),Z=r(52246),S=r(72275),f=r(15840),N=r(34267),L=r(74622),v=r(2237),b=r(62459);var y=r(34626),P=r(1257),M=r(15649),B=r(49201),H=r(32755),k=r(70940),z=r(86990);const F=e=>{const{serverCart:t,isBundledOrder:r}=(0,E.Dz)(),{uuid:i="",cityId:o=0,eatsPassExclusionBadge:n,location:l}=e||{},{hasActiveUberOne:a}=(0,y.Z)(),d=(0,P.Z)((0,s.B0)("subtotal")),_=(0,s.B0)("cartItems"),c=(0,P.Z)(_),u=Number(d?.subtotal?.value?.amountE5)||0,I=(0,M.Z)(),m=!(0,k.Z)(i),O=(0,T.T)(),D=(0,H.ZP)(),{isBillSplitOrder:h,isDraftOrderParticipant:p}=(0,g.Z)(),C=Object.values(c?.itemCharges||{}).some((e=>e.discountedAmount&&e?.originalAmount!==e?.discountedAmount)),R=Boolean(m&&(!D||"UNAVAILABLE_ITEMS"!==D?.type)&&u>0&&a&&n&&!C&&(!p||h)&&!r),A=function(e,t){const r=(0,b.Z)("getUberOneMbsV1"),i=(0,v.H)("getUberOneMbsV1",e);return(0,L.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getUberOneMbsV1",t[1])},...t?.queryObserverOptions})}({storeCityId:o,storeCountryCode:l?.country.toLowerCase()||"us"},{queryObserverOptions:{enabled:Boolean(R&&o)}})?.data,U=A&&u<A?(A-u)/A*100:0,Z=A?(A-u)/1e3:0,S=(0,z.Z)({storeId:i,originalCurrencyCode:t.data?.currencyCode||"USD"});return{isTreated:Boolean(R&&A),belowMBSPercent:U,belowMBSMessage:A&&U>0?O("shared.cart.uberone.mbs.pending",{amount:(0,B.xG)(I,S,Z)}):""}};var V=r(47885),x=r(33157),w=r(52949),$=r(5639),G=r(1795),Y=r(33535);const W=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{height:"100%",width:"100%",background:t.colors.backgroundPrimary}})),X=(0,w.V)({chunkId:"store-desktop-catalog-section",load:()=>Object.defineProperties(Promise.all([r.e(53099),r.e(7978),r.e(38778),r.e(7565),r.e(22275),r.e(31566),r.e(6319),r.e(84500)]).then(r.bind(r,"__fusion__491")),{__CHUNK_IDS:{value:[22275,31566,38778,53099,6319,7565,7978,84500]},__MODULE_ID:{value:"__fusion__491"},__I18N_KEYS:{value:["bandwagon.one_minute_left","bandwagon.x_minutes_left","billboard.heading","billboard.subheading","billboard.verticalFeeds.grocery.header","billboard.verticalFeeds.grocery.subHeader","billboard.verticalFeeds.header","billboard.verticalFeeds.subHeader","carousel.see_all","carousel.view_all","catalog_item.quick_view","components.BadgeSoldOut.message","eaterMessage.storefront.headline.v2","euDisclaimer.Body","euDisclaimer.HeaderTitle","euDisclaimer.clickHereText","euDisclaimer.dismissText","favorite_add","favorite_added","favorite_remove","favorite_removed","item.fulfillment_state.found","item.fulfillment_state.in_review","item.fulfillment_state.refunded","item.fulfillment_state.replaced","live_order.item.found","live_order.item.in_review","live_order.item.refunded","live_order.item.replaced","online_ordering.logo.alt_text","postmates.components.heading","postmates.components.subhead","quick_add","see_all_stores","shared.enterDeliveryAddress","shared.next","shared.previous","shared.search","store.bundle_store.pill_tooltip_cancel_group_order","store.bundle_store.pill_tooltip_group_order","store.bundle_store.pill_tooltip_schedule_order","store.bundle_store.pill_tooltip_switch_delivery_time","store.bundle_store.pill_tooltip_switch_to_delivery","view_more_options"]}}),LoadingComponent:G.Z,ErrorComponent:W}),K=(0,w.V)({chunkId:"store-mobile-catalog-section",load:()=>Object.defineProperties(Promise.all([r.e(53099),r.e(90348),r.e(38778),r.e(66014),r.e(7565),r.e(22275),r.e(25014),r.e(60317),r.e(60613),r.e(68018),r.e(51410)]).then(r.bind(r,"__fusion__492")),{__CHUNK_IDS:{value:[22275,25014,38778,51410,53099,60317,60613,66014,68018,7565,90348]},__MODULE_ID:{value:"__fusion__492"},__I18N_KEYS:{value:["bandwagon.one_minute_left","bandwagon.x_minutes_left","carousel.see_all","carousel.view_all","components.BadgeSoldOut.message","euDisclaimer.Body","euDisclaimer.HeaderTitle","euDisclaimer.clickHereText","euDisclaimer.dismissText","favorite_add","favorite_added","favorite_remove","favorite_removed","item.fulfillment_state.found","item.fulfillment_state.in_review","item.fulfillment_state.refunded","item.fulfillment_state.replaced","live_order.item.found","live_order.item.in_review","live_order.item.refunded","live_order.item.replaced","online_ordering.logo.alt_text","quick_add","see_all_stores","shared.apply","shared.enterDeliveryAddress","shared.next","shared.previous","shared.reset","shared.search","store.bundle_store.pill_tooltip_cancel_group_order","store.bundle_store.pill_tooltip_group_order","store.bundle_store.pill_tooltip_schedule_order","store.bundle_store.pill_tooltip_switch_delivery_time","store.bundle_store.pill_tooltip_switch_to_delivery","view_more_options"]}}),LoadingComponent:G.Z,ErrorComponent:W});function Q(e){return e?3:1}function q(e,t){return e?t?96:120:112}const j=e=>{let{store:t,upsellCatalogSectionsPayload:r,isGrocery:o,primaryBundledStoreUUID:n,primaryDraftOrderUUID:l,surface:a}=e;const s=(0,Y.ZP)(),{isMobile:d}=(0,$.hU)(),_=r.catalogSections||[],c=i.useCallback((e=>{s("eats:store_upsell_catalog_section_impression",{storeUuid:e.storeUuid,source:e.source,catalogItems:e.items})}),[s]),u=i.useCallback((e=>{s("eats:store_upsell_catalog_section_scrolled",{storeUuid:e.storeUuid,source:e.source,catalogItems:e.items})}),[s]),E={surface:a,columnsPerRow:Q(o),imageDimensions:{height:q(o,d),aspectRatio:1},isSharedDesign:!0,hideQuickAdd:!1,hasLazyloadOverflowContainer:!0,analyticsConfig:{onCatalogSectionImpression:c,onCarouselScroll:u}};return(0,I.tZ)("div",{children:d?(0,I.tZ)(K,{store:t,catalogSections:_,isGrocery:o,primaryBundledStoreUuid:n,primaryDraftOrderUUID:l,catalogConfig:E}):(0,I.tZ)(X,{store:t,catalogSections:_,isGrocery:o,primaryBundledStoreUuid:n,primaryDraftOrderUUID:l,catalogConfig:E})})};var J=r(84272),ee=r(41063),te=r(94988),re=r(61304),ie=r(89400),oe=r(87444);const ne=function(e,t){t=t??[];const r=(0,oe.Z)("alcohol_scheduling_mixed_cart"),{isBundledOrder:i,isGroupOrder:o,isEditOrder:n}=(0,E.Dz)(),l=t.length>0&&t.every((e=>t=>t.draftOrderUUID===e)(e));return Boolean(r&&!i&&!o&&!n&&l)};var le=r(91793),ae=r(73472),se=r(65014),de=r(33023),_e=r(96306),ce=r(44997),ue=r(79532),Ee=r(2367),Ie=r(6264),me=r(20248),Oe=r(13672),Te=r(22023),De=r(11362),he=r(64986);const pe=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{padding:`0 ${t.sizing.scale600}`}})),Ce=e=>{let{section:t}=e;const{isMobile:r}=(0,$.hU)(),o=(0,he.Z)(),n=(0,Y.ZP)(),[l,a]=i.useState(null),{isLiveOrder:s,liveOrderUuid:d}=(0,ce.W)(),{liveOrderStoreUuid:_}=(0,Oe.l)(),c=(0,Ie.W)({getCartFrom:"workflowId",workflowId:d}),u="SYNCING"===c.status,E="AVAILABLE"===c.status?c?.actions:null;if(!s||!t)return null;const m=t?.metadata?.header?.title,O={text:m,type:"text"},T=t?.items;if(!T||0===T?.length)return null;const h=(e,t,r,i,l)=>{const s=t?.cursory?.descriptor?.itemId?.cartId?.workflowId?.workflowUuid||"",d=t?.cursory?.descriptor?.itemId?.cartId?.cartUuid||"",c=t?.cursory?.descriptor?.itemId?.itemID?.catalogItemUUID||"",u=t?.cursory?.descriptor?.itemId?.shoppingCartItemUuid||"",I={cartUuid:d,isSpecialItemRequest:(0,Ee.F)(t),itemUuid:c,storeUuid:_,workflowUuid:s,shoppingCartItemUuid:u};let m;if("CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&!e?.requestModifications)return a(u??null),void n("eats:replacements_order_summary_more_options_tapped",I);if(e&&t){let t=null;if(e?.approveModifications?(t=e?.approveModifications?.proposalIDToApprove,n(r?"eats:replacements_item_details_approve_tapped":"eats:replacements_order_summary_approve_tapped",I),m="ITEM_FULFILLMENT_EVENT_TYPE_APPROVED_ITEM_MODIFICATIONS_PROPOSAL",n("eats:replacements_cart_item_fulfillment",{...I,itemFulfillmentEventType:m})):e?.requestRefund&&(t=e?.requestRefund?.proposalIDToReject,m="ITEM_FULFILLMENT_EVENT_TYPE_TERMINATED_ITEM_MODIFICATIONS_NEGOTIATION",n("eats:replacements_cart_item_fulfillment",{...I,itemFulfillmentEventType:m})),!u&&!e?.type)return;"CART_ITEM_ACTION_TYPE_REQUEST_MODIFICATIONS"===e?.type&&i&&l&&_?E?.processItemFeedback({item:{shoppingCartItemUuid:u,proposalUuid:t?.proposalUUID||"",type:e.type,substituteItem:i,quantity:l,storeUuid:_}}).catch((()=>{o()})):"CART_ITEM_ACTION_TYPE_APPROVE_MODIFICATIONS"!==e?.type&&"CART_ITEM_ACTION_TYPE_REQUEST_REFUND"!==e?.type||E?.processItemFeedback({item:{shoppingCartItemUuid:u,proposalUuid:t?.proposalUUID||"",type:e.type}}).catch((()=>{o()})),a(null)}};return(0,I.BX)("section",{children:[(0,I.BX)(pe,{children:[(0,I.tZ)(D.Dy,{element:O}),T?.map(((e,r)=>(0,I.tZ)("div",{children:(0,I.tZ)(_e.Z,{isLoading:u,item:e,sharedData:t?.sharedData,handleActionButtons:h,setSelectedShoppingCartItemUuid:a})},r))),l&&T?r?(0,I.tZ)(ue.Z,{items:T,shoppingCartItemUuid:l,onClose:()=>a(null),handleActionButtons:h,storeUuid:_}):(0,I.tZ)(me.Z,{items:T,shoppingCartItemUuid:l,onClose:()=>a(null),handleActionButtons:h,storeUuid:_}):null]}),(0,I.tZ)(Te.I,{$size:De.N.module})]})},Re=i.memo(Ce),Ae=(0,l.zo)("div",{display:"flex",flexDirection:"column"}),ge=e=>{let{cartPageHeader:t}=e;const{isLiveOrder:r}=(0,ce.W)();if(!r||!t)return null;const i=t?.title,o=t?.subtitle;return(0,I.BX)(Ae,{children:[i?(0,I.tZ)(D.ZP,{text:i}):null,o?(0,I.tZ)(D.ZP,{text:o}):null]})};var Ue=r(72238),Ze=r(21322),Se=r("__fusion__1645"),fe=r(59210);const Ne=(0,l.zo)("div",{display:"flex",flexDirection:"column"}),Le=e=>{let{promotion:t}=e;const{isLiveOrder:r}=(0,ce.W)();if(!r||!t)return null;const{disclaimer:i,title:o,subtitle:n}=t;return(0,I.tZ)("div",{children:(0,I.tZ)(Ue.Z,{artwork:()=>(0,I.tZ)(Se.default,{size:20}),children:(0,I.tZ)(Ze.Z,{children:(0,I.BX)(Ne,{children:[o?(0,I.tZ)(fe.Uc,{as:"span",children:o}):null,n?(0,I.tZ)(fe.aM,{as:"span",color:"positive",children:n}):null,i?(0,I.tZ)(D.ZP,{text:i}):null]})})})})},ve=()=>{const{currentUserItemCount:e}=(0,g.Z)();return 1===e?(0,I.tZ)(o.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e}}):(0,I.tZ)(o.v,{id:"shared.numCartItems",data:{numCartItems:e}})},be=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{borderTop:`1px solid ${t.colors.borderOpaque}`}})),ye=(0,l.zo)("div",(e=>{let{$theme:t,$isCartDrafting:r}=e;return{marginLeft:`-${t.sizing.scale600}`,marginRight:`-${t.sizing.scale600}`,...r?{minHeight:t.sizing.scale100,background:t.colors.backgroundSecondary}:{minHeight:t.sizing.scale300,background:t.colors.backgroundTertiary}}})),Pe=(0,l.zo)("div",(()=>({display:"flex",flexDirection:"row"}))),Me=(0,l.zo)(Z.rU,(e=>{let{$theme:t}=e;return{margin:`0 -${t.sizing.scale600}`,display:"flex",flexDirection:"row"}})),Be=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"column",gap:t.sizing.scale600}})),He=(0,l.zo)(C.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600,paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600,borderRadius:t.borders.radiusFull}})),ke=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:t.sizing.scale0}})),ze=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,display:"flex",justifyContent:"center",alignItems:"center",color:t.colors.contentStateDisabled}})),Fe=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{marginTop:`-${t.sizing.scale300}`}})),Ve=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{margin:`0 ${t.sizing.scale600}`}})),xe=e=>{let{quantitySelectType:t="picker",cartItems:r,cartItemsGroup:o,isSingleOrderWithCartItemsGroups:n=!1,isLiveOrder:l,isLiveOrderCartLoading:s}=e;const{isCartDrafting:d}=(0,U.Z)(),{draftOrder:_,isBundledOrder:c}=(0,E.Dz)(),{restaurantLink:u,onGoToStore:m}=(0,S.Z)(),{store:O}=(0,A.ZP)(_?.shoppingCart.storeUuid),T=(0,Y.ZP)(),h=(c||n)&&void 0!==o,{isMobile:C}=(0,$.hU)(),g=Boolean(r),{stopTiming:Z}=(0,ae.K3)();return i.useEffect((()=>{g&&Z(se.B.CART_LOAD_COMPLETE_WITH_ITEMS,{shouldEmitTiming:!0})}),[g,Z]),(0,I.BX)(I.HY,{children:[h?(0,I.BX)(I.HY,{children:[n?(0,I.tZ)(Pe,{children:(0,I.BX)(ke,{children:[(0,I.tZ)(D.ZP,{text:o.title}),(0,I.tZ)(D.ZP,{text:o.subtitle})]})}):(0,I.tZ)("div",{children:(0,I.BX)(Me,{to:u,onClick:e=>{u?m():(e.preventDefault(),T("eats:click_store_link",{source:"cart",label:"store_not_loaded"}))},children:[(0,I.tZ)(He,{src:o.iconUrl||""}),(0,I.BX)(ke,{children:[(0,I.tZ)(D.ZP,{text:o.title}),(0,I.tZ)(D.ZP,{text:o.subtitle})]}),(0,I.tZ)(ze,{children:(0,I.tZ)(R.default,{size:24})})]})}),o.actionableBanners?(0,I.tZ)(Be,{children:o.actionableBanners?.map(((e,t)=>(0,I.tZ)(f.C,{bannerAction:e},`saving-banner-${t}`)))}):null,(0,I.tZ)(x.IY,{})]}):null,(0,I.tZ)(a.Z,{cmpCartItems:r,quantitySelectType:t,fulfillmentIssueOptions:O?.data?.fulfillmentIssueOptions,isCartDrafting:d,isLiveOrderCartLoading:s}),l||!c&&d?(0,I.BX)(i.Fragment,{children:[C||l?(0,I.tZ)(N.Z,{}):null,(0,I.tZ)("div",{children:(0,I.tZ)(ye,{$isCartDrafting:!0})})]}):null,l?null:(0,I.tZ)(p.Z,{store:O,instructionsPadding:0,isRegularOrder:!0}),d&&c?(0,I.tZ)("div",{children:(0,I.tZ)(ye,{$isCartDrafting:!0})}):d||l?null:o?(0,I.tZ)(ye,{}):(0,I.tZ)(be,{})]})},we=(0,l.zo)("div",{display:"flex",alignItems:"center"}),$e=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,flexGrow:1}})),Ge=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary,paddingRight:t.sizing.scale100}})),Ye=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),We=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between"}})),Xe=(0,l.zo)("div",(e=>{let{$isXlbFrictionBatch2CheckoutEnabled:t}=e;return{width:t?"unset":"100%"}})),Ke=(0,l.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),Qe=e=>{let{quantitySelectType:t="picker"}=e;const r=(0,Y.ZP)(),[l,a]=i.useState(!0),d=i.useRef(!1),{isCartDrafting:_}=(0,U.Z)(),{isStorePrecheckoutBundlingEnabled:u}=(0,V.Z)(),T=(0,O.Z)(),{isBundledOrder:D,draftOrder:p}=(0,E.Dz)(),C=p?.storeUuid,{store:R}=(0,A.ZP)(C),g=(0,k.Z)(C||""),{belowMBSPercent:Z,isTreated:S}=F(R?.data),{isLiveOrder:f,liveOrderUuid:N}=(0,ce.W)(),L=(0,Ie.W)({getCartFrom:"workflowId",workflowId:N}),v="SYNCING"===L.status,b="LOADING"!==L?.status?L?.rawCartData?.checkoutPresentation?.checkoutPayloads:null,{checkoutPayloads:y,cmpMaybe:{isLoading:P}}=(0,s.ZP)(["cartItems","upsellCatalogSections","subtotal","subTotalFareBreakdown","cartPageHeader","fulfilledItemDetails","unFulfilledItemDetails","inReviewItemDetails","uneditableItemDetails","fareBreakdown","promotion"]),{cartItems:M,upsellCatalogSections:B,subtotal:H,subTotalFareBreakdown:z,cartPageHeader:w,fulfilledItemDetails:$,unFulfilledItemDetails:G,inReviewItemDetails:W,uneditableItemDetails:X,fareBreakdown:K,promotion:Q}=f?b||y:y||{},q=R.data?.location?.locationType,{subtotalDisclaimers:oe}=H||{},{primaryBundledStoreUuid:ae,primaryDraftOrderUUID:se}=(0,J.Z)(),_e=(0,n.ip)({...ee.v.eats_web_checkout_redesign_cart_promotions_enabled,defaultValue:!1}),ue=(0,n.ip)({...te.r.eats_web_cart_display_total_promotion_enabled,defaultValue:!1}),Ee=ne(p?.uuid,M?.cartItemsGroups);i.useEffect((()=>{l&&N&&("AVAILABLE"===L?.status||"SYNCING"===L?.status)&&(L?.actions?.syncCart({workflowUUID:N,orderUUID:N}),a(!1))}),[l,L,N]),i.useEffect((()=>{Boolean(Ee&&M?.cartItemsGroups?.length&&M?.cartItemsGroups?.length>0)&&!d.current&&(r("eats:restricted_items_sectioned_cart_impression",{storeUuid:C||"",cartItemsGroupsCount:M?.cartItemsGroups?.length??0}),d.current=!0)}),[M?.cartItemsGroups,r,Ee,C]);const me=(0,de.SF)(q),Oe=()=>f&&K?.charges?(0,I.tZ)(Ve,{children:(0,I.tZ)(c.jH,{charges:K?.charges})}):z?(0,I.tZ)(le.Z,{}):H||P?(0,I.BX)(We,{children:[(0,I.BX)(Xe,{$isXlbFrictionBatch2CheckoutEnabled:T,children:[me,S&&0===Z?(0,I.tZ)(Ke,{children:(0,I.tZ)(o.v,{id:"cart.shared.savings.applied"})}):null]}),(0,I.tZ)(h,{subtotal:H,isLoading:P})]}):null;return(0,I.BX)(I.HY,{children:[(0,I.tZ)(ge,{cartPageHeader:w}),f?null:(0,I.tZ)(I.HY,{children:u&&D?null:(0,I.BX)(I.HY,{children:[(0,I.tZ)(x.IY,{}),Ee||_||!H&&!P?null:(0,I.BX)(I.HY,{children:[(0,I.BX)(we,{children:[(0,I.tZ)($e,{children:(0,I.tZ)(ve,{})}),(0,I.tZ)(Ge,{children:(0,I.BX)(Ge,{children:[me,":"]})}),(0,I.tZ)(Ye,{children:(0,I.tZ)(h,{subtotal:H,isLoading:P})})]}),(0,I.tZ)(be,{})]})]})}),(u||Ee)&&M?.cartItemsGroups?M?.cartItemsGroups?.map((e=>(0,I.tZ)(E.zW,{draftOrderUUID:e.draftOrderUUID,children:(0,I.tZ)(xe,{isSingleOrderWithCartItemsGroups:Ee,quantitySelectType:t,cartItems:e.cartItems??void 0,cartItemsGroup:e,isLiveOrder:f})},e.draftOrderUUID))):(0,I.BX)(I.HY,{children:[(0,I.tZ)(Re,{section:W?.inReviewItemDetails}),(0,I.tZ)(xe,{isLiveOrderCartLoading:v,isSingleOrderWithCartItemsGroups:Ee,quantitySelectType:t,cartItems:M?.cartItems??void 0,isLiveOrder:f}),(0,I.tZ)(Re,{section:G?.unfulfilledItemDetails}),(0,I.tZ)(Re,{section:X?.unEditableItemDetails}),(0,I.tZ)(Re,{section:$?.foundItemDetails}),(0,I.tZ)(Re,{section:$?.replacedItemDetails})]}),_e&&R.data&&B?(0,I.tZ)(j,{store:R.data,isGrocery:g,upsellCatalogSectionsPayload:B,primaryDraftOrderUUID:se,primaryBundledStoreUUID:ae,surface:re.b.CART_UPSELL}):null,(0,I.tZ)(Le,{promotion:Q}),(0,I.tZ)(Oe,{}),oe?(0,I.tZ)("div",{children:oe?.map(((e,t)=>(0,I.tZ)(ie.Z,{badge:e},t)))}):null,f||!ue||z?null:(0,I.tZ)("div",{children:(0,I.tZ)(Fe,{children:(0,I.tZ)(m,{})})})]})}},15840:(e,t,r)=>{r.d(t,{Z:()=>y,C:()=>P});var i=r(43193),o=r(81231),n=r(91931),l=r(75161),a=r(91086),s=r(33259),d=r(34217),_=r(74820),c=r(70589),u=r(4909),E=r(62091),I=r(5639),m=r(4661),O=r(52909),T=r(33990);const D=(0,n.zo)("ul",(e=>{let{$theme:t}=e;return{}})),h=(0,n.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",padding:`${t.sizing.scale600} 0`}})),p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale700}})),C=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{}})),R=(0,n.zo)("div",(e=>{let{$theme:t,$isBold:r}=e;return Object.assign({marginBottom:t.sizing.scale100},r?{...t.typography.LabelMedium}:{...t.typography.ParagraphSmall})})),A=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),g=(0,n.zo)(E.Z,(e=>{let{$isDarkMode:t}=e;return{...t?{filter:"invert(100%)"}:{}}})),U=e=>e.bottomSheet?(0,T.tZ)(m.P,{bottomSheet:e.bottomSheet,onClose:()=>e.onClose(),isOpen:e.isOpen,__invertIconColorOnDarkMode:!0}):null,Z=e=>{const{themeId:t}=(0,O.aG)(),r="dark"===t;return(0,T.BX)(l.u_,{closeable:!0,isOpen:e.isOpen,onClose:()=>e.onClose(),children:[(0,T.tZ)(a.xB,{title:e.bottomSheet?.title?.text,leftButton:(0,T.tZ)(s.hQ,{onClick:()=>e.onClose()})}),(0,T.BX)(d.f,{$removeMarginTop:!0,children:[(0,T.tZ)(_.r,{children:e.bottomSheet?.title?.text}),(0,T.tZ)(D,{children:e.bottomSheet?.paragraphs?.map((e=>{let{title:t,iconUrl:i,isTitleBold:o,subtitle:n}=e;return(0,T.BX)(h,{children:[i?(0,T.tZ)(p,{children:(0,T.tZ)(g,{src:i,$isDarkMode:r})}):null,(0,T.BX)(C,{children:[(0,T.tZ)(R,{$isBold:o,children:t}),(0,T.tZ)(A,{children:n})]})]},t)}))})]}),(0,T.tZ)(c.m,{children:(0,T.tZ)(u.V,{onClick:()=>e.onClose(),children:e.bottomSheet?.buttonText})})]})},S=e=>{const{isMobile:t}=(0,I.hU)();return t?(0,T.tZ)(U,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet}):(0,T.tZ)(Z,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:e.actionMetadata?.bottomSheet})};var f=r(33535),N=r(70247),L=r(72179),v=r(27871),b=r(97627);const y=()=>{const{isCartDrafting:e}=(0,L.Z)(),{promoAndMembershipSavingBannerPayload:t}=(0,v.ZP)([...e?["promoAndMembershipSavingBannerPayload"]:[]]).checkoutPayloads;return t?.listContentViewModel?(0,T.tZ)("div",{children:(0,T.tZ)(b.Z,{viewModel:t.listContentViewModel})}):null},P=e=>{let{bannerAction:t}=e;const[r,n]=i.useState(!1),l=(0,f.ZP)(),{draftOrder:a}=(0,N.Dz)();return t.bannerModel?(0,T.BX)(T.HY,{children:[(0,T.tZ)(o.Z,{onClick:()=>{n(!0),l("eats:saving_banner_click",{storePreCheckoutBundling:{draftOrderUuid:String(a?.uuid),bundleGroupRole:String(a?.bundleGroupInfo?.bundleGroupRole)}})},viewModel:t.bannerModel,noMargin:!0}),(0,T.tZ)(S,{isOpen:r,actionMetadata:"openBottomSheetMetadata"===t.actionMetadata?.type?t.actionMetadata.openBottomSheetMetadata:void 0,onClose:()=>n(!1)})]}):null}},23314:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(36151),o=r(94813),n=r(78989),l=r(47986),a=r(83960);const s=()=>{const e=(0,o.TH)(),{isOnPremiseDeliveryOrder:t}=(0,n.Z)(),{isDraftOrderCreator:r,isDraftOrderCartLocked:s}=(0,a.Z)();return(0,i.useMemo)((()=>t?(0,l.vN_)(e,"premiseDeliveryInfo"):r&&!s?(0,l.vN_)(e,"lockGroupCart"):(0,l.Zs0)(e,{nextUrl:(0,l.VS)(e)})),[s,r,t,e])}},78365:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(43193),o=r(94813),n=r(62104);const l=e=>{if(!(0,n.TP)(e))return;let t;try{t=(0,n.$I)(e)}catch(e){return}return t};function a(e){const t=(0,o.TH)();return i.useMemo((()=>{if(!e)return!1;const r=l(e);return t.pathname.includes(r)}),[t.pathname,e])}},32755:(e,t,r)=>{r.d(t,{ZP:()=>i});const i=r(17604).cS},67318:(e,t,r)=>{r.d(t,{X:()=>l,t:()=>n});var i=r(62104),o=r(47986);const n=(e,t)=>{const r={entryPoint:t.entryPoint};return t.storeUuid&&(r.encodedStoreUuid=(0,i.$I)(t.storeUuid)),(0,o.vN_)(e,"deliveryTime",encodeURIComponent(JSON.stringify(r)))},l=(e,t,r)=>{const n={entryPoint:t.entryPoint};return t.storeUuid&&(n.encodedStoreUuid=(0,i.$I)(t.storeUuid)),t.openedFromMenuDialogue&&(n.openedFromMenuDialogue=!0),(0,o.vN_)(e,"storeDeliveryTime",encodeURIComponent(JSON.stringify(n)),r)}},70940:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(64388);function o(e){const{store:t}=(0,i.ZP)(e);return"USE_SECTION_AS_CATEGORY"===t.data?.menuDisplayType}},78989:(e,t,r)=>{r.d(t,{Z:()=>O,w:()=>m});var i=r(36151),o=r(91631),n=r(74622),l=r(70605),a=r(47986),s=r(58984),d=r(64282),_=r(94813),c=r(83960),u=r(27871);const E="uev2.premise-delivery-info",I="premise_delivery_info";function m(e){if(!e)return null;const t=e.premiseDeliveryInfo;if(!t)return null;return[t.map((e=>{let{label:t,venueSectionName:r}=e;return`${t} ${r}`})).join(", "),e.notes].filter(Boolean).join(" - ")}function O(){const e=(0,d._)(),t=(0,_.TH)(),r=(0,o.k6)(),O=(0,s.I0)(),T=(0,u.CF)(),{diningMode:D}=(0,c.Z)(),h=(0,n.useQueryClient)(),p="ON_PREMISE_DELIVERY"===D?"HOTEL":"STADIUM",C=T?.data?.checkoutPayloads?.venueSectionPicker?.venueSectionPickerViewModel||null,R=(0,n.useQuery)(I,(()=>h.getQueryData(I)||{}),{staleTime:1/0})?.data??null,A=(0,i.useCallback)((t=>{e.set(E,t,86400),h.setQueryData(I,t)}),[e,h]),g=(0,i.useCallback)((()=>{e.remove(E),h.removeQueries({queryKey:I,exact:!0})}),[e,h]),U=(0,i.useCallback)((e=>{A(e),O((0,l.oo)({tableNumber:m(e)||"",action:"complete"})),r.push((0,a.Zs0)(t))}),[A,O,r,t]),Z="ON_PREMISE_DELIVERY"===D||Boolean(C);return(0,i.useEffect)((()=>{const t=e.get(E);Boolean(t)&&!R&&h.setQueryData(I,t)}),[e,R,h]),{setPremiseDeliveryInfo:A,removePremiseDeliveryInfo:g,checkoutWithPremiseDeliveryInfo:U,venueSectionPickerViewModel:C,isOnPremiseDeliveryOrder:Z,premiseDeliveryInfo:R,premiseDeliveryType:p,isLoading:!T?.hasLoaded}}},1938:(e,t,r)=>{r.d(t,{C:()=>n,R:()=>o});var i=r(49201);function o(e){const t=e.options.find((e=>e.isSelectedTip))?.amount||0,r=e.customTipOption&&e.customTipOption.isSelectedTip?e.customTipOption.amount:0;return t||r}function n(e,t){return(0,i.xG)(t,e.currencyCode,o(e))}}}]);