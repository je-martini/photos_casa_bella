"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[62648],{19156:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(75514),i=r(36151),o=r(94579),a=r(33990);const l={},s=e=>({height:e}),d=(e,t,r)=>({zIndex:t,position:"fixed",top:`${e}px`,left:"100%"===r?"0px":"unset",width:r}),c=e=>{const t=e.zIndex||o.I_.cover,r=e.topOffset||0,c=(0,i.useRef)(null),u=(0,i.useRef)(null),[h,p]=(0,i.useState)(!1),[Z,g]=(0,i.useState)(0),[m,f]=(0,i.useState)(0),x=(0,i.useCallback)((()=>{const t=c.current,n=u.current;if(!t||!n)return;const i=t.getBoundingClientRect(),o=n.getBoundingClientRect(),a=e.topSticky?i.top<=r:i.top<r;h===a&&Z===o.height||(p(a),g(o.height),e.useParentWidth&&f(i.width))}),[e.topSticky,e.useParentWidth,r,h,Z]);(0,i.useEffect)((()=>(n.Z&&(n.Z.addEventListener("scroll",x),x()),()=>{n.Z&&n.Z.removeEventListener("scroll",x)})),[x]);const y=e.useParentWidth?`${m}px`:"100%";return(0,a.tZ)("div",{ref:c,style:h?s(Z):l,children:(0,a.tZ)("div",{style:h?d(r,t,y):l,ref:u,children:e.render(h)})})}},89281:(e,t,r)=>{r.d(t,{F:()=>i});var n=r(89166);const i=(0,r(91931).w1)(n.F,(e=>{let{$theme:t}=e;const r=t.componentDefaults.textLink.underline;return"none"===r?{textDecoration:"none"}:"always"===r?{textDecoration:"underline"}:"hover"===r?{":hover":{textDecoration:"underline"}}:{}}))},58713:(e,t,r)=>{r.d(t,{Z:()=>D});var n=r(36151),i=r(60849),o=r(49235),a=r(60935),l=r(47566),s=r(71110),d=r(52246),c=r(97450),u=r(91931),h=r(94579),p=r(94813),Z=r(94131),g=r(83118),m=r(92220),f=r(33535),x=r(47986),y=r(31913),v=r(91892),C=r(71041),$=r(47310),b=r(17981),B=r(5679),_=r(53467),k=r(95396),w=r(50291),S=r(33990);const P=(0,u.zo)("div",{display:"flex",justifyContent:"center",height:"64px",width:"fit-content",zIndex:h.I_.surface,position:"absolute",margin:"auto",top:"-32px",left:0,right:0}),I=e=>{let{metadata:t,uuid:i,surface:a,setIsOpen:u,currentBanner:{topImage:h,topAnimation:I,backgroundColor:z,title:F,subtitle:E,subtitleV2:X,messageTextColor:D,toggleType:M}}=e;const U=(0,_.dP)(t),{productCategory:R}=(0,_.Y$)(t),{expiredAt:T,showCountdownClock:A,timerColors:O}=(0,b.Z)(U,t?.trackingID||"",a),L=(0,p.TH)(),W=(0,f.ZP)(),{setEaterMessageInterstitialSessionCapper:H}=(0,C.Z)(),{setInterstitialStatus:Y,currentInterstitialStatus:J,setInterstitialBannerStatus:j}=(0,$.Z)(U.promoUUID||i),G=(0,v.Z)(),[N,K]=(0,n.useState)(!1),V=R===Z.Pp.PRODUCT_CATEGORY_MEMBERSHIP?(0,s.pZ)(r(90829)):(0,s.pZ)(r(69722)),Q=(0,B.Z)(t?.trackingID),q=(0,n.useMemo)((()=>({eaterMessage:{uuid:i||"",trackingID:t?.trackingID||"",promoCode:U.promoCode||"",itemType:"promotionBannerContent",template:"BANNER",surface:a,expiredAt:T,showCountdownClock:A,promoUuid:U.promoUUID||"",lineOfBusiness:R||Q}})),[i,t?.trackingID,a,U.promoCode,U.promoUUID,T,A,R,Q]),ee={text:G({color:D,defaultColor:"contentOnColor"}),background:G({color:z})};(0,n.useEffect)((()=>{const e=setTimeout((()=>{K(!0)}),0);return()=>clearTimeout(e)}),[]),(0,n.useEffect)((()=>{W("eats:eater_message_view",q)}),[W,q]),(0,n.useEffect)((()=>{j(o.ze.SHOW)}),[j]),(0,n.useEffect)((()=>{H((0,l.V7)(a),i)}),[H,a,i]);return(0,S.tZ)(w.rm,{"data-testid":"eater-message-promotion-banner",$transform:N?"translateY(0)":"translateY(500px)",children:(0,S.BX)(w.sC,{children:[(0,S.tZ)(P,{children:(0,S.tZ)(k.Z,{header:{type:"promotionHeader",promotionHeader:{topImage:h,topAnimation:I}}})}),(0,S.tZ)(w.xt,{children:(0,S.tZ)(w.W_,{$as:d.rU,to:(0,x.tLx)(L,a),onClick:()=>{U?.isAutoApplyPromo?Y(o.FF.SUCCESS):!J&&M&&Y(M),W("eats:eater_message_click",q)},children:A?(0,S.BX)(w.dA,{children:[(0,S.tZ)(w.Mi,{$isContentWhite:!0,$color:ee.text,children:F}),(0,S.tZ)(m.Z,{variant:"thin-mint",secondsLeft:T,timerColors:O})]}):(0,S.BX)(S.HY,{children:[(0,S.tZ)(w.Mi,{$isContentWhite:!0,$color:ee.text,children:F}),(0,S.tZ)(w.Jd,{$isContentWhite:!0,$color:ee.text,children:X?(0,S.tZ)(y.ZP,{text:X}):E})]})})}),(0,S.tZ)(w.ai,{$backgroundColor:ee.background,children:(0,S.tZ)(w.xw,{children:(0,S.tZ)(g.Z,{animationUrl:V,width:"100%",loop:!1})})}),(0,S.tZ)(w.uy,{tabIndex:0,onClick:()=>{j(o.ze.HIDE),u(!1),W("eats:eater_message_dismiss",q)},children:(0,S.tZ)(c.Z,{size:20,color:"white"})})]})})};var z=r(9909),F=r(70327),E=r(8961),X=r(39591);const D=e=>{let{surface:t}=e;const[r,s]=(0,n.useState)(!0),{getEaterMessageInterstitialSessionCapper:d}=(0,C.Z)(),c=(0,E.Z)(),u=(0,i.qp)({...a.K.eater_message_ccc_redesign,defaultValue:"control"}),{modalStates:h,messageModal:p,uuid:Z,metadata:g,promoMetadata:{promoUUID:m}}=(0,X.Z)(t),{currentInterstitialBannerStatus:f,currentInterstitialStatus:x}=(0,$.Z)(m||Z||""),y=h&&h[x]||p;if(!y?.bannerContent)return null;const v=f===o.ze.SHOW||!d((0,l.V7)(t),Z||"");if(!c||!v||!r)return null;switch(y.bannerContent?.type){case"promotionBannerContent":return(0,S.tZ)(F.Z,{messageKey:"thin-mint",children:"control"!==u?(0,S.tZ)(z.Z,{currentBanner:y.bannerContent.promotionBannerContent,uuid:Z||"",metadata:g,surface:t,deviceType:"DESKTOP",setIsOpen:s}):(0,S.tZ)(I,{currentBanner:y.bannerContent.promotionBannerContent,uuid:Z||"",metadata:g,surface:t,setIsOpen:s})})}return null}},83439:(e,t,r)=>{r.d(t,{Z:()=>S});var n=r(91931),i=r(14055),o=r(82410),a=r(25750),l=r(57147),s=r(48510),d=r(46933),c=r(33535),u=r(52298),h=r(89281),p=r(33990);const Z=(0,n.zo)("div",{}),g=(0,n.w1)(h.F,(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),m=()=>(0,p.tZ)(u.ZP,{$height:16}),f=e=>{const{filters:t,isLoading:r,handleChange:n,clearAll:i,hasActiveFilters:h}=(0,s.ZP)(),f=(0,c.ZP)();return t.length?(0,p.BX)(Z,{children:[h?(0,p.BX)(p.HY,{children:[(0,p.tZ)(g,{$as:"button",onClick:()=>{f("eats:filters_cleared"),i(!0)},children:(0,p.tZ)(d.v,{id:"shared.sortandfilters.clearall"})}),(0,p.tZ)(u.ZP,{$height:24})]}):null,(0,p.tZ)(a.Z,{separator:m,children:t.map((t=>(0,p.tZ)(o.Z,{onChange:(t,r)=>{n(t,r),e.onFilterUpdate&&e.onFilterUpdate()},filter:t,isLoading:r},t.uuid)))})]}):(0,p.tZ)(Z,{children:(0,p.tZ)(l.Z,{})})};var x=r(40606),y=r(39773),v=r(67206),C=r(39131),$=r(89400),b=r(69287);const B=(0,n.zo)("div",{marginBottom:"24px"}),_=(0,n.zo)("h1",(e=>{let{$theme:t}=e;return t.typography.DisplayBold3XSmall})),k=(0,n.zo)("h2",(e=>{let{$theme:t}=e;return t.typography.ParagraphSmall})),w=(0,n.zo)("div",(e=>({...(0,v.Z)({height:e.$height,$theme:e.$theme}),width:`${e.$width}px`})));function S(e){let{feed:t,onFilterUpdate:r,hideTitle:n=!1}=e;const o=(0,i.Z)(t),{show:l}=(0,s.ZP)(),{showEuDisclaimer:d}=(0,b.Z)();return(0,y.Z)(),(0,p.BX)("div",{children:[(0,p.tZ)(x.Z,{source:t,loaded:e=>{const{title:t,subtitle:r,bottomSheet:i}=e,o="string"!=typeof r&&(r?.text||r?.textFormat);return d?(0,p.BX)(p.HY,{children:[(0,p.tZ)(C.Z,{title:t,subtitle:r,titleTypography:"DisplayBoldXSmall",bottomSheet:i}),(0,p.tZ)(u.ZP,{$height:24})]}):!t&&!r||n?null:(0,p.BX)(B,{children:[t?(0,p.tZ)(_,{children:t}):null,t&&r?(0,p.tZ)(u.ZP,{$height:12}):null,r&&!o&&"string"==typeof r?(0,p.tZ)(k,{children:r}):null,r&&o&&"string"!=typeof r?(0,p.tZ)(k,{children:(0,p.tZ)($.Z,{badge:r})}):null]})},loading:()=>(0,p.tZ)(B,{children:(0,p.tZ)(w,{$width:200,$height:24})}),error:()=>null}),(0,p.tZ)(x.Z,{source:o,loaded:e=>{let{sortAndFilters:t}=e;return t&&l?(0,p.tZ)(f,{onFilterUpdate:r}):null},loading:()=>(0,p.BX)(a.Z,{separator:()=>(0,p.tZ)(u.ZP,{$height:24}),children:[(0,p.tZ)(w,{$width:168,$height:16}),(0,p.tZ)(w,{$width:116,$height:16}),(0,p.tZ)(w,{$width:168,$height:16}),(0,p.tZ)(w,{$width:116,$height:16}),(0,p.tZ)(w,{$width:168,$height:16})]}),error:()=>null})]})}S.displayName="FeedDesktopControls"},40775:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(36151),i=r(93801),o=r(77842),a=r(33535),l=r(30768),s=r(81726),d=r(33990);function c(e){let{error:t}=e;const r=(0,a.ZP)(),c=(0,l.Z)(),{aisleCategory:u,aisleSubcategory:h}=(0,s.Z)(),p=(0,i.mY)(t.code,500);return(0,n.useEffect)((()=>{u?r("eats:aisle_feed_error",{vertical:c,aisleMetadata:{category:u||"",subcategory:h||""},feedError:{message:t.message,code:p}}):c?r("eats:vertical_feed_error",{vertical:c,feedError:{message:t.message,code:p}}):r("eats:feed_error_view",{feedError:{message:t.message,code:p}})}),[r,t.message,p,c,u,h]),500===p?(0,d.tZ)(o.Z,{}):(0,d.tZ)(i.nQ,{code:p,message:t.message,title:t.title})}},79694:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(91931),i=r(36278),o=r(52298),a=r(6966),l=r(33990);const s=(0,n.zo)("div",(e=>{let{$isScrollable:t,$topOffset:r}=e;return{position:"sticky",top:`${r}px`,overflowY:t?"auto":"hidden",display:"flex",maxHeight:"100vh"}})),d=(0,n.zo)("div",{maxWidth:"280px",flex:1});function c(e){const{elementRef:t,isStuck:r}=(0,a.Z)();return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{ref:t}),(0,l.BX)(s,{$isScrollable:r,$topOffset:e.topOffset||0,children:[(0,l.BX)(d,{children:[(0,l.tZ)(o.ZP,{$height:24}),e.children,(0,l.tZ)(o.ZP,{$height:24})]}),(0,l.tZ)(i.ZP,{$width:"8px"})]})]})}},77842:(e,t,r)=>{r.d(t,{Z:()=>v});var n=r(52246),i=r(91931),o=r(71110),a=r(14016),l=r(46933),s=r(47986),d=r(34567),c=r(87345),u=r(62091),h=r(54176),p=r(94813),Z=r(33990);const g=(0,i.zo)("div",{display:"flex",flexDirection:"column",padding:"16px 16px 80px",alignItems:"center",maxWidth:"410px",margin:"0 auto"}),m=(0,i.zo)("div",{width:"226px",paddingBottom:"24px",transition:"transform 50ms ease-in-out",":hover":{transform:"scale(1.05)"}}),f=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.DisplayXSmall,paddingBottom:"8px",textAlign:"center"}})),x=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,paddingBottom:"24px",textAlign:"center"}})),y=(0,i.zo)(u.Z,{width:"100%",height:"100%"}),v=e=>{const t=(0,p.TH)(),i=(0,a.T)()("components.feedtryagain.error"),{getFeed:u}=(0,h.Z)();return(0,Z.BX)(g,{children:[(0,Z.tZ)(c.Z,{children:i}),(0,Z.tZ)(m,{$as:n.rU,to:(0,s.$9J)(t),children:(0,Z.tZ)(y,{src:(0,o.pZ)(r(11731))})}),(0,Z.tZ)(f,{children:i}),(0,Z.tZ)(x,{children:(0,Z.tZ)(l.v,{id:"shared.somethingWentWrong"})}),(0,Z.tZ)(d.Z,{onClick:()=>{e.onRetry?e.onRetry():u()},children:(0,Z.tZ)(l.v,{id:"feed.error.action_text"})})]})}},31773:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(36151),i=r(68739),o=r(53614),a=r(65624),l=r(92963);function s(e){const t=(0,n.useContext)(o.v),r=(0,n.useRef)(!1),s=(0,n.useContext)(i.GM),d=(0,i.G2)(a.T).from(s);(0,l.Z)("trackingId",e.trackingId),(0,l.Z)("additionalMeta",e.additionalMeta),(0,n.useEffect)((function(){t||r.current||!e.isContentRendered||(r.current=!0,d.mark("mainContentRendered"))}),[t,e.isContentRendered,d])}},82410:(e,t,r)=>{r.d(t,{Z:()=>I});var n=r(36151),i=r(91931),o=r(68685),a=r(17673),l=r(36278),s=r(94024),d=r.n(s),c=r(86695),u=r(68065),h=r(33990);const p="6px",Z="12px",g=(0,i.zo)("div",{display:"flex",flexDirection:"row",flexWrap:"wrap",marginLeft:"-6px",marginRight:"-6px",marginBottom:"-12px"}),m=(0,i.zo)("div",(e=>({backgroundImage:`url('${d()(e.$iconUrl)}')`,backgroundPosition:"center center",backgroundSize:"contain",backgroundRepeat:"no-repeat",height:"16px",width:"16px"}))),f=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",...t.typography.LabelSmall}})),x=e=>{let{options:t,onSelect:r,minPermitted:n,maxPermitted:i,iconComponent:o}=e;const a=t.filter((e=>e.selected)),s=a.length;return(0,h.tZ)(g,{children:t.map((e=>{let t;if(e.iconUrl)if(o){const r=o;t=(0,h.tZ)(r,{option:e,size:16})}else t=(0,h.tZ)(m,{$iconUrl:e.iconUrl});return(0,h.tZ)(c.zx,{kind:e.selected?c.TO.primary:c.TO.secondary,onClick:()=>(e=>{const t=a.some((t=>t.uuid===e.uuid)),o=a.filter((t=>t.uuid!==e.uuid));return!t&&s<i?r([...o,e]):t&&s>n?r([...o]):void 0})(e),shape:u.X3.pill,size:u.NO.compact,overrides:{BaseButton:{style:{marginLeft:p,marginRight:p,marginBottom:Z}}},children:(0,h.BX)(f,{children:[t?(0,h.BX)(h.HY,{children:[t,(0,h.tZ)(l.sA,{})]}):null,e.label]})},e.uuid)}))})};var y=r(84887),v=r(66611),C=r(60796);const $=e=>{let{type:t,...r}=e;switch(t){case"sort":return(0,h.tZ)(o.Z,{...r});case"priceRangeFilter":return(0,h.tZ)(x,{...r});case"dietaryFilter":return(0,h.tZ)(x,{...r,iconComponent:v.Z});case"bookingFeeFilter":return(0,h.tZ)(a.Z,{...r});case"topEatsFilter":return(0,h.tZ)(y.Z,{...r,iconComponent:C.Z});case"groupSizeFilter":return(0,h.tZ)(o.Z,{...r});default:return null}};var b=r(33535),B=r(79908);const _=(0,i.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,width:"100%",cursor:"pointer"}})),k=(0,i.zo)("div",{display:"flex",justifyContent:"space-between"}),w=(0,i.zo)("div",{padding:"12px 0"}),S=(0,i.zo)("div",{flex:1}),P=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",background:t.colors.buttonPrimaryFill,color:t.colors.buttonPrimaryText,borderRadius:t.borders.radiusFull,width:"24px",height:"24px",alignItems:"center",justifyContent:"center",...t.typography.LabelXSmall}})),I=e=>{let{filter:t,onChange:r,isLoading:i,initialIsExpanded:o=!0}=e;const[a,s]=(0,n.useState)(o),d=(0,b.ZP)(),c=t.options.filter((e=>e.selected)).length,u="bookingFeeFilter"!==t.type&&t.maxPermitted>1&&c>0;return(0,h.BX)("div",{children:[(0,h.tZ)(_,{onClick:()=>{s(!a),d("eats:filter_clicked",{filterMeta:{uuid:t.uuid}})},children:(0,h.BX)(k,{children:[t.label,(0,h.tZ)(S,{}),u?(0,h.BX)(h.HY,{children:[(0,h.tZ)(P,{children:c}),(0,h.tZ)(l.ZP,{$width:"8px"})]}):null,(0,h.tZ)(B.Z,{width:"24px",height:"24px",rotate:a?0:180,type:"Chevron"})]})}),a?(0,h.tZ)(w,{children:(0,h.tZ)($,{type:t.type,options:t.options,filterId:t.uuid,maxPermitted:t.maxPermitted,minPermitted:t.minPermitted,onSelect:e=>{d("eats:filter_changed",{filterMeta:{uuid:t.uuid,type:t.type}}),r({uuid:t.uuid,options:e.map((e=>{let{uuid:t}=e;return{uuid:t}}))},!0)}})}):null]})}},57147:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(91931),i=r(36278),o=r(7646),a=r(33990);const l=(0,n.zo)("div",{display:"flex"}),s=()=>(0,a.BX)(l,{children:[(0,a.tZ)(o.WJ,{}),(0,a.tZ)(i.Tr,{}),(0,a.tZ)(o.WJ,{}),(0,a.tZ)(i.Tr,{}),(0,a.tZ)(o.WJ,{})]})},39773:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(36151),i=r(15070),o=r(33535),a=r(55758),l=r(48510),s=r(32504),d=r(9829),c=r(8419);const u=()=>{const e=(0,o.ZP)(),t=(0,a.d)(),{filters:r}=(0,l.ZP)(),{cacheKey:u,feedArgs:{userQuery:h,sortAndFilters:p=[]}}=(0,s.Z)(),Z=(0,i.v)((e=>{let{feed:t}=e;return(0,d._z)(t,u)})),g=r.map((e=>e.uuid)),m=(0,c.j)(Z.data).length||0;(0,n.useEffect)((()=>e("eats:filters_view",{filterMeta:{filterList:g,diningMode:t,currentSearch:h,filterState:p,numRestaurants:m,isFiltered:Boolean(p.length)}})),[])}},92963:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(36151),i=r(68739),o=r(53614),a=r(65624);function l(e,t){const r=(0,n.useContext)(o.v),l=(0,n.useContext)(i.GM),s=(0,i.G2)(a.T).from(l);(0,n.useEffect)((()=>{if(!r&&t){const r="string"==typeof t?t:JSON.stringify(t);s.setMeta(e,r)}}),[s,e,t,r])}},43139:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(75514),i=r(36151),o=r(15070),a=r(71051),l=r(33535),s=r(79857);function d(){const e=(0,i.useContext)(a.k7),t=(0,l.ZP)(),r=e.get("xlb_page_loaded_beacon_fired"),d=(0,s.Z)(),{isIOS:c,isAndroid:u}=(0,o.v)((e=>e.device));return(0,i.useCallback)((function(){if(!r&&(e.set("xlb_page_loaded_beacon_fired",!0),d))try{c?(n.Z.webkit.messageHandlers.hostAppBridge.postMessage("didFinishLoadingPage"),t("eats:xlb_page_loaded_beacon_fired")):u&&(n.Z.hostAppBridge.onPageLoaded(),t("eats:xlb_page_loaded_beacon_fired"))}catch(e){t("eats:xlb_page_loaded_beacon_failed",{error:e})}}),[d,t,r,u,c,e])}}}]);