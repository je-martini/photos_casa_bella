(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[20990,6264],{7858:(e,t,r)=>{var n="__lodash_hash_undefined__",s="[object Function]",i="[object GeneratorFunction]",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,c=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,h="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,p="object"==typeof self&&self&&self.Object===Object&&self,g=h||p||Function("return this")();var f=Array.prototype,_=Function.prototype,m=Object.prototype,y=g["__core-js_shared__"],v=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),b=_.toString,S=m.hasOwnProperty,C=m.toString,x=RegExp("^"+b.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=g.Symbol,E=f.splice,k=P(g,"Map"),O=P(Object,"create"),D=w?w.prototype:void 0,I=D?D.toString:void 0;function Z(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function T(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $(e,t){for(var r=e.length;r--;)if(z(e[r][0],t))return r;return-1}function H(e,t){for(var r=0,n=(t=function(e,t){if(U(e))return!1;var r=typeof e;if("number"==r||"symbol"==r||"boolean"==r||null==e||q(e))return!0;return o.test(e)||!a.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return U(e)?e:L(e)}(t)).length;null!=e&&r<n;)e=e[N(t[r++])];return r&&r==n?e:void 0}function M(e){return!(!F(e)||function(e){return!!v&&v in e}(e))&&(function(e){var t=F(e)?C.call(e):"";return t==s||t==i}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?x:d).test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function R(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function P(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return M(r)?r:void 0}Z.prototype.clear=function(){this.__data__=O?O(null):{}},Z.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Z.prototype.get=function(e){var t=this.__data__;if(O){var r=t[e];return r===n?void 0:r}return S.call(t,e)?t[e]:void 0},Z.prototype.has=function(e){var t=this.__data__;return O?void 0!==t[e]:S.call(t,e)},Z.prototype.set=function(e,t){return this.__data__[e]=O&&void 0===t?n:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,r=$(t,e);return!(r<0)&&(r==t.length-1?t.pop():E.call(t,r,1),!0)},T.prototype.get=function(e){var t=this.__data__,r=$(t,e);return r<0?void 0:t[r][1]},T.prototype.has=function(e){return $(this.__data__,e)>-1},T.prototype.set=function(e,t){var r=this.__data__,n=$(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},A.prototype.clear=function(){this.__data__={hash:new Z,map:new(k||T),string:new Z}},A.prototype.delete=function(e){return R(this,e).delete(e)},A.prototype.get=function(e){return R(this,e).get(e)},A.prototype.has=function(e){return R(this,e).has(e)},A.prototype.set=function(e,t){return R(this,e).set(e,t),this};var L=B((function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(q(e))return I?I.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e);var t=[];return c.test(e)&&t.push(""),e.replace(l,(function(e,r,n,s){t.push(n?s.replace(u,"$1"):r||e)})),t}));function N(e){if("string"==typeof e||q(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function B(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var a=e.apply(this,n);return r.cache=i.set(s,a),a};return r.cache=new(B.Cache||A),r}function z(e,t){return e===t||e!=e&&t!=t}B.Cache=A;var U=Array.isArray;function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function q(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==C.call(e)}e.exports=function(e,t,r){var n=null==e?void 0:H(e,t);return void 0===n?r:n}},92067:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(91931),s=r(33497);const i=(0,n.zo)("button",(e=>{let{$theme:t,radius:r}=e;return{...(0,s.Z)({$theme:t,radius:r}),textDecoration:"none",":active":{background:t.colors.backgroundSecondary}}}))},3007:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(94813),s=r(14487),i=r(47986),a=r(1795),o=r(33990);const c=()=>{const e=(0,n.TH)();return(0,o.tZ)(s.ZP,{backLocation:(0,i.N0q)(e),children:(0,o.tZ)(a.Z,{})})}},14487:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>C,a7:()=>b,cN:()=>S});var n=r(36151),s=r(91931),i=r(4927),a=r(74419),o=r(94579),c=r(94813),l=r(95747),u=r(47986),d=r(6966),h=r(15070),p=r(26034),g=r(75907),f=r(39141),_=r(33990);const m=(0,s.zo)("div",(e=>{let{$theme:t,$overlay:r,$takeOverModal:n}=e;return{display:"flex",flexDirection:"column",flex:1,background:t.colors.backgroundPrimary,maxWidth:"100%",height:"100%",position:"relative",zIndex:n?o.I_.base:o.I_.modal,...r?{position:"absolute",top:0,width:"100%"}:{}}})),y=(0,s.zo)("div",(e=>({position:e.$isStuck?"sticky":"relative",zIndex:o.I_.modal,top:0}))),v=(0,s.zo)("div",(e=>({padding:e.$removeTopPadding?"12px 16px 0 16px":"64px 16px 0 16px",height:"100%",boxSizing:"border-box"}))),b=(0,s.Le)(v,(e=>function(t){const r=(0,h.v)((e=>{let{embeddedFeatures:t}=e;return t})).xlbHeaderBridge,{children:n,...s}=t;return(0,_.tZ)(e,{$removeTopPadding:r,...s,children:n})})),S=i.Z,C=e=>{const t=(0,c.TH)(),r=(0,l.Z)(),s=n.useContext(f.w),{backLocation:i=(0,u.W57)(t),hasBackButton:o,hasCloseButton:v=!0,inverseColor:b=!1,isHeaderStatic:S,stickyBanner:C,onClose:x=(()=>r(i)),isTakeOverModal:w,isSecondaryCloseButton:E=!1}=e,{elementRef:k,isStuck:O}=(0,d.Z)(),D=(0,h.v)((e=>{let{embeddedFeatures:t}=e;return t})).xlbHeaderBridge;return(0,_.BX)(m,{$overlay:e.overlay,$takeOverModal:s?.isTakeOverModal??w,"data-test":e.dataTest??"mobile-dialog",children:[C?(0,_.tZ)(y,{$isStuck:O,children:(0,_.tZ)(C,{})}):null,(0,_.tZ)(g.Z,{children:(0,_.tZ)(p.Z,{})}),(0,_.tZ)(a.Z,{headerRef:k,hasBackButton:o,hasCloseButton:v,onClose:x,isSecondaryCloseButton:E,hideHeader:!0,inverseColor:b,isStuck:!D&&O,title:e.title,topRightIconButton:e.topRightIconButton,isHeaderStatic:S,hasShadow:e.headerHasShadow}),e.children]})}},42773:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(75514),s=r(36151),i=r(30840),a=r(91631),o=r(79857);const c=e=>{const t=(0,o.Z)(),r=(0,s.useCallback)((t=>{const r=function(e){if(e&&"object"==typeof e&&"string"==typeof e.type){const t=e.payload;return{type:e.type,payload:t&&"object"==typeof t?Object.keys(t).reduce(((e,r)=>(e[r]=t[r],e)),{}):null}}return null}(t?.data),n=t?.origin;return!!r&&e(r,n)}),[e]);(0,s.useEffect)((()=>{if(t&&n.Z)return n.Z.addEventListener("message",r),()=>{n.Z&&n.Z.removeEventListener("message",r)}}),[t,r])};var l=r(79851),u=r(69611),d=r(81149),h=r(51143),p=r(47986),g=r(24316),f=r(67672),_=r(94813),m=r(38777),y=r(60239),v=r(74622),b=r(62459);var S=r(78284),C=r(40832),x=r(72843),w=r(97148),E=r(33535),k=r(27871),O=r(56962),D=r(87444);const I="BACK_TO_FEED",Z="HELP",T="ACCOUNT",A="SHOPPING_CART",$="STORE_OVERFLOW",H="SEARCH",M=()=>{const e=(0,a.k6)(),t=(0,l.Z)(),r=(0,_.TH)(),o=(0,u.Z)(),{totalOrders:M}=(0,g.Z)(),{hydrateDelegatedBooking:R,isDelegatedBooking:P}=(0,m.W)(),L=(0,i.Z)({page:"order"}),N=(0,p.vN_)(r,"storeOverflowActions"),B=(0,p.SCs)(r),{toggleIsOpen:z}=(0,h.qi)(),U=function(e){const t=(0,b.Z)("setLocationDetailsWithAddressV1");return(0,v.useMutation)((e=>t.request("setLocationDetailsWithAddressV1",e)),e)}(),{saveChanges:F}=(0,C.a8)(),q=(0,E.ZP)(),{dataKey:V}=(0,k.CK)(),j=(0,v.useQueryClient)(),G=(0,p.LcP)(r),[Q,X]=(0,O.Z)("orchid.address",null),K=(0,D.Z)("orchid_omit_city_in_lookup");return c((0,s.useCallback)(((s,i)=>{if(!P||y.fW.find((e=>e.test(i)))){if("CUSTOM_HEADER_ACTION"===s.type){const r=s.payload;if(r?.action===I)e.push(t);else if(r?.action===Z)(0,f.Z)(L);else if(r?.action===T)z();else if(r?.action===H)e.push(B);else if(r?.action===A){if(!n.Z)return;M<=1?e.push((0,p.nQQ)(n.Z.location)):(0,p.zrB)(n.Z.location,"multicartMobileSwitcher")?e.replace((0,p.C45)(n.Z.location)):e.push((0,p.vN_)(n.Z.location,"multicartMobileSwitcher"))}else r?.action===$&&e.push(N)}else y.qn.includes(s.type)&&R(s.payload,i);if("USER_TRIGGERED_IMPRESSION"===s.type&&((0,d.be)(),o({source:"user_triggered"})),"SEARCH_RESULTS"===s.type){const t=s.payload?.q;"string"==typeof t&&t.length>0&&e.push((0,p.Xqq)(r,{userQuery:t}))}if("EMBEDDING_APP_ADDRESS_UPDATE"===s.type||"ORCHID_ADDRESS_UPDATE"===s.type){const t=s.payload;t&&U.mutate({latitude:t.coordinates.latitude,longitude:t.coordinates.longitude,address:(0,w.iw)(t,{omitCity:K}),sourceAddress:t},{onSuccess:n=>{q("orchid:bridge_address_update_success",{eatsAddress:n?.address,orchidAddress:t}),(0,w.$J)(n)&&X(t),F((()=>{const t=x.parse(r.search||"");(t[p.FSm.place]||t[p.FSm.latitude]||t[p.FSm.longitude])&&e.replace((0,p.DZj)({location:r,newQueryParams:{place:(0,S.aj)((0,S.VN)(n))}}))}),{overrideLocationDraft:n,overrideDraftInstructions:{aptOrSuite:t.apartmentNumber??"",...t.instructions?{notes:t.instructions}:{}},skipLocationUpsert:(0,w.$J)(n)}).catch((e=>{q("orchid:bridge_address_update_failure",{error:e})}))},onError:t=>{q("orchid:bridge_address_update_failure",{error:t}),e.replace(G)}})}if("EMBEDDING_APP_NAVIGATION_REQUEST"===s.type){const t=s.payload;t?.url&&t?.method&&e[t.method](t.url)}if("RELOAD_CHECKOUT"===s.type){const t=(0,p.zrB)(r,"orderValidationError");j.invalidateQueries(V),t&&e.replace((0,p.C45)(r))}}}),[e,t,L,B,z,M,N,o,P,R,r,U,F,q,j,V,G,X,K])),null}},4927:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(91931),s=r(94579),i=r(33990);const a=(0,n.zo)("div",{height:"112px"}),o=(0,n.zo)("div",(e=>{let{$theme:t,$padding:r}=e;return{padding:r,position:"fixed",bottom:0,left:0,right:0,zIndex:s.I_.cover,...t.overlays.floatingButtonGradient}}));function c(e){return(0,i.BX)("div",{children:[(0,i.tZ)(a,{}),(0,i.tZ)(o,{$padding:e.overrides?.padding??s.a9,children:e.children})]})}},87429:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(91931),s=r(36278),i=r(94579),a=r(33990);const o=(0,n.zo)("div",(e=>{let{$reverse:t}=e;return{display:"flex",position:"relative",flexDirection:t?"row-reverse":"row"}})),c=(0,n.zo)("input",(e=>{let{$theme:t,checked:r}=e;return{position:"absolute",opacity:0,pointerEvents:"none",outline:"none",":focus[data-focus-visible-added]+label:before":{...r?{boxShadow:`0 0 0 2px ${t.colors.focus}`}:{border:`solid 3px ${t.colors.borderSelected}`}}}})),l=e=>encodeURIComponent(`\n  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0V20H20V0H0ZM8.5 15.1L2.90002 9.5L5 7.39999L8.40002 10.8L14.8 4.39999L16.9 6.5L8.5 15.1Z" fill="${e}" />\n  </svg>\n  `),u=(0,n.zo)("label",(e=>{let{$checked:t,$disabled:r,$reverse:n,$theme:s}=e;return{...s.typography.LabelMedium,width:"100%",display:"flex",boxSizing:"border-box",alignItems:"center",flexDirection:n?"row-reverse":"row",justifyContent:"space-between",cursor:"pointer",fontSize:"16px",lineHeight:"20px",transition:"background-color 100ms ease 0s",":before":{flex:"none",display:"flex",boxSizing:"border-box",border:r?`solid 3px ${s.colors.disabled}`:`solid 3px ${s.colors.tickBorder}`,...t?{border:"0",backgroundColor:s.colors.tickMarkFill,backgroundImage:`url('data:image/svg+xml,${l(s.colors.tickFillSelected)}');`,backgroundPosition:"center center",backgroundSize:"cover"}:{},content:"''",cursor:"pointer",height:i.sh,width:i.sh,verticalAlign:"middle"}}})),d=e=>(0,a.BX)(o,{$reverse:Boolean(e.reverse),children:[e.startElement,(0,a.tZ)(c,{type:"checkbox",id:e.id,name:e.name,value:e.value,checked:e.isChecked,disabled:Boolean(e.isDisabled),onChange:e.onChange}),(0,a.BX)(u,{htmlFor:e.id,$disabled:Boolean(e.isDisabled),$reverse:e.reverse,$checked:e.isChecked,children:[(0,a.tZ)(s.ZP,{$width:"16px"}),e.children]})]})},192:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(43193),s=r(91931),i=r(52298),a=r(14966),o=r(33990);const c=e=>({body1:{fontSize:e.typography.ParagraphXSmall.fontSize,lineHeight:e.typography.ParagraphXSmall.lineHeight},body2:{fontSize:e.typography.ParagraphSmall.fontSize,lineHeight:e.typography.ParagraphSmall.lineHeight},body3:{fontSize:e.typography.ParagraphMedium.fontSize,lineHeight:e.typography.ParagraphMedium.lineHeight},title1:{fontSize:e.typography.ParagraphLarge.fontSize,lineHeight:e.typography.ParagraphLarge.lineHeight},title2:{fontSize:e.typography.HeadingXSmall.fontSize,lineHeight:e.typography.HeadingXSmall.lineHeight},title3:{fontSize:e.typography.HeadingSmall.fontSize,lineHeight:e.typography.HeadingSmall.lineHeight},title4:{fontSize:e.typography.HeadingMedium.fontSize,lineHeight:e.typography.HeadingMedium.lineHeight},title5:{fontSize:"44px",lineHeight:"52px"},title6:{fontSize:"48px",lineHeight:"56px"}}),l=(e,t,r)=>({...t?{fontFamily:"medium"===t?e.typography.LabelMedium.fontFamily:e.typography.ParagraphMedium.fontFamily}:null,...r?c(e)[r]:null}),u=(0,s.zo)("div",{display:"table"}),d=(0,s.zo)("img",{verticalAlign:"middle"}),h=(0,s.zo)("span",(e=>{let{$color:t,$fontSize:r,$fontStyle:n,$textDecoration:s,$theme:i}=e;return{...l(i,n,r),...t?{color:t in i.colors?i.colors[t]:t}:null,...s?{textDecoration:s}:null,verticalAlign:"middle"}})),p=(0,s.zo)("a",(e=>{let{$color:t,$fontSize:r,$fontStyle:n,$theme:s}=e;return{...(0,a.lE)({$theme:s}),...l(s,n,r),verticalAlign:"middle",...t?{color:t in s.colors?s.colors[t]:t}:{}}}));function g(e){return(0,o.tZ)(o.HY,{children:e.lines.map(((t,r)=>(0,o.BX)(n.Fragment,{children:[(0,o.tZ)(u,{children:t.children.map(((e,t)=>"img"===e.type?(0,o.tZ)(d,{width:e.width,height:e.height,src:e.url},t):"text"===e.type?(0,o.tZ)(h,{...e.$as?{$as:e.$as}:null,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,$textDecoration:e.textDecoration,children:e.text},t):"anchor"===e.type?(0,o.tZ)(p,{href:e.href,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,children:e.text},t):null))}),"paragraph"===t.breakStyle&&r!==e.lines.length-1?(0,o.tZ)(i.ZP,{$height:16}):null,"heading"===t.breakStyle?(0,o.tZ)(i.ZP,{$height:8}):null]},r)))})}},30442:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(15070),s=r(59956);const i=()=>(0,n.v)((e=>{let{features:t}=e;return t}))[s.h6.capital_one_promo]},17557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(87444),s=r(5639),i=r(47667);const a=()=>{const e=(0,i.Z)(),t=(0,n.Z)("checkout_upsell_jarring_fix_enabled"),{isMobile:r}=(0,s.hU)();return e&&t&&r}},71041:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(36151),s=r(64282),i=r(92431),a=r(87696);const o="uev2.messaging-interstitial-session-capper";function c(){const e=(0,i.Z)(),t=(0,a.Yk)(e),r=(0,s._)(),c=(0,n.useCallback)((()=>r.get(o)||{}),[r]);return{getEaterMessageInterstitialSessionCapper:(0,n.useCallback)(((e,r)=>{const n=c()[e];return n?.sessionId===t&&(n?.campaigns||[]).includes(r)}),[c,t]),setEaterMessageInterstitialSessionCapper:(0,n.useCallback)(((e,n)=>{const s=c(),i=s[e],a=i?.sessionId===t&&i?.campaigns?i.campaigns:[];a.includes(n)||a.push(n),s[e]={sessionId:t||"",campaigns:a},r.set(o,s)}),[r,t,c])}}},19883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(60849),s=r(97763);const i=()=>(0,n.ip)({...s.J.scheduled_order_editing,defaultValue:!1})},6264:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});var n=r(36151),s=r(9725);const i=e=>{const t=(0,s.iQ)(),r=t.liveOrderQueue.getLiveOrderQueueFromCache,i=(0,n.useCallback)((e=>r({type:"cartId",cartId:e})),[r]),[a,o]=(0,n.useState)((()=>i(e.workflowId)));(0,n.useEffect)((()=>{o(i(e.workflowId))}),[e.workflowId,i]);const c=(0,n.useCallback)((e=>a.subscribe(e)),[a]),l=(0,n.useSyncExternalStore)(c,(()=>a.getSnapshot()),(()=>a.getSnapshot()));return(0,n.useMemo)((()=>{if("FETCHING"===t.liveOrderQueue.state)return{status:"LOADING",actions:{syncCart:async e=>a.pushInteraction({type:"SYNC_CART",payload:e})}};switch(l.status){case"OUTDATED":case"UPDATING":case"DELETING_CART":case"CREATING_CART":case"MISSING_CART":return{status:"OUTDATED",rawCartData:l.rawCartData};case"INACTIVE":return{status:"LOADING",actions:{syncCart:async e=>a.pushInteraction({type:"SYNC_CART",payload:e})}};case"IN_SYNC":case"OUT_OF_SYNC":case"SYNCING":return{status:"SYNCING"===l.status?"SYNCING":"AVAILABLE",rawCartData:l.rawCartData,actions:{editCartItem:async e=>a.pushInteraction({type:"EDIT_CART_ITEM",payload:e}),processItemFeedback:async e=>a.pushInteraction({type:"PROCESS_ITEM_FEEDBACK",payload:e}),confirmCartUpdates:async e=>a.pushInteraction({type:"CONFIRM_CART_UPDATES",payload:e}),syncCart:async e=>a.pushInteraction({type:"SYNC_CART",payload:e})}}}}),[t.liveOrderQueue.state,a,l.rawCartData,l.status])}},95333:(e,t,r)=>{"use strict";r.d(t,{v:()=>u});var n=r(74622),s=r(60849),i=r(62459),a=r(92431),o=r(87696),c=r(34626),l=r(97546);const u=()=>{const{user:e}=(0,c.Z)(),t=e.data?.isLoggedIn,r=(0,a.Z)(),u=(0,o.yU)(r),d=(0,i.Z)("getComplianceAds"),h=(0,s.ip)({...l.G.eats_web_gdpr_consent_modal,defaultValue:!1}),p=t&&h&&!u,{data:g}=(0,n.useQuery)("getComplianceAds",(()=>d.request("getComplianceAds",null)),{enabled:p});return!!t&&(!!h&&(!u&&g?.value))}},48750:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>_e});var n=r(36151);const s=()=>{},i=e=>!(!e||"object"!=typeof e)&&("function"==typeof e.timing&&"function"==typeof e.increment),a=()=>({increment:s,timing:s}),o=e=>{try{const t=JSON.parse(e);return"object"==typeof t?t:{}}catch(e){return{}}},c=e=>{let t=!1;return(r,n)=>{t||(t=!0,e(r,n))}},l=(e,t)=>{if(e.xhr.readyState===e.xhr.UNSENT||e.xhr.readyState===e.xhr.DONE)return;Date.now()-e.lastResponse>t&&e.xhr.abort(),setTimeout(l,t,e,t)};function u(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}const d={ACK:"/events/ack",RECV:"/events/recv"},h={dca1:"dca",phx2:"phx"},p=(e,t,r)=>{switch(r){case"sameorigin":return`/ramen${h[t]}${d[e]||""}`;case"breeze":return`https://ramen${h[t]}.uber.com${d[e]||""}`;case"openid":return`https://ramen${h[t]}.uberinternal.com${d[e]||""}`;default:return`https://cn-${t}.uber.com/ramen${d[e]||""}`}},g={altitude:"x-uber-device-location-altitude",app:"x-uber-client-name",authorization:"Authorization",device:"x-uber-device",deviceId:"x-uber-device-id",deviceIds:"x-uber-device-ids",deviceModel:"x-uber-device-model",deviceOS:"x-uber-device-os",epoch:"x-uber-device-epoch",language:"x-uber-device-language",latitude:"latitude",longitude:"longitude",origin:"x-uber-origin",regionId:"x-uber-region-id",service:"x-uber-push-service",source:"x-uber-source",token:"x-uber-token",uuid:"x-uber-uuid",version:"x-uber-client-version",screenflowVersion:"x-uber-screenflow-client-version",appVariant:"x-uber-app-variant"},f=e=>(e.hasOwnProperty("device")||(e.device="web"),Object.keys(e).map((t=>{const r=g[t],n=e[t];if(r&&n)return[r,e[t]]})).filter(Boolean)),_=(e,t)=>e.slice(-1)===t?e.slice(0,-1):e,m=new RegExp(/\n\n$/),y=new RegExp(/^(close|data|event|id|):\s?(.*)/),v=e=>{let[t,r]=["",""];const n=y.exec(e);return n&&3===n.length&&([,t,r]=n),e.length>0&&!e.includes(":")&&(t=e),[t,r]},b=(e,t,r)=>{switch(t){case"event":e.name=r;break;case"data":e.data=`${e.data||""}${r}\n`;break;case"id":e.id=r}return e},S=e=>{let t={data:"",name:""},r="";return n=>{if(r+=n,m.test(r)){r=_(r,"\n");for(const n of r.split("\n")){if(""===n){t.data=_(t.data||"","\n"),e(t),t={data:"",name:""},r="";continue}if(":"===n[0])continue;const[s,i]=v(n);t=b(t,s,i)}}}};var C=r(55089);const x="undefined"!=typeof process&&process.release&&"node"===process.release.name,w=e=>"function"==typeof e?e():null,E=(e,t,r)=>({code:t,error:r,stopped:e});class k{constructor(e){this.callback=e.callback,this.user=e.user,this.manager=e.manager,this.authenticationMethod=e.authenticationMethod,this.session={active:!0,datacenter:e.datacenter,seq:0,uuid:(0,C.Z)()},this.m3Client=i(e.m3Client)?e.m3Client:a(),this.initTimestamp=Date.now(),this.didFirstPoll=!1,e.returnHeaders&&(this.returnHeaders=!0),this.authenticateUser((e=>{if(e)return this.session.active=!1,void this.callback(e,null,this);this.maybeSendAck=((e,t)=>{let r=Date.now();return n=>(Date.now()-r>=t&&(r=Date.now(),e()),n)})(this.sendAck,3e4),this.retryPolling()}))}authenticateUser=e=>{if(!this.authenticationMethod||"sameorigin"===this.authenticationMethod)return void e();if("undefined"==typeof fetch||fetch.polyfill||x)return void e(E(!0,"unsupported_browser"));const t=p("ACK",this.session.datacenter,this.authenticationMethod);fetch(`${t}?seq=-1`,{credentials:"include",mode:"no-cors"}).then((e=>e.ok?e:fetch(`${t}?seq=-1`,{credentials:"include"}))).then((t=>{const r=200===t.status?void 0:E(!0,"authentication_failed");e(r)})).catch((t=>e(E(!0,"authentication_failed",t))))};startPolling=e=>{const t=`${p("RECV",this.session.datacenter,this.authenticationMethod)}?seq=${this.session.seq}`,r=[...f(this.user),["cache-control","no-cache"],["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean);this.session.stopPolling=((e,t)=>{const r=new XMLHttpRequest,n=c(t.onDisconnect),s=c(t.onConnect),i={lastResponse:Date.now(),xhr:r};let a=0,o=0;return r.onreadystatechange=()=>{if(r.readyState===r.LOADING||r.readyState===r.DONE){r.status<400&&s(null),i.lastResponse=Date.now();const e=r.responseText.substring(o);o=r.responseText.length,t.callback(e)}const e=r.readyState<a;if(a=Math.max(r.readyState,a),r.readyState===r.DONE||e){let s={connectionClosed:r.readyState===r.DONE,responseText:r.responseText,statusCode:r.status,timestamp:(new Date).toISOString(),userAborted:e};t.returnHeaders&&(s={...s,requestHeaders:r._headers,responseHeaders:r.responseHeaders}),n(null,s)}},r.onerror=e=>{r.abort(),n(new Error(e))},r.open("GET",e),r.withCredentials=!0,t.headers.map((e=>{let[t,n]=e;return r.setRequestHeader(t,n)})),r.send(),i.lastResponse=Date.now(),l(i,t.disconnectInterval),()=>r.abort()})(t,{callback:u(S(this.handleEvent),this.maybeSendAck),disconnectInterval:2e4,headers:r,onDisconnect:e,returnHeaders:this.returnHeaders,onConnect:()=>{this.manager&&this.manager.notifyConnection(this)}})};retryPolling=()=>{const e=Date.now();this.m3Client.increment("request",{method:"recv"}),this.didFirstPoll||(this.m3Client.timing("client-ready",Date.now()-this.initTimestamp),this.didFirstPoll=!0),this.startPolling(((t,r)=>{this.session.active?(t?this.callback(E(!1,"client_error",t),null,this):this.callback(E(!1,"client_disconnected",r),null,this),this.m3Client.timing("latency",Date.now()-e,{method:"recv"}),setTimeout(this.retryPolling,5e3)):this.callback(E(!0,"session_inactive",t),null,this)}))};sendAck=()=>{const e=p("ACK",this.session.datacenter,this.authenticationMethod),t=Date.now();this.m3Client.increment("request",{method:"ack"}),((e,t,r)=>{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(n.readyState===n.DONE){if(n.status<200||n.status>=300){let e={message:n.responseText,status:n.status};return t.returnHeaders&&(e={...e,requestHeaders:n._headers,responseHeaders:n.responseHeaders}),void r(e)}r(null,o(n.responseText))}},n.open(t.method,e),n.timeout=t.timeout||3e4,n.withCredentials=!0,t.headers.map((e=>{let[t,r]=e;return n.setRequestHeader(t,r)})),n.send(t.body||null)})(`${e}?seq=${this.session.seq}`,{headers:[...f(this.user),["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean),method:"GET",returnHeaders:this.returnHeaders},(e=>{e&&this.callback(E(!1,"ack_failed",e),null,this),this.m3Client.timing("latency",Date.now()-t,{method:"ack"})}))};handleEvent=e=>{if((e=>!(e.name||e.data||e.seq))(e))return;if("close"===e.name)return void w(this.session.stopPolling);const{msg:t}=o(e.data);"rmn-msg-v1"===e.name&&Array.isArray(t)?t.map(this.handleMessage):this.callback(E(!1,"unrecognised_message",e),null,this)};handleMessage=e=>{Number.isFinite(e.seq)&&e.seq>this.session.seq&&(this.session.seq=e.seq),this.callback(null,e,this)};stop=()=>{this.session.active=!1,w(this.session.stopPolling)}}var O=r(7858),D=r.n(O);const I=["phx2","dca1"];const Z=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.user)throw new Error("RamenJS init error: `options.user` is required");if(!e.user.app)throw new Error("RamenJS init error: `options.user.app` is a required field");this.handlers={message:[],connect:[],disconnect:[],error:[]},this.clients=[],this.disconnectionTimeout=e.disconnectionTimeout||15e3,this.user=e.user;const t=e.dc||e.datacenter||I;return this.dcs=(Array.isArray(t)?t:[t]).reduce(((e,t)=>(e[t]={status:"disconnected",timeout:null},e)),{}),this.authenticationMethod=e.authenticationMethod||"sameorigin",this.m3Client=i(e.m3Client)?e.m3Client:a(),this.mockedClient=e.mockedClient||!1,this}on(e,t){return this.handlers.hasOwnProperty(e)&&(this.handlers[e].push(t),this.initializeClients()),this}off(e,t){if(!this.handlers.hasOwnProperty(e))return this;if(!t&&this.handlers[e].length)this.handlers[e]=[];else{const r=this.handlers[e].indexOf(t);-1!==r&&this.handlers[e].splice(r,1)}return this.hasSubscribers()||this.stopClients(),this}initializeClients(){this.clients.length||this.mockedClient||Object.keys(this.dcs).forEach((e=>{const t=new k({datacenter:e,user:this.user,authenticationMethod:this.authenticationMethod,m3Client:this.m3Client,callback:this.handleClientResponse.bind(this),manager:this});this.clients.push(t)}))}handleClientResponse(e,t,r){if(e){const t=r.session.datacenter;this.dcs[t]&&(this.dcs[t].lastError=e,this.dcs[t].timeout||"disconnected"===this.dcs[t].status||(this.dcs[t].timeout=setTimeout((()=>{this.dcs[t].status="disconnected",this.dcs[t].timeout=null,this.trigger("disconnect",{...this.getConnectionStatus(),error:this.dcs[t].lastError},r)}),this.disconnectionTimeout))),this.trigger("error",e,r)}else if(t){let e=t.msg;try{e=JSON.parse(`${e}`)}catch(e){this.trigger("error",`parsing error ${e}`,r)}this.trigger("message",{...t,msg:e},r)}}trigger(e,t,r){const n=r?{dc:D()(r,"session.datacenter")}:{};this.handlers[e].forEach((e=>{e(t,n)}))}stopClients(){}hasSubscribers(){for(let e of Object.keys(this.handlers))if(this.handlers[e].length)return!0;return!1}getConnectionStatus(){let e=!1,t=!1;return{details:Object.keys(this.dcs).reduce(((r,n)=>{const s=this.dcs[n].status;return"connected"===s?t=!0:e=!0,r[n]=s,r}),{}),status:t?e?"limited":"connected":"disconnected"}}notifyConnection(e){const t=e.session.datacenter,r=D()(this.dcs[t],"timeout");clearTimeout(r);let n="connected"!==D()(this.dcs[t],"status");this.dcs[t]={status:"connected",timeout:null,lastError:null},n&&this.trigger("connect",this.getConnectionStatus(),e)}};var T=r(91631),A=r(74622),$=r(68739),H=r(49181);var M=r(34626),R=r(87444),P=r(63658),L=r(9580),N=r(58984),B=r(15070),z=r(47986),U=r(33535),F=r(15649),q=r(55811),V=r(71051),j=r(87696),G=r(92431),Q=r(94813),X=r(94131),K=r(47566),W=r(17217),Y=r(24757),J=r(71041),ee=r(66525),te=r(72843),re=r(1798);const ne=["pendingRating","ratingSubmitted","orderRating"];var se=r(14362),ie=r(60849),ae=r(92870),oe=r(12545),ce=r(24316),le=r(71576),ue=r(27871),de=r(96881),he=r(44997),pe=r(6264),ge=r(76150);function fe(e,t){return e?"postmates":t?"orchid":"ubereats"}const _e=()=>{const e=(0,G.Z)(),t=(0,F.Z)(),r=(0,U.ZP)(),s=(0,T.k6)(),i=(0,Q.TH)(),a=(0,$.G2)(H.EK),{user:o}=(0,M.Z)(),c=o.data?.isLoggedIn;let l=(0,R.Z)("web_ramen");const u=(0,R.Z)("nsw_age_verification"),d=(0,ie.ip)({...ae.L.checkout_2fa_redirect_ramen,defaultValue:!1}),h=(0,ie.ip)({...de.s.enable_web_live_order_editing_ramen_push,defaultValue:!1}),p=(0,N.I0)(),{setActiveDraftOrder:g}=(0,ce.Z)(),f=(0,le.Z)("getDraftOrderByUuidV2"),_=(0,A.useQueryClient)(),{hideSidebarCart:m}=(0,ge.Lb)(),y=(0,B.v)((e=>{let{ramen:t}=e;return t})),v=(0,n.useRef)(0),b=(0,n.useRef)(null),S=(0,n.useRef)({}),x="postmates"===(0,q.Z)(),w=(0,se.Z)(),E=(0,j.kR)(e),k=function(){const e=(0,R.Z)("eater_message_interstitials"),t=(0,Y.Z)(),r=(0,U.ZP)(),s=(0,re.Z)(),{search:i,pathname:a}=(0,Q.TH)(),{getEaterMessageInterstitialSessionCapper:o}=(0,J.Z)(),{isSavingsLanding:c,isSavingsLandingInterstitial:l}=(0,ee.Z)(),u=c||l,d=(0,n.useCallback)((e=>Boolean((0,T.LX)(a,e))),[a]);return(0,n.useCallback)((n=>{if(!n?.messages?.length)return!1;const{surface:a,surfaceId:c,message:l}=n.messages[0]||{},h=t({surface:a,surfaceId:c,...l});s&&r("eats:eater_message_ramen_log",{eaterMessage:{ramenMsg:JSON.stringify(n),surface:c||X.cx.UNKNOWN}});const p=String(te.parse(i)[z.FSm.modalName]),g=ne.includes(p),f=Boolean(h),_=h?.payload,m="modalPayload"===_?.type&&_?.modalPayload.uuid||"",{hasPromotionBanner:y,hasExpandedModalState:v}=(0,K.X1)(h),b=!u&&(!y||v);switch(c){case X.cx.HOME_FEED_PUSH_BOTTOM_MODAL:return e&&!o(X.cx.HOME_FEED_PUSH_BOTTOM_MODAL,m)&&f&&b&&d(W.r.home_feed);case X.cx.VERTICAL_FEED_PUSH_BOTTOM_MODAL:return e&&!o(X.cx.VERTICAL_FEED_PUSH_BOTTOM_MODAL,m)&&f&&b&&d(W.r.vertical_feed);case X.cx.ORDER_TRACKING_PUSH_BOTTOM_MODAL:return e&&!o(X.cx.ORDER_TRACKING_PUSH_BOTTOM_MODAL,m)&&f&&!d(W.r.vertical_feed);case X.cx.ORDER_COMPLETE_PUSH_BOTTOM_MODAL:return e&&!o(X.cx.ORDER_COMPLETE_PUSH_BOTTOM_MODAL,m)&&!g&&f;default:return!1}}),[i,s,e,o,r,t,u,d])}(),O=(0,n.useContext)(V.k7),{liveOrderUuid:D}=(0,he.W)(),I=(0,pe.W)({getCartFrom:"workflowId",workflowId:D}),_e=(0,n.useCallback)((e=>{O.set("chatMessageUuid",e)}),[O]),me=(0,n.useCallback)((async e=>{switch(e.type){case"chat":return void("system"!==e.msg.messageType&&_e(e.uuid));case"eater_message_service_screen_messages":if(k(e.msg)){const t=(e.msg.messages||[])[0].surfaceId||"";s.push((0,z.tLx)(i,t))}return;case"home_membership_modal":return r("eats:home_membership_modal_ramen_message_received"),void s.push((0,z.bAD)(i,e.uuid));case"push_web_eats_verification_result":return void(u&&s.push((0,z.fDg)(i,e.msg.flowStatus)));case"eater_draft_order":{const t=e.msg;if(d&&t?.action===oe.GW.NAVIGATE_TO_CHECKOUT){const e=t?.draftOrder?.uuid||"";f({draftOrderUUID:e}).then((async()=>{g(e),r("eats:eater_draft_order_ramen_push_redirect_success"),s.replace((0,z.Zs0)(i)),await _.invalidateQueries(ue.Qg.draftOrder(e))})).catch((e=>{r("eats:eater_draft_order_ramen_push_redirect_error",{error:e})}))}return}case"eater_all_order_entities":if(h){if(!D)return;const t=e.msg?.orderEntitiesView;Boolean(t?.find((e=>e.orderIdentifiers?.workflowUUID===D)))||(m(),await _.invalidateQueries(["getActiveOrdersV1"]),s.replace((0,z._u3)(i,{uuid:D})))}return;case"eater_order_entity":if(h){const t=e.msg?.orderEntity,{workflowUUID:n,orderUUID:s}=t?.orderIdentifiers||{};if(!(n===D&&t&&s&&I&&n))return;"AVAILABLE"!==I.status&&"SYNCING"!==I.status&&"LOADING"!==I.status||I.actions.syncCart({rawCartData:{liveOrder:t},workflowUUID:n,orderUUID:s}).catch((e=>r("eats:live_order_cart_sync_failed",{error:e})))}return;default:return}}),[_e,k,s,i,r,u,d,f,_,g,h,I,D,m]);return(0,n.useEffect)((()=>{(async()=>{if(y.messageQueue.length>0&&v.current<y.messageQueue.length){for(let e=v.current;e<y.messageQueue.length;e++){const t=y.messageQueue[e]||"",r=y.messageMap[t];r&&await me(r)}v.current=y.messageQueue.length}})().catch((e=>{r("eats:ramen_handle_function_error",{error:e})}))}),[r,me,y]),(0,n.useEffect)((()=>{l&&c&&!b.current&&(b.current=new Z({m3Client:a,user:{app:"eats_web",device:"eats-web",deviceId:E||(0,C.Z)(),language:t,origin:"eats-web",source:"eats-web",version:"1.0.0",appVariant:fe(x,w)}}).on("message",(e=>(function(e,t,r){e&&(r.current[e.uuid]||t((0,L.l)(e)),r.current[e.uuid]=!0)}((0,P.n)(e),p,S),()=>{b.current&&b.current.off("message")}))))}),[p,c,l,t,a,x,w,E,r]),null}},21926:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(60849),s=r(97763);const i=()=>(0,n.ip)({...s.J.is_repeat_group_order_enabled,defaultValue:!1})},98462:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(60849),s=r(97763);const i=()=>(0,n.ip)({...s.J.buy_an_item_enabled,defaultValue:!1})},47885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(60849),s=r(41063);const i=()=>{const e={...s.v.store_precheckout_bundling,defaultValue:!1},t={...s.v.eats_web_store_pcb_be_driven_limit_reached,defaultValue:!1};return{isStorePrecheckoutBundlingEnabled:(0,n.ip)(e),isBeDrivenLimitReachedDialogEnabled:(0,n.ip)(t)}}},69611:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(36151),s=r(15070),i=r(71051),a=r(27130),o=r(79857);function c(){const e=(0,o.Z)(),t=(0,s.v)((e=>{let{embeddedFeatures:t}=e;return t})),r=(0,n.useContext)(i.k7),c=(0,a.Z)("emitXlbHomeFeedEventV1");return(0,n.useCallback)((n=>{let{source:s}=n;if(!e)return;let i=!0;if(t.prefetch){r.set(`uev2.xlb_${s}_impression`,"true");const e=r.get("uev2.xlb_feed_loaded_impression"),t=r.get("uev2.xlb_user_triggered_impression");i=e&&t}i&&c()}),[e,t.prefetch,r,c])}},63658:(e,t,r)=>{"use strict";function n(e){if(!e||"object"!=typeof e)return null;const t=function(e){const{priority:t,seq:r,uuid:n}=e;if(!t||!r||!n)return null;return{priority:t,seq:r,uuid:n}}(e);if(!t)return null;switch(e.type){case"eater_menu_actions":return{type:"eater_menu_actions",...t,msg:e.msg||{}};case"chat":return{type:"chat",...t,msg:e.msg||{}};case"eater_message_service_screen_messages":return{type:"eater_message_service_screen_messages",...t,msg:e.msg||{}};case"home_membership_modal":return{type:"home_membership_modal",...t,msg:e.msg||{}};case"push_web_eats_verification_result":return{type:"push_web_eats_verification_result",...t,msg:e.msg||{}};case"eater_draft_order":return{type:"eater_draft_order",...t,msg:e.msg||{}};case"eater_order_entity":return{type:"eater_order_entity",...t,msg:e.msg||{}};case"eater_all_order_entities":return{type:"eater_all_order_entities",...t,msg:e.msg||{}};default:return null}}r.d(t,{n:()=>n})}}]);