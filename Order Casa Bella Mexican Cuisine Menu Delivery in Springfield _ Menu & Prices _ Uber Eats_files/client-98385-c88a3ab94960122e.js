"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[98385],{31723:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(36151),n=r(73518),a=r(33990);function o(e,t){return(0,a.tZ)(n.Z,{viewBox:"0 0 9 12",ref:t,...e,children:(0,a.tZ)("path",{d:"M8.9 6l-4.6 6H.5l4.6-6L.5 0h3.8l4.6 6z"})})}const l=i.forwardRef(o)},15208:(e,t,r)=>{r.d(t,{Z:()=>s,b:()=>l});var i=r(43193),n=r(94579),a=r(91931),o=r(33990);const l=(0,a.zo)("div",(e=>{let{$ignorePadding:t}=e;return{marginLeft:`-${n.lK}`,marginRight:`-${n.lK}`,...t?{}:{paddingLeft:n.lK,paddingRight:n.lK}}})),d=(0,a.zo)("div",(e=>({maxWidth:e.$maxWidth?e.$maxWidth:n.eo,minWidth:n.pA,margin:"0 auto",boxSizing:"border-box",...e.$ignorePadding?{}:{padding:`0 ${n.lK}`}}))),s=(0,a.Le)(d,(e=>i.forwardRef((function(t,r){return(0,o.tZ)(e,{ref:r,...t})}))))},64420:(e,t,r)=>{r.d(t,{Z:()=>g});var i=r(74622),n=r(71576),a=r(53811),o=r(8690),l=r(54592),d=r(38172),s=r(21025),c=r(62459),p=r(92431),h=r(34626),u=r(87696);const g=()=>{const e=(0,c.Z)("removeMemberFromDraftOrderV2"),t=(0,c.Z)("addMemberToDraftOrderV2"),r=(0,n.Z)("getDraftOrderByUuidV2"),g=(0,i.useQueryClient)(),{clearRepeatOrder:m}=(0,o.Z)(),f=(0,s.f)(),Z=(0,p.Z)(),{user:x}=(0,h.Z)(),v=x.data?.isLoggedIn;return{removeMemberFromDraftOrder:(0,i.useMutation)((t=>e.request("removeMemberFromDraftOrderV2",t)),{onSuccess:(e,t)=>{"repeatOrderTemplateUUID"in t&&g.invalidateQueries([...l.H,t.repeatOrderTemplateUUID]),t.draftOrderUUID&&r({draftOrderUUID:t.draftOrderUUID})}}),leaveDraftOrder:(0,i.useMutation)((t=>e.request("removeMemberFromDraftOrderV2",t)),{onSuccess:(e,t)=>{g.invalidateQueries(a.x),"repeatOrderTemplateUUID"in t&&m(t.repeatOrderTemplateUUID),g.invalidateQueries(d.IG)}}),addMemberToDraftOrder:(0,i.useMutation)((e=>t.request("addMemberToDraftOrderV2",e)),{onSuccess:(e,t)=>{"repeatOrderTemplateUUID"in t?(g.invalidateQueries([...l.H,t.repeatOrderTemplateUUID]),f()):g.invalidateQueries(a.x),"draftOrderUUID"in t&&r({draftOrderUUID:t.draftOrderUUID}).then((e=>{let{draftOrder:t}=e;(0,u.zX)(Z,t,Boolean(v))}))}})}}},19206:(e,t,r)=>{r.d(t,{Z:()=>E});var i=r("__fusion__567"),n=r(85341),a=r(46933),o=r(52246),l=r(86547),d=r(31723),s=r(40606),c=r(91931),p=r(29194),h=r(76150),u=r(52200),g=r(31913),m=r(65717),f=r(94813),Z=r(23892),x=r(56349),v=r(1540),O=r(91066),y=r(10312),b=r(57900),w=r(33990);const C=(0,c.zo)(n.Z,(e=>{let{$isMobile:t,$isXlb:r}=e;return{maxHeight:t?r?"85vh":"75vh":"auto"}})),_=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",position:"sticky",top:0,zIndex:1,background:t.colors.backgroundPrimary,borderBottom:`2px solid ${t.colors.borderOpaque}`,...t.typography.LabelLarge}})),U=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{height:t.sizing.scale1600,width:t.sizing.scale1600,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}})),z=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:1,alignItems:"center",paddingRight:t.sizing.scale800,minWidth:"0"}})),S=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,color:t.colors.contentPrimary,flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}})),$=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,paddingLeft:t.sizing.scale800}})),D=(0,c.zo)("ul",{display:"flex",flexDirection:"column",listStyle:"none"}),k=(0,c.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{padding:`${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale300} ${t.sizing.scale600}`,textAlign:"rtl"===r?"right":"left"}})),M=(0,c.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),I=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,height:t.sizing.scale1600,width:t.sizing.scale1600,margin:t.sizing.scale600,borderRadius:"50%",overflow:"hidden",position:"relative"}})),B=(0,c.zo)("div",{position:"absolute",top:0,left:0,right:0,bottom:0}),R=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",flexGrow:1,minWidth:"0",minHeight:t.sizing.scale2400,overflow:"hidden",borderBottom:`1px solid ${t.colors.borderOpaque}`}})),P=(0,c.zo)("div",(e=>{let{$direction:t}=e;return{minWidth:"0",display:"flex",flexDirection:"column",flexGrow:1,textAlign:"rtl"===t?"right":"left"}})),T=(0,c.zo)("div",{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),H=(0,c.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,alignItems:"center",flexDirection:"row",paddingRight:t.sizing.scale800,paddingLeft:t.sizing.scale600}})),L=(0,c.zo)(o.rU,(e=>{let{$theme:t}=e;return{color:t.colors.action,...t.typography.LabelMedium}})),E=e=>{let{onBackClick:t,onCartSelect:r,isMobile:o,mealPlanUUID:c}=e;const E=(0,f.TH)(),{query:A}=(0,v.M)({mealPlanUUID:c,draftOrderPayloadType:{},screenId:l.DY.CARTS_VIEW}),{isCreator:X}=(0,O.Z)(c),V=(0,y.P1)(E,c),{closeSidebarCart:W,closeCartDropdown:F}=(0,h.Lb)(),G=(0,p.gm)(),N=(0,m.Z)();return(0,w.tZ)(s.a,{source:A,loaded:e=>{let{draftOrderPayload:l}=e;const s=l?.view;return(0,w.BX)(C,{$isMobile:o,$isXLB:N,children:[(0,w.BX)(_,{children:[(0,w.tZ)(U,{onClick:e=>{e.stopPropagation(),t?.()},children:(0,w.tZ)(i.default,{})}),(0,w.BX)(z,{children:[(0,w.tZ)(S,{$direction:G,children:s?.title}),(0,w.tZ)($,{children:(0,w.tZ)(L,{to:V,onClick:()=>{F(),W()},children:X?(0,w.tZ)(a.v,{id:"go.manage"}):(0,w.tZ)(a.v,{id:"carousel.see_all"})})})]})]}),(0,w.tZ)(n.Z,{children:s?.emptyState?(0,w.tZ)(b._,{emptyState:s?.emptyState}):s?.sections?.map(((e,t)=>(0,w.BX)(D,{children:[(0,w.tZ)(k,{$direction:G,children:(0,w.tZ)(g.ZP,{text:e.title})}),e.rows?.map(((e,t)=>(0,w.BX)(M,{onClick:()=>{const i=e.button?.action;"openCart"===i?.type&&i?.openCart?.draftOrderUUID&&r(i.openCart.draftOrderUUID,t)},children:[(0,w.BX)(I,{children:[(0,w.tZ)(u.SZ,{richIllustration:e.leadingIllustration}),(0,w.tZ)(B,{})]}),(0,w.BX)(R,{children:[(0,w.BX)(P,{$direction:G,children:[(0,w.tZ)(T,{children:(0,w.tZ)(g.ZP,{text:e.title,whiteSpace:"nowrap"})}),e.taglines?.map(((e,t)=>(0,w.tZ)(T,{children:(0,w.tZ)(g.ZP,{text:e,whiteSpace:"nowrap"})},t)))]}),(0,w.tZ)(H,{children:(0,w.tZ)(d.Z,{size:12,color:"primary400"})})]})]},t)))]},t)))})]})},loading:()=>(0,w.tZ)(x.ZP,{}),error:()=>(0,w.tZ)(Z.Z,{})})}},57900:(e,t,r)=>{r.d(t,{_:()=>Z});var i=r(85341),n=r(52200),a=r(31913),o=r(47073),l=r(91931),d=r(15070),s=r(64420),c=r(33535),p=r(94813),h=r(91631),u=r(51434),g=r(10312);var m=r(33990);const f=(0,l.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{display:"flex",flex:1,alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",gap:t.sizing.scale500,marginTop:r?t.sizing.scale600:t.sizing.scale1600,marginBottom:t.sizing.scale800}})),Z=e=>{let{emptyState:t}=e;const{isMobile:r}=(0,d.v)((e=>{let{device:t}=e;return t})),{title:l,subtitle:Z,button:x,illustration:v,action:O}=t,{handleMealPlanViewOrderClick:y}=(()=>{const{addMemberToDraftOrder:e}=(0,s.Z)(),t=(0,c.ZP)(),r=(0,p.TH)(),i=(0,h.k6)();return{handleMealPlanViewOrderClick:e=>{if(e&&e.type)switch(e.type){case u.MQ.seeAll:i.push((0,g.FO)(r,String(e.seeAll.mealPlanUUID)));break;case u.MQ.createOrder:t("eats:meal_plan_create_order_click",{source:"order_view"}),i.push((0,g.n)(r,String(e.createOrder.mealPlanUUID)))}},isLoading:e.isLoading}})();return(0,m.BX)(f,{$isMobile:r,children:[(0,m.tZ)(n.SZ,{richIllustration:v}),(0,m.tZ)(i.Z,{display:"flex",flexDirection:"column",children:(0,m.tZ)(a.ZP,{text:l})}),(0,m.tZ)(i.Z,{maxWidth:"500px",children:(0,m.tZ)(a.ZP,{text:Z})}),x&&O?(0,m.tZ)(i.Z,{width:"auto",marginTop:"scale500",children:(0,m.tZ)(o.Z,{viewModel:x,onClick:e=>{y(O)}})}):null]})}},51434:(e,t,r)=>{r.d(t,{Ap:()=>x,B3:()=>Z,EJ:()=>f,G8:()=>s,Gl:()=>i,MQ:()=>m,Nx:()=>l,Tj:()=>h,Uw:()=>c,W5:()=>o,WM:()=>g,dM:()=>d,fT:()=>n,ff:()=>p,jF:()=>a,q6:()=>v,xZ:()=>u});const i="https://tb-static.uber.com/prod/meal-plan/assets/Uber%20Eats%20meal%20plan%20template.csv",n=5,a={MC_HOUR_HALF:30,MC_HOUR_1:60,HOURS_2:120,MC_HOURS_3:180,HOURS_4:240,MC_HOURS_5:300,MC_HOURS_6:360,MC_HOURS_7:420,MC_HOURS_8:480,MC_HOURS_9:540,MC_HOURS_10:600,MC_HOURS_11:660,HOURS_12:720,MC_HOURS_13:780,MC_HOURS_14:840,MC_HOURS_15:900,MC_HOURS_16:960,MC_HOURS_17:1020,MC_HOURS_18:1080,MC_HOURS_19:1140,MC_HOURS_20:1200,MC_HOURS_21:1260,MC_HOURS_22:1320,MC_HOURS_23:1380,HOURS_24:1440,HOURS_48:2880},o=300,l=158,d="443px",s={PAST:"PAST",ACTIVE:"ACTIVE",UPCOMING:"UPCOMING"},c={skipEmptyLines:"greedy",delimiter:"\n"},p=25,h="395px",u="skippedEmails",g={joinOrder:"joinOrder",openCart:"openCart",openStoreFront:"openStoreFront",trackOrder:"trackOrder",viewOrder:"viewOrder",createOrder:"createOrder",unknown:"unknown"},m={seeAll:"seeAll",createOrder:"createOrder",unknown:"unknown"},f="USD",Z={Tail:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.mono400}}},Icon:{style:e=>{let{$theme:t,$isActive:r}=e;const i=r?t.sizing.scale700:t.sizing.scale400;return{width:i,height:i,lineHeight:i,borderTopLeftRadius:i,borderTopRightRadius:i,borderBottomRightRadius:i,borderBottomLeftRadius:i,backgroundColor:r?t.colors.progressStepsActiveFill:t.colors.mono400}}}},x=15,v=18},1540:(e,t,r)=>{r.d(t,{M:()=>s});var i=r(30011),n=r.n(i),a=r(74622),o=r(2237),l=r(62459);var d=r(10312);const s=e=>{const{uuid:t}=(0,d.fY)(),r=function(e,t){const r=(0,l.Z)("getMealPlanOrdersViewV1"),i=(0,o.H)("getMealPlanOrdersViewV1",e);return(0,a.useQuery)({queryKey:i,queryFn:e=>{let{queryKey:t}=e;return r.request("getMealPlanOrdersViewV1",t[1])},...t?.queryObserverOptions})}({mealPlanUUID:t,...e},{queryObserverOptions:{refetchOnMount:"always",refetchInterval:e=>{const t=e?.draftOrderPayload?.loadingState?.reloadInMs;if(t){return n().fromValue(t).toNumber()}return!1}}}),{data:i,isLoading:s}=r;return{query:r,data:i,isLoading:s}}},31111:(e,t,r)=>{r.d(t,{A:()=>y,Z:()=>b});var i=r(91931),n=r(52298),a=r(31723),o=r(29194),l=r(31913),d=r(89400),s=r(10015),c=r(19681),p=r(72179),h=r(33990);const u=(0,i.zo)("div",(e=>{let{$isMobile:t,$theme:r}=e;return{display:"flex",maxWidth:t?"100%":"315px",width:"100%",alignItems:"center",gap:r.sizing.scale600,justifyContent:"space-between",overflow:"hidden"}})),g=(0,i.zo)("div",(e=>{let{$direction:t}=e;return{justifyContent:"center",display:"flex",flex:1,flexDirection:"column",minWidth:"0",textAlign:"rtl"===t?"right":"left"}})),m=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"500px"}})),f=(0,i.zo)("div",{display:"flex",alignItems:"center"}),Z=(0,i.zo)("div",{display:"flex",alignItems:"center",flexDirection:"row"}),x=(0,i.zo)("div",{display:"flex",alignItems:"center",flexDirection:"row"}),v=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,backgroundColor:t.colors.backgroundInversePrimary,borderRadius:"50%",color:t.colors.contentInversePrimary,height:"24px",width:"24px",marginRight:"16px",display:"flex",justifyContent:"center",alignItems:"center"}})),O=(0,i.zo)("div",{alignSelf:"flex-start"}),y=e=>{let{cartView:t,isMobile:r=!1,isHovering:i=!1,hasGroupOrder:a=!1,openCartActions:f}=e;const{title:Z,tagline1:x,tagline2:v,tagline3:y,metadata:b}=t,w=(0,o.gm)(),{inCartSwitcherDraft:C}=(0,p.Z)(),_=C&&r&&f&&!a;return(0,h.BX)(u,{$isMobile:r,children:[(0,h.tZ)(s.xB,{cartView:t,isHovering:i,showBorder:Boolean(b?.openCheckoutMetadata?.bundleGroupMetadata)}),(0,h.BX)(g,{$direction:w,children:[(0,h.tZ)(m,{children:Z}),(0,h.tZ)(n.ZP,{$height:2}),(0,h.tZ)(d.Z,{badge:x,baseFont:"ParagraphSmall",truncateTextWithEllipsis:!0}),(0,h.tZ)(n.ZP,{$height:2}),(0,h.tZ)(d.Z,{badge:v,baseFont:"ParagraphSmall",truncateTextWithEllipsis:!0}),y?(0,h.BX)(h.HY,{children:[(0,h.tZ)(n.ZP,{$height:4}),(0,h.tZ)(l.ZP,{text:y})]}):null]}),_?(0,h.tZ)(O,{children:(0,h.tZ)(c.Z,{bottomSheet:r,openCartActions:f})}):null]})},b=e=>{let{cartView:t,isMobile:r=!1,isHovering:i=!1}=e;const{itemCount:n}=t;return(0,h.BX)(h.HY,{children:[(0,h.tZ)(y,{cartView:t,isMobile:r,isHovering:i}),(0,h.BX)(f,{children:[void 0!==n?(0,h.tZ)(x,{children:(0,h.tZ)(v,{children:n})}):null,(0,h.tZ)(Z,{children:(0,h.tZ)(a.Z,{size:12,color:"primary400"})})]})]})}},63346:(e,t,r)=>{r.d(t,{Z:()=>C});var i=r(43193),n=r(36151),a=r(91631),o=r(94813),l=r(91931),d=r(31111),s=r(53811),c=r(35207),p=r(33990);const h=()=>{const e=(0,s.O)().data?.topBanner;return(0,p.tZ)(c.ZP,{badge:e,padding:"20px 16px"})};var u=r(63798),g=r(8690),m=r(73472),f=r(47986),Z=r(32562),x=r(19206),v=r(10312),O=r(65014);const y=(0,l.zo)("ul",{listStyle:"none",margin:0,padding:0}),b=(0,l.zo)("li",(e=>{let{$theme:t,$isMobile:r}=e;return{padding:"16px",whiteSpace:"nowrap",":hover":{background:r?t.colors.menuFillHover:t.colors.backgroundSecondary},display:"flex",justifyContent:"space-between",cursor:"pointer",borderBottom:`1px solid ${t.colors.borderOpaque}`,":last-of-type":{borderBottom:"none"}}})),w=e=>{let{isMobile:t,index:r,cartView:n,onCartSelect:l,setCurrentCartsView:s,setMealPlanUUID:c}=e;const h=(0,a.k6)(),u=(0,o.TH)(),x=i.useRef(null),y=(0,Z.Z)(x),{setActiveCartViewForRepeatOrder:w}=(0,g.Z)(),{startTiming:C}=(0,m.K3)();return(0,p.tZ)(b,{ref:x,role:"menuitem",$isMobile:t,onClick:e=>{switch(C(O.B.CART_SELECTED_FROM_POPOVER,{shouldOverride:!0}),n.action){case"OPEN_CHECKOUT":{const e=n.metadata?.openCheckoutMetadata?.draftOrderUUID||n.metadata?.openCheckoutMetadata?.bundleGroupMetadata?.primaryDraftOrderUUID;e&&l(e,r);break}case"OPEN_REPEAT_ORDER_VIEW":if(w(n),t)return void h.push((0,f.ejR)(u));s("repeat_group_order"),e.stopPropagation();break;case"OPEN_MEAL_PLAN_VIEW":{const r=n.metadata?.openMealPlanViewMetadata?.mealPlanUUID;if(t)return void h.push((0,v.Q8)(u,r));c(r),s("meal_plan"),e.stopPropagation();break}default:l(n.draftOrderUUID,r)}},children:(0,p.tZ)(d.Z,{isMobile:t,isHovering:y,cartView:n})})},C=e=>{const t=(0,s.O)()?.data?.carts,[r,i]=(0,n.useState)(null),[a,o]=(0,n.useState)(""),l=(0,n.useCallback)((()=>(0,p.BX)(p.HY,{children:[(0,p.tZ)(h,{}),(0,p.tZ)(y,{role:"menu",children:t?.map(((t,r)=>(0,p.tZ)(w,{index:r,isMobile:e.isMobile,cartView:t,setCurrentCartsView:i,setMealPlanUUID:o,onCartSelect:e.onCartSelect},t.draftOrderUUID)))})]})),[t,e]);return e.isMobile?l():"repeat_group_order"===r?(0,p.tZ)(u.Z,{onBackClick:()=>{i(null)},onCartSelect:e.onCartSelect}):"meal_plan"===r?(0,p.tZ)(x.Z,{mealPlanUUID:a,onBackClick:()=>{i(null),o("")},onCartSelect:e.onCartSelect}):l()}},76686:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(43193),n=r(33535);const a=()=>{const e=(0,n.ZP)();return i.useCallback(((t,r)=>{e("eats:carts_list_cart_click",{multicart:{index:r,draftOrderUuid:t}})}),[e])}},41929:(e,t,r)=>{r.d(t,{Z:()=>p});var i=r(71110),n=r(59210),a=r(14016),o=r(91931),l=r(62091),d=r(33990);const s=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flex:1,alignItems:"center",flexDirection:"column",justifyContent:"center",paddingTop:t.sizing.scale800,paddingBottom:t.sizing.scale800}})),c=(0,o.zo)(l.Z,{width:"175px",height:"175px"});function p(e){let{message:t}=e;const o=(0,a.T)();return(0,d.BX)(s,{children:[(0,d.tZ)(c,{src:(0,i.pZ)(r(7775))}),(0,d.tZ)(n.fH,{marginTop:"0",marginBottom:"12px",children:o("eats.rgo.get_carts_view_for_eater.no_open_carts")}),(0,d.tZ)(n.Yl,{children:t})]})}},23892:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(46933),n=r(91931),a=r(33990);const o=(0,n.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"410px",padding:"24px",margin:"0 auto",whiteSpace:"normal"}),l=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingSmall,marginBottom:"8px"}})),d=(0,n.zo)("div",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),s=()=>(0,a.BX)(o,{children:[(0,a.tZ)(l,{children:(0,a.tZ)(i.v,{id:"components.genericError.title"})}),(0,a.tZ)(d,{children:(0,a.tZ)(i.v,{id:"shared.genericServerError"})})]})},56349:(e,t,r)=>{r.d(t,{DD:()=>b,ZP:()=>w,ir:()=>y,uF:()=>O});var i=r("__fusion__567"),n=r(91931),a=r(67206),o=r(97415),l=r(94579),d=r(52692),s=r(85341),c=r(33990);const p=(0,n.zo)("div",{position:"relative",zIndex:l.I_.base}),h=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{...(0,a.Z)({$theme:t}),backgroundSize:"100vw 100%",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:l.I_.background}})),u=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",...t.typography.LabelLarge}})),g=(0,n.w1)(o.CB,{height:"64px",width:"64px",display:"flex",alignItems:"center",justifyContent:"center"}),m=(0,n.zo)("div",{display:"flex",flexDirection:"column",flexGrow:1}),f=(0,n.zo)("div",{display:"flex"}),Z=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{height:"96px",width:"96px",background:`radial-gradient(circle at 50%, transparent 32px, ${t.colors.backgroundPrimary} 32px)`}})),x=(0,n.zo)("div",(e=>{let{$theme:t,$isMobile:r}=e;return{display:"flex",flexDirection:"column",flexGrow:1,marginLeft:r?`-${t.sizing.scale600}`:0,marginRight:r?`-${t.sizing.scale600}`:0}})),v=()=>(0,c.BX)(f,{children:[(0,c.tZ)(Z,{}),(0,c.BX)(x,{children:[(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"}),(0,c.tZ)(o.gD,{width:"100%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"12px"}),(0,c.tZ)(o.gD,{width:"100%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"})]}),(0,c.tZ)(o.CB,{$width:"24px",$height:"96px"})]}),O=e=>{let{rows:t=3}=e;return(0,c.BX)(p,{children:[(0,c.tZ)(h,{}),[...Array(t)].map(((e,t)=>(0,c.tZ)(v,{},t)))]})},y=e=>{let{isMobile:t}=e;return(0,c.tZ)(s.Z,{width:t?"100%":"412px",children:(0,c.BX)(p,{children:[(0,c.tZ)(h,{}),(0,c.tZ)(o.gD,{width:"100%",height:"32px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"10px"}),(0,c.tZ)(o.gD,{width:"70%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"10px"}),(0,c.tZ)(o.gD,{width:"70%",height:"20px"})]})})},b=e=>{let{isMobile:t}=e;return(0,c.BX)(c.HY,{children:[(0,c.tZ)(y,{isMobile:t}),(0,c.BX)(x,{$isMobile:t,children:[(0,c.BX)(s.Z,{position:"relative",marginLeft:"scale600",marginTop:t?"scale600":0,children:[(0,c.tZ)(h,{}),(0,c.tZ)(o.gD,{width:"220px",height:"32px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"16px"})]}),(0,c.tZ)(O,{})]})]})},w=()=>(0,c.BX)(p,{children:[(0,c.tZ)(h,{}),(0,c.BX)(u,{children:[(0,c.tZ)(g,{children:(0,c.tZ)(i.default,{})}),(0,c.BX)(m,{children:[(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"}),(0,c.tZ)(o.gD,{width:"100%",height:"20px"}),(0,c.tZ)(o.CB,{$width:"100%",$height:"22px"})]}),(0,c.tZ)(o.CB,{$width:"24px",$height:"64px"})]}),(0,c.tZ)(d.Z,{$margin:"0"}),(0,c.tZ)(v,{}),(0,c.tZ)(d.Z,{$margin:"0"}),(0,c.tZ)(v,{}),(0,c.tZ)(d.Z,{$margin:"0"}),(0,c.tZ)(v,{})]})},4502:(e,t,r)=>{r.d(t,{$:()=>Z,e:()=>f});var i=r(46933),n=r(91931),a=r(15649),o=r(59210),l=r("__fusion__560"),d=r(22395),s=r(75483),c=r(29192),p=r(60362),h=r(33990);const u=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",width:t.sizing.scale1600}})),g=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",background:t.colors.backgroundSecondary,borderRadius:t.sizing.scale200,padding:`${t.sizing.scale600} 0`,marginBottom:t.sizing.scale700}})),m=(e,t)=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t).getTime();const f=e=>{const t=new Date(e.startDate?.replace(/-/g,"/")??""),r=e?.endDate?new Date(e.endDate?.replace(/-/g,"/")??""):null;return{startDate:t,startTime:m(t,e.deliveryTimeRange?.startTime??0),endDate:r,endTime:m(t,e.deliveryTimeRange?.endTime??0)}};function Z(e){let{repeatSchedule:t}=e;const r=function(e){const t=(0,s.o)(),{frequency:r}=e,{startDate:i}=f(e),n=Object.keys(c.OG)[(i.getDay()+6)%7],a=new Date(i.getFullYear(),i.getMonth()+1,0).getDate()-i.getDate()<7?s.t.LAST:Object.keys(s.t)[Math.floor(i.getDate()/7)];return t.find((e=>!(e.id!==r||e.weekPosition&&e.weekPosition!==a||e.day&&e.day!==n)))?.label||null}(t),{startDate:n,endDate:m,startTime:Z,endTime:x}=f(t),v=(0,a.Z)(),O=e=>e.toLocaleDateString(v,{year:"numeric",month:"short",day:"numeric"});return(0,h.BX)(g,{children:[(0,h.tZ)(u,{children:(0,h.tZ)(l.default,{size:24})}),(0,h.BX)("div",{style:{},children:[(0,h.tZ)(o.Uc,{marginBottom:"4px",children:r}),(0,h.tZ)(o.aM,{color:"contentSecondary",children:(0,h.tZ)(i.v,{id:"eats.repeat_order.format.start_end_time",data:{startTime:(0,p.mr)(v,Z),endTime:(0,p.mr)(v,x)}})}),(0,h.BX)(o.aM,{color:"contentSecondary",children:[(0,h.tZ)(i.v,{id:"go.join_group_order_repeat_schedule_start_date",data:{startDate:O(n)}}),(0,h.tZ)(d.Z,{spaces:2}),m?(0,h.tZ)(i.v,{id:"go.join_group_order_repeat_schedule_end_date",data:{endDate:O(m)}}):(0,h.tZ)(i.v,{id:"repeat_group_order.no_end_date"})]})]})]})}},63798:(e,t,r)=>{r.d(t,{Z:()=>G});var i=r(36151),n=r(52246),a=r(94813),o=r(46933),l=r("__fusion__567"),d=r(31723),s=r(91931),c=r(40606),p=r(8690),h=r(52692),u=r(29194);const g=Object.freeze({UNKNOWN:"UNKNOWN",CARTS_DROPDOWN_WEB:"CARTS_DROPDOWN_WEB"});var m=r(31913),f=r(52200),Z=r(47073),x=r(56349),v=r(23892),O=r(69772),y=r(68907),b=r(54592),w=r(38172),C=r(47986),_=r(76150),U=r(41929),z=r(86830),S=r(33990);const $=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",...t.typography.LabelLarge}})),D=(0,s.zo)("div",{height:"64px",width:"64px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}),k=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:1,alignItems:"center",paddingRight:t.sizing.scale800,minWidth:"0"}})),M=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,color:t.colors.contentPrimary,flexGrow:1,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}})),I=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,paddingLeft:t.sizing.scale800}})),B=(0,s.zo)("div",(e=>{let{$isMobile:t}=e;return{overflow:"auto",maxHeight:t?"calc(75vh - 66px)":"288px"}})),R=(0,s.zo)("ul",{display:"flex",flexDirection:"column",listStyle:"none"}),P=(0,s.zo)("div",(e=>{let{$theme:t,$direction:r}=e;return{padding:`${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale300} ${t.sizing.scale600}`,textAlign:"rtl"===r?"right":"left"}})),T=(0,s.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",cursor:"pointer",":hover":{background:t.colors.menuFillHover}}})),H=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexShrink:0,height:t.sizing.scale1600,width:t.sizing.scale1600,margin:t.sizing.scale600,borderRadius:"50%",overflow:"hidden",position:"relative"}})),L=(0,s.zo)("div",{position:"absolute",top:0,left:0,right:0,bottom:0}),E=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",flexGrow:1,minWidth:"0",minHeight:"95px",overflow:"hidden",borderBottom:`1px solid ${t.colors.borderOpaque}`}})),A=(0,s.zo)("div",(e=>{let{$direction:t}=e;return{minWidth:"0",display:"flex",flexDirection:"column",flexGrow:1,textAlign:"rtl"===t?"right":"left"}})),X=(0,s.zo)("div",{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}),V=(0,s.zo)("div",{display:"flex",flexShrink:0,alignItems:"center",flexDirection:"row",paddingRight:"24px",paddingLeft:"16px"}),W=(0,s.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentInversePrimary,borderRadius:"50%",backgroundColor:"black",height:"24px",width:"24px",marginRight:"16px",display:"flex",justifyContent:"center",alignItems:"center"}})),F=(0,s.zo)(n.rU,(e=>{let{$theme:t}=e;return{color:t.colors.action,...t.typography.LabelMedium}})),G=e=>{let{onBackClick:t,onCartSelect:r,isMobile:n}=e;const s=(0,a.TH)(),G=(0,i.useRef)(!1),{repeatOrderTemplateUUIDs:N}=(0,p.Z)(),{isRepeatOrderParticipant:q,billSplitOption:j}=(0,b.Z)(N[0]),Q=1===N.length,K=(0,w.ci)({repeatOrderTemplateUUIDs:N,screenID:g.CARTS_DROPDOWN_WEB}),{handleRepeatOrderClick:Y}=(0,y.G)(),{closeSidebarCart:J,closeCartDropdown:ee}=(0,_.Lb)(),{logSelectRepeatOrderCartView:te}=(0,z.E)();(0,i.useEffect)((()=>{K.isError&&K.remove()}),[K,K.isError]),(0,i.useEffect)((()=>{j&&!G.current&&(te(N,q,j),G.current=!0)}),[j,q,te,N]);const re=e=>{const t=(0,C.saK)(s,1===N.length?N[0]:void 0);return q?(0,S.tZ)(F,{to:t,onClick:()=>{ee(),J()},children:(0,S.tZ)(o.v,{id:"carousel.see_all"})}):Q?[...e??[]].reverse().map(((e,t)=>{let{button:r,action:i}=e;return r?(0,S.tZ)(Z.Z,{viewModel:r,onClick:()=>Y(i)},t):null})):(0,S.tZ)(F,{to:t,onClick:()=>{ee(),J()},children:(0,S.tZ)(o.v,{id:"go.manage"})})},ie=(0,u.gm)();return(0,S.tZ)(c.a,{source:K,loaded:e=>(0,S.BX)(S.HY,{children:[(0,S.BX)($,{children:[(0,S.tZ)(D,{onClick:e=>{e.stopPropagation(),t?.()},children:(0,S.tZ)(l.default,{})}),(0,S.BX)(k,{children:[(0,S.tZ)(M,{$direction:ie,children:e.title}),(0,S.tZ)(I,{children:re(e.navigationBarButtons)})]})]}),(0,S.tZ)(h.Z,{$height:"2px",$margin:"0"}),(0,S.tZ)(B,{$isMobile:n,children:e.emptyCartMessage?(0,S.tZ)(U.Z,{message:e.emptyCartMessage}):e.sections?.map(((e,t)=>(0,S.BX)(R,{children:[Q?null:(0,S.tZ)(P,{$direction:ie,children:(0,S.tZ)(m.ZP,{text:e.title})}),e.rows?.map(((e,t)=>(0,S.BX)(T,{onClick:()=>{"openCheckout"===e.tapAction?.type&&e.tapAction.openCheckout?.draftOrderUUID&&r(e.tapAction.openCheckout.draftOrderUUID,t)},children:[(0,S.BX)(H,{children:[(0,S.tZ)(f.SZ,{richIllustration:e.leadingIllustration}),(0,S.tZ)(L,{children:(0,S.tZ)(O.XO,{})})]}),(0,S.BX)(E,{children:[(0,S.tZ)(A,{$direction:ie,children:[e.title,e.tagLine1,e.tagLine2].map(((e,t)=>e?(0,S.tZ)(X,{children:(0,S.tZ)(m.ZP,{text:e,whiteSpace:"nowrap"})},t):null))}),(0,S.BX)(V,{children:[void 0!==e.itemCount?(0,S.tZ)(W,{children:e.itemCount}):null,(0,S.tZ)(d.Z,{size:12,color:"primary400"})]})]})]},t)))]},t)))})]}),loading:()=>(0,S.tZ)(x.ZP,{}),error:()=>(0,S.tZ)(v.Z,{})})}},69772:(e,t,r)=>{r.d(t,{AZ:()=>s,Nn:()=>g,XO:()=>h,eN:()=>c,mt:()=>m,td:()=>d,zJ:()=>u});var i=r("__fusion__865"),n=r(91931),a=r(86695),o=r(15208),l=r(33990);const d=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{backgroundColor:t.colors.borderOpaque,height:t.sizing.scale300,margin:`${t.sizing.scale600} -${t.sizing.scale600}`}})),s=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale0,backgroundColor:t.colors.borderOpaque,marginLeft:t.sizing.scale800,marginRight:t.sizing.scale1000}})),c=(0,n.zo)("div",{maxWidth:"412px",flex:1}),p=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{height:"64px",width:"64px",backgroundColor:t.colors.backgroundOverlay,color:t.colors.contentInversePrimary,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%"}})),h=()=>(0,l.tZ)(p,{children:(0,l.tZ)(i.default,{size:24})}),u=e=>(0,l.tZ)(a.zx,{isFullWidth:!0,onClick:e.onClick,isLoading:e.isLoading||!1,overrides:{BaseButton:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundNegative,":hover":{backgroundColor:t.colors.backgroundNegative}}}}},children:e.children}),g=(0,n.w1)(o.Z,{display:"flex"}),m=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",flexGrow:1,padding:`0 ${t.sizing.scale600}`,flexDirection:"column"}}))},54592:(e,t,r)=>{r.d(t,{H:()=>d,Z:()=>s});var i=r(74622),n=r(70587),a=r(8690),o=r(4502),l=r(62459);const d=["repeatOrderTemplateMetadata"],s=e=>{const t=(0,l.Z)("getDraftOrderByUuidV2"),{isRepeatGroupOrderEditing:r}=(0,a.Z)(),s=(0,i.useQuery)({queryKey:[...d,e],queryFn:async()=>{const r=await t.request("getDraftOrderByUuidV2",{draftOrderUUID:e});if("REPEAT_ORDER_TEMPLATE_STATE"!==r.draftOrder?.state)throw new Error("Not a repeat order");return r},enabled:Boolean(e)}),c=s.data?.draftOrder,p=c?.shoppingCart?.groupedItems??[],h=p.filter((e=>!e.isCreator)),u=c?.storeUuid||"",g=!1===c?.shoppingCart.isOwner,m=c?.shoppingCart.isOwner,f=c?.cartLockOptions,Z=c?.spendingLimitAmount?.amount?(c.spendingLimitAmount.amount/100).toString():"",x=c?.displayName,v=c?.billSplitOption||n.x.CREATOR_PAYS_ALL,O=c?.repeatSchedule,y=O&&r?(e=>{const{startTime:t,endDate:r}=(0,o.e)(e),i=new Date(t),n=e?.frequency;return{firstOrderScheduledForDate:i,frequency:n,endsOnDate:r?new Date(r):null}})(O):null,b=c?.handledHighCapacityOrderMetadata?.hhcOrderSize;return{query:s,isRepeatOrderParticipant:g,isRepeatOrderCreator:m,groupedItems:p,groupedItemsGuests:h,storeUuid:u,billSplitOption:v,cartLockOptions:f,spendingLimit:Z,displayName:x,repeatSchedule:O,repeatOrderOptions:y,groupSizeOption:b}}},21025:(e,t,r)=>{r.d(t,{f:()=>o});var i=r(74622),n=r(53811),a=r(99233);const o=()=>{const e=(0,i.useQueryClient)();return()=>{setTimeout((()=>{e.invalidateQueries(n.x)}),a.Ts)}}},68907:(e,t,r)=>{r.d(t,{G:()=>g});var i=r(47986),n=r(91631),a=r(94813),o=r(24316),l=r(76150),d=r(99233),s=r(86830),c=r(54592),p=r(8690),h=r(71576),u=r(5639);const g=()=>{const{setActiveDraftOrder:e}=(0,o.Z)(),{closeSidebarCart:t,toggleSidebarCartVisible:r,closeCartDropdown:g}=(0,l.Lb)(),{isMobile:m}=(0,u.hU)(),{repeatOrderTemplateUUID:f}=(0,n.UO)(),{repeatOrderTemplateUUIDs:Z}=(0,p.Z)(),{isRepeatOrderParticipant:x}=(0,c.Z)(f||Z[0]),v=(0,h.Z)("getDraftOrderByUuidV2"),O=(0,h.Z)("getStoreV1"),{logConsolidatedViewRowClick:y,logSingleRGORowClick:b,logSkipRGOButtonClick:w}=(0,s.E)(),C=(0,n.k6)(),_=(0,a.TH)();return{handleRepeatOrderClick:n=>{let a;if(n&&n.type)switch(n.type){case d.E3.openStoreFront:{const{draftOrderUUID:t}=n?.openStoreFront||{};e(t??void 0),t&&(async()=>{const e=await v({draftOrderUUID:t}),r=await O({storeUuid:e?.draftOrder?.storeUuid}),n=(0,i.gfM)(_,{storeSlug:r?.slug,storeUuid:r?.uuid});n&&C.push(n)})();break}case d.E3.openManagement:a=n.openManagement.repeatOrderTemplateUUID||"",(e=>{C.push((0,i.JPr)(_,e))})(a),g(),t(),y(a,x);break;case d.E3.openCheckout:if(e(n.openCheckout.draftOrderUUID||""),m){const e=(0,i.C45)(_),t=(0,i.nQQ)(e);C.push(t)}else g(),r();b(n.openCheckout.draftOrderUUID,x);break;case d.E3.manageGuests:C.push((0,i.pk9)(_,n.manageGuests.draftOrderUUID||""));break;case d.E3.openSettings:n.openSettings.repeatOrderTemplateUUID&&(C.push((0,i.saK)(_,n.openSettings.repeatOrderTemplateUUID)),t(),g());break;case d.E3.skip:w(n.skip.repeatOrderTemplateUUID??""),C.push((0,i.vN_)(_,"skipRepeatOrder",(0,i.nmv)(n.skip)));break;case d.E3.openBottomSheet:C.push((0,i.vN_)(_,"skipNotification",(0,i.nmv)(n.openBottomSheet)))}}}}}}]);