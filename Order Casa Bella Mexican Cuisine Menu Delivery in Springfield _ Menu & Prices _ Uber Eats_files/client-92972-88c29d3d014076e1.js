"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[92972,25856],{__fusion__859:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var o=r(36151),i=r(33990);const n=o.forwardRef((function(e,t){let{title:r="Person add",titleId:o,size:n="1em",...a}=e;return(0,i.BX)("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",ref:t,"aria-labelledby":o,...a,children:[void 0===r?(0,i.tZ)("title",{id:o,children:"Person add"}):r?(0,i.tZ)("title",{id:o,children:r}):null,(0,i.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11Zm13 5h-3v-3h-3v3h-3v3h3v3h3v-3h3v-3ZM1 23h12.1c-1-1.2-1.6-2.8-1.6-4.5 0-1.7.6-3.3 1.6-4.5H7c-3.3 0-6 2.7-6 6v3Z",fill:"currentColor"})]})}))},86547:(e,t,r)=>{r.d(t,{DY:()=>o,_b:()=>i});Object.freeze({UNKNOWN:"UNKNOWN",ACTIVE:"ACTIVE",DELETED:"DELETED",DELETING:"DELETING"});const o=Object.freeze({UNKNOWN:"UNKNOWN",MEAL_PLAN_VIEW:"MEAL_PLAN_VIEW",CARTS_VIEW:"CARTS_VIEW",MEAL_PLAN_VIEW_COMPACT:"MEAL_PLAN_VIEW_COMPACT"}),i=Object.freeze({CREATOR:"CREATOR",PARTICIPANT:"PARTICIPANT",UNKNOWN:"UNKNOWN"})},940:(e,t,r)=>{r.d(t,{Z:()=>l});var o=r(36151),i=r(73518),n=r(33990);function a(e,t){return(0,n.tZ)(i.Z,{viewBox:"0 0 20 20",ref:t,...e,children:(0,n.tZ)("path",{d:"M12 5.5L14.5 8 4.165 18.333h-2.5v-2.5L11.999 5.5zM15.893 1.658L13.83 3.72l2.475 2.475 2.062-2.063-2.475-2.474z"})})}const l=o.forwardRef(a)},34771:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(36151),i=r(70247),n=r(24316);const a=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{isBundledOrder:t,draftOrderUUID:r,primaryDraftOrderUUID:a}=(0,i.Dz)(),{setActiveDraftOrder:l}=(0,n.Z)();(0,o.useEffect)((()=>{e&&t&&r!==a&&l(a)}),[e,r,t,a,l])}},72147:(e,t,r)=>{r.d(t,{C:()=>ne});var o=r(43193),i=r(27871),n=r(91931),a=r(52945),l=r(25905),s=r(5639),d=r(40606),c=r(36151),u=r(92544),h=r(83163),p=r(92300),m=r(67801),g=r(32857),f=r(68065),Z=r(30772),v=r(79810);const y=Object.freeze({xSmall:"xSmall",small:"small",medium:"medium",large:"large"}),_=Object.freeze({center:"center",topLeft:"topLeft",topCenter:"topCenter",topRight:"topRight",bottomLeft:"bottomLeft",bottomCenter:"bottomCenter",bottomRight:"bottomRight"}),b=(e,t)=>{const r={top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(e){case _.topLeft:return{...r,top:t,left:t};case _.topCenter:return{...r,top:t,left:"50%",transform:"translateX(-50%)"};case _.topRight:return{...r,top:t,right:t};case _.bottomLeft:return{...r,bottom:t,left:t};case _.bottomCenter:return{...r,bottom:t,left:"50%",transform:"translateX(-50%)"};case _.bottomRight:return{...r,bottom:t,right:t};case _.center:return{...r,top:"50%",left:"50%",transform:"translate(-50%, -50%)"};default:return r}},C=e=>{const t={[_.topLeft]:["translateY(16px)","translateY(0px)"],[_.topCenter]:["translateX(-50%) translateY(16px)","translateX(-50%) translateY(0px)"],[_.topRight]:["translateY(16px)","translateY(0px)"],[_.bottomLeft]:["translateY(16px)","translateY(0px)"],[_.bottomCenter]:["translateX(-50%) translateY(16px)","translateX(-50%) translateY(0px)"],[_.bottomRight]:["translateY(16px)","translateY(0px)"],[_.center]:["translateX(-50%) translateY(calc(-50% + 16px))","translateX(-50%) translateY(-50%)"]};return{animationDuration:"400ms",animationTimingFunction:"cubic-bezier(0.22, 1, 0.36, 1)",animationName:{from:{opacity:0,transform:t[e][0]},to:{opacity:1,transform:t[e][1]}}}},S={[y.xSmall]:"480px",[y.small]:"640px",[y.medium]:"800px",[y.large]:"100%"},P=(0,v.zo)("div",(e=>{let{$theme:t,$size:r,$placement:o=_.center}=e;const i="16px",n="40px";return{display:"flex",flexDirection:"column",alignItems:"center",position:"fixed",maxHeight:"calc(100vh - (2 * 40px))",maxWidth:"calc(100% - (2 * 40px))",borderRadius:t.borders.radius500,boxShadow:t.lighting.shallowBelow,backgroundColor:t.colors.backgroundPrimary,color:t.colors.contentPrimary,overflow:"hidden",border:"none",paddingBottom:t.sizing.scale800,width:S[r],...b(o,n),...C(o),"@media (max-width: 599px)":{width:"calc(100% - (2 * 16px))",paddingBottom:0,maxWidth:"none",...b(_.bottomCenter,i),...C(_.bottomCenter)}}}));P.displayName="StyledRoot";const I=(0,v.zo)("div",(e=>{let{$theme:t}=e;return{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:t.colors.backgroundOverlay,animationDuration:"100ms",animationName:{from:{opacity:0},to:{opacity:1}}}}));I.displayName="StyledOverlay";const B=(0,v.zo)("div",(()=>({flex:1,overflowY:"auto",position:"relative",width:"100%"})));function w(e){return 1===e?{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:`${e}`,WebkitBoxOrient:"vertical"}}const O=(0,v.zo)("div",(e=>{let{$theme:t,$numHeadingLines:r=2,$shiftLeft:o}=e;return{position:"sticky",top:0,paddingTop:t.sizing.scale800,paddingLeft:t.sizing.scale800,paddingRight:o?"52px":t.sizing.scale800,paddingBottom:t.sizing.scale300,"@media (max-width: 599px)":{paddingLeft:t.sizing.scale600,paddingRight:o?"52px":t.sizing.scale600},backgroundColor:t.colors.backgroundPrimary,...w(r),...t.typography.HeadingMedium}}));O.displayName="StyledHeading";const x=(0,v.zo)("div",(e=>{let{$theme:t}=e;return{marginBottom:t.sizing.scale800,paddingLeft:t.sizing.scale800,paddingRight:t.sizing.scale800,"@media (max-width: 599px)":{paddingLeft:t.sizing.scale600,paddingRight:t.sizing.scale600},...t.typography.ParagraphLarge}}));x.displayName="StyledBody";var z=r(33990);function M(e){if((0,c.isValidElement)(e))return e;if("function"==typeof e){const t=e;return(0,z.tZ)(t,{})}return null}const L=e=>{const t={...e.overrides,BaseButton:{...e.overrides?.BaseButton,style:{position:"absolute",top:"16px",right:"8px",backgroundColor:"rgba(255, 255, 255, 0.6)",zIndex:1,...e.overrides?.BaseButton?.style}}};return(0,z.tZ)(g.Z,{kind:f.TO.secondary,shape:f.X3.circle,...e,overrides:t,children:(0,z.tZ)(Z.Z,{size:36})})},k=e=>{let{artwork:t,buttonDock:r,children:o,onDismiss:i,showDismissButton:n=!0,hasOverlay:a=!0,heading:l,isOpen:s,overrides:d={},placement:g=_.center,numHeadingLines:f=2,size:Z=y.xSmall,autoFocus:v=!0}=e;const[b,C]=(0,p.jb)(d.Root,P),[S,w]=(0,p.jb)(d.ScrollContainer,B),[k,T]=(0,p.jb)(d.Heading,O),[D,U]=(0,p.jb)(d.Overlay,I),[E,$]=(0,p.jb)(d.Body,x),[A,R]=(0,p.jb)(d.ButtonDock,m.Z),[N,X]=(0,p.jb)(d.DismissButton,L),G=(0,c.useRef)(null),H=(0,c.useRef)("undefined"!=typeof document?document?.body?.style?.overflow:"");return(0,c.useEffect)((()=>{const e=H.current;return document.body.style.overflow=s&&a?"hidden":e,()=>{document.body.style.overflow=e}}),[s,a]),s?(0,z.BX)(h.Z,{onDocumentClick:function(e){e.target&&e.target instanceof HTMLElement&&e.target.contains(G.current)&&i&&i()},onEscape:function(){i&&i()},children:[a&&(0,z.tZ)(D,{ref:G,...U}),(0,z.tZ)(u.ZP,{returnFocus:!0,autoFocus:v,children:(0,z.BX)(b,{$size:Z,$placement:g,role:"dialog","aria-labelledby":"dialog-title",...C,children:[i&&n&&(0,z.tZ)(N,{onClick:()=>i(),...X}),(0,z.BX)(S,{...w,tabIndex:0,children:[M(t),(0,z.tZ)(k,{$numHeadingLines:f,$shiftLeft:n,id:"dialog-title",...T,children:l}),(0,z.tZ)(E,{...$,children:o})]}),r&&(0,z.tZ)(A,{...r,...R})]})})]}):null};var T=r(59210),D=r(14016),U=r(46933),E=r(86695),$=r(58984),A=r(15070),R=r(24484);var N=r(33535),X=r(58092),G=r(79406),H=r("__fusion__1019"),W=r(68799),Y=r(61127),V=r(81231),F=r(80341),j=r(20196),K=r(83059),q=r("__fusion__692");const Q=(e,t)=>{const r=e?t.sizing.scale600:0,o=e?0:t.sizing.scale800;return`${r} ${o} ${t.sizing.scale600} ${o}`},J=(0,n.zo)("div",(e=>{let{$theme:t,$isMobile:r=!1}=e;return{margin:Q(r,t)}})),ee=e=>{let{defaultSelectedStoreUuid:t}=e;const{cmpQuery:r}=(0,i.ZP)(["storeSwitcherActionableBannerPayload"]),n=o.useRef(!1),a=(0,N.ZP)(),{isMobile:l}=(0,s.hU)(),{enqueue:c}=(0,j.Ds)(),u=(0,D.T)(),h=o.useCallback((e=>{c({message:u("smart_cart.banner_snackbar.text",{storeName:e}),startEnhancer:()=>(0,z.tZ)(q.default,{})},K.t.short)}),[c,u]),{onSelectStore:p}=(0,F.R)(t);return(0,z.tZ)(d.a,{source:r,enableLoadingForRefetch:!0,loading:()=>null,error:()=>null,loaded:e=>{const t=e?.checkoutPayloads?.storeSwitcherActionableBannerPayload;t?.actionableBanner&&!n.current&&(a("eats:smart_cart_switch_suggestion_shown",{suggestedStorePosition:"unknown"}),n.current=!0);const r=t?.actionableBanner?.actionMetadata,o=r?.switchStoreMetadata;return t?.actionableBanner?.bannerModel?(0,z.tZ)(J,{$isMobile:l,children:(0,z.tZ)(V.Z,{viewModel:t.actionableBanner?.bannerModel,onClick:()=>{o?.storeWithProduct&&(a("eats:smart_cart_switch_suggestion_click"),p(o?.storeWithProduct),h(o?.storeWithProduct?.merchantName))},noMargin:!0})}):null}})},te="uev2.smart-cart-ftux-tooltip.seen",re=(0,n.zo)("div",(e=>{let{$theme:t,$isMobile:r=!1}=e;return{margin:`${r?t.sizing.scale600:0} 0 0 0 !important`}})),oe=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{padding:`${t.sizing.scale400} 0`,width:"256px",display:"flex",justifyContent:"space-between",alignItems:"center",...t.typography.ParagraphSmall}})),ie=(0,n.zo)(H.default,{cursor:"pointer"}),ne=e=>{let{defaultSelectedStoreUuid:t}=e;const{cmpQuery:r}=(0,i.ZP)(["canonicalProductStorePickerPayload"]),{onSelectStore:n,isLoading:c,error:u,resetErrorState:h}=(0,F.R)(t),{isMobile:p}=(0,s.hU)(),m=(0,D.T)(),[g,f]=o.useState(!1);o.useEffect((()=>{const e=(0,W.Z7)(te);(0,Y.Z)(e)&&f(!0),(0,Y.Z)(e)&&g&&(0,W.pc)(te,{seen:!0})}),[g]);const Z=(0,N.ZP)(),v=o.useRef(!1),y=(0,$.I0)(),_=(0,A.v)((e=>e?.smartCart?.hasPreviouslyLoaded||!1)),b=(0,A.v)((e=>e?.smartCart?.storeWithProducts||[])),C=(0,A.v)((e=>e?.smartCart?.scrollPosition||0));return c?(0,z.tZ)(a.T,{}):u?(0,z.tZ)(k,{isOpen:Boolean(u),heading:m("components.genericError.title"),buttonDock:{primaryAction:(0,z.tZ)(E.zx,{onClick:()=>{h()},children:m("ducks.uiModalAlertGeneric.defaultConfirmLabel")?.toUpperCase()})},children:(0,z.tZ)(T.Yl,{children:(0,z.tZ)(U.v,{id:"shared.genericServerError"})})}):(0,z.tZ)(d.a,{source:r,enableLoadingForRefetch:!0,loading:()=>_?(0,z.tZ)(a.T,{}):null,error:()=>null,loaded:e=>{const r=e?.checkoutPayloads?.canonicalProductStorePickerPayload?.storesWithProductPayload;r?.storesWithProduct&&!v.current&&(Z("eats:smart_cart_shown"),v.current=!0);let o=r?.storesWithProduct;return o&&r?.defaultSelectedStoreUuid?(_||(o=((e,t)=>{const r=e.find((e=>e.storeUuid===t));return r&&(e.splice(e.indexOf(r),1),e.unshift(r)),e})(o,r?.defaultSelectedStoreUuid)),_&&b&&(o=((e,t,r)=>{const o=e.findIndex((e=>e.storeUuid===r)),i=t.find((e=>e.storeUuid===r)),n=t.sort(((t,r)=>{const o=e.findIndex((e=>e.storeUuid===t.storeUuid)),i=e.findIndex((e=>e.storeUuid===r.storeUuid));return(-1===o?Number.MAX_SAFE_INTEGER:o)-(-1===i?Number.MAX_SAFE_INTEGER:i)}));return i&&o>2&&(n.splice(n.indexOf(i),1),n.unshift(i)),n})(b,o,r?.defaultSelectedStoreUuid),o[0]?.storeUuid===r?.defaultSelectedStoreUuid&&C>0&&y((0,R.tK)(0))),(0,z.tZ)(X.Z,{content:()=>(0,z.BX)(oe,{children:[(0,z.tZ)(U.v,{id:"smart_cart.ftux_tooltip.text"}),(0,z.tZ)(ie,{onClick:()=>f(!1)})]}),showArrow:!0,placement:p?G.r4.bottom:G.r4.bottomLeft,isOpen:g,overrides:{Body:{style:e=>{let{$theme:t}=e;return{marginLeft:p?0:t.sizing.scale800}}}},children:(0,z.BX)(re,{$isMobile:p,children:[(0,z.tZ)(ee,{defaultSelectedStoreUuid:t}),(0,z.tZ)(l.Z,{displayType:"horizontal",storesWithProducts:o,onSelectStore:e=>{if(e.storeUuid===r?.defaultSelectedStoreUuid)return;_||y((0,R.M4)()),o&&y((0,R.qw)(o));const t=r?.storesWithProduct?.findIndex((t=>t.storeUuid===e?.storeUuid));Z("eats:smart_cart_store_switched",{positionOfSelectedStore:t?.toString()||"unknown",signposts:e?.tags&&e?.tags[0]?.text?e?.tags[0]?.text:""}),n(e)},expansionMode:"show_all",defaultSelectedStoreUuid:r?.defaultSelectedStoreUuid,title:r.title,isInCart:!0,isMobile:p})]},e?.draftOrderUUID)})):null}})}},37740:(e,t,r)=>{r.d(t,{Z:()=>I});var o=r(91631),i=r(14016),n=r(47986),a=r(91931),l=r(33497),s=r(36151),d=r(73518),c=r(33990);function u(e,t){return(0,c.tZ)(d.Z,{viewBox:"0 0 24 24",ref:t,...e,children:(0,c.tZ)("path",{d:"M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1zm6 13h-8V4h3v7h5v3z"})})}const h=s.forwardRef(u);var p=r(36278),m=r(83960),g=r(940),f=r(52298),Z=r(20485),v=r(29194),y=r(50262),_=r(94813);const b=(0,a.zo)("button",(e=>{let{disabled:t,$theme:r}=e;return{...(0,l.Z)({$theme:r}),background:r.colors.backgroundSecondary,justifyContent:"left",display:"flex",flexDirection:"row",cursor:t?"default":"pointer"}})),C=(0,a.zo)("div",(e=>{let{$textDirection:t}=e;return{display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"ltr"===t?"left":"right"}})),S=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),P=(0,a.zo)("div",{marginLeft:"auto"}),I=e=>{const t=(0,_.TH)(),r=(0,o.k6)(),a=(0,i.T)(),l=(0,m.Z)(),s=l.isDraftOrderCreator,{cartLockOptions:d}=l||{},u=(0,Z.Z)(d?.deadline),I=(0,v.gm)(),B=u?d?.deadline.lockBeforeScheduledInMinutes||!s?a("go.order_by.date_and_time",{shortDateTime:u}):a(d?.autoSubmit?"go.order_will_be_placed_automatically":"go.deadline.gobs.text",{shortDateTime:u}):null;return(0,c.BX)(c.HY,{children:[(0,c.BX)(b,{onClick:()=>{r.push((0,n.vN_)(t,"editGroupOrderDeadline"))},disabled:!s,children:[(0,c.tZ)(h,{size:22}),(0,c.tZ)(p.sA,{}),(0,c.tZ)(C,{$textDirection:I,children:(0,c.tZ)(S,{children:d?.deadline.lockAtInMs||d?.deadline.lockBeforeScheduledInMinutes?B:a("go.no_order_deadline")})}),s?(0,c.BX)(c.HY,{children:[(0,c.tZ)(p.sA,{}),(0,c.tZ)(P,{children:(0,c.tZ)(g.Z,{size:16,color:"contentInverseTertiary"})})]}):null]}),(0,c.tZ)(f.ZP,{$height:24}),(0,c.tZ)(y.a,{gutterWidth:e.gutterWidth})]})}},30586:(e,t,r)=>{r.d(t,{Z:()=>ie});var o=r(43193),i=r(46933),n=r(52246),a=r(91631),l=r(69744),s=r(33535),d=r(72275),c=r(10825),u=r(91931),h=r(14016),p=r(55758);function m(e){const t=(0,p.d)(),r=e.diningMode||t;if(!r)return e.delivery;switch(r){case"PICKUP":return e.pickup;case"DINE_IN":return e.dineIn;case"ON_PREMISE_DELIVERY":return e.onPremiseDelivery?e.onPremiseDelivery:e.delivery;default:return e.delivery}}var g=r(64388),f=r(70247),Z=r(15649),v=r(60362),y=r(83960),_=r(29192),b=r(33990);const C=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary}})),S=()=>{const e=(0,h.T)(),{serverCart:t}=(0,f.iQ)(),{store:r}=(0,g.ZP)(t.data?.storeUuid),o=(0,Z.Z)(),{deliveryAddress:i,deliveryTime:n,diningMode:a=_.k5.DELIVERY}=(0,y.Z)();if(!n||!i||!a)return null;const{date:l,endTime:s}="date"in n&&n||{},d={userAddress:i?.address.address1,storeAddress:r.data?.location.streetAddress,...l&&void 0!==s&&{time:(0,v.CJ)(o,s),date:(0,v.u4)(o,l)}},[c,u,p]=l?(0,v.Y3)(l)?[e("multicart.deliver_scheduled_today",d),e("multicart.dine_in_scheduled_today",d),e("multicart.pickup_scheduled_today",d)]:(0,v.Ei)(l)?[e("multicart.deliver_scheduled_tomorrow",d),e("multicart.dine_in_scheduled_tomorrow",d),e("multicart.pickup_scheduled_tomorrow",d)]:[e("multicart.deliver_scheduled",d),e("multicart.dine_in_scheduled",d),e("multicart.pickup_scheduled",d)]:[e("multicart.deliverNow",d),e("multicart.dineInNow",d),e("multicart.pickupNow",d)];return(0,b.tZ)(C,{children:(0,b.tZ)(m,{diningMode:a,delivery:c,dineIn:u,pickup:p})})};var P=r(19496),I=r(34456),B=r(82133),w=r(80341),O=r(87444),x=r(58442),z=r(94813),M=r(91066),L=r(10312),k=r(76150),T=r(19759);const D=(0,u.zo)(n.rU,(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),U=(0,u.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.action}}));const E=function(e){let{mealPlanUUID:t,isGroupOrderOwner:r}=e;const o=(0,z.TH)(),{mealPlan:i}=(0,M.Z)(t),n=(0,h.T)(),{closeSidebarCart:a}=(0,k.Lb)(),l=(0,s.ZP)(),d=(0,x.P)(n("shared.orderInfo.part_of"),{displayText:(0,b.tZ)(U,{children:i?.name})});return(0,b.tZ)(D,{to:(0,L.P1)(o,t),onClick:()=>{l("eats:meal_plan_view_button",{mealPlanUUID:t,role:(0,T.cY)(r,!0),source:"cart-subtitle"}),a()},children:d})};var $=r(72179),A=r(32857),R=r(68065),N=r(10015),X=r(5639),G=r("__fusion__1547"),H=r("__fusion__859"),W=r(79857),Y=r(34626),V=r(47986),F=r(26705),j=r(19681);const K=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",gap:t.sizing.scale600}})),q=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{flex:1,gap:t.sizing.scale100}})),Q=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingLarge,padding:0,overflowWrap:"anywhere"}})),J=(0,u.zo)(n.rU,(e=>{let{$theme:t,$isCartDrafting:r}=e;return{...r?{...t.typography.DisplayBold4XSmall}:{...t.typography.HeadingLarge},":hover":{borderBottom:`1px solid ${t.colors.blackHover}`}}})),ee=(0,u.zo)(n.rU,(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),te=()=>{const{restaurantLink:e,restaurantLinkNode:t,onGoToStore:r}=(0,d.Z)();return(0,b.tZ)(ee,{to:e,onClick:r,children:t})},re=e=>{const{isMobile:t}=(0,X.hU)(),{isBundledOrder:r,isGroupOrder:o}=(0,f.Dz)(),{storeTitle:n,restaurantLink:a,title:l,onGoToStore:s}=(0,d.Z)(),c=o||e.shouldShowSmartCartTitle;return r?(0,b.tZ)(Q,{children:(0,b.tZ)(i.v,{id:"cart.title.bundled_order"})}):!e.isCartDrafting||c||t?c?(0,b.tZ)(Q,{children:l}):(0,b.tZ)(J,{$isCartDrafting:e.isCartDrafting,to:a,onClick:s,children:n}):(0,b.tZ)(N.GP,{labelSize:"large"})},oe=e=>{const t=(0,a.k6)(),r=(0,z.TH)(),{user:o}=(0,Y.Z)(),{isMobile:i}=(0,X.hU)(),{isCartDrafting:n}=(0,$.Z)(),l=(0,W.Z)(),{isBundledOrder:s,isGroupOrder:d}=(0,f.Dz)(),{allowGroupOrder:c}=(0,F.j)({store:e.store});return i&&c?(0,b.tZ)("div",{children:n&&l&&!s?d&&o.data?.isLoggedIn?(0,b.tZ)(A.Z,{"data-testid":"share-group-order",kind:R.TO.tertiary,onClick:()=>t.push((0,V.vN_)(r,"shareGroupOrder")),children:(0,b.tZ)(H.default,{size:20})}):(0,b.tZ)(A.Z,{"data-testid":"start-group-order",kind:R.TO.tertiary,onClick:()=>t.push((0,V.Ljk)(r,(0,V.Btk)(e.store))),children:(0,b.tZ)(G.default,{size:20})}):null}):null},ie=e=>{let{store:t,onCartClose:r=l.Z,onClearCart:i,cartActionsType:n}=e;const{hasGroupOrder:a}=(0,y.Z)(),{isCartDrafting:d}=(0,$.Z)(),u=(0,s.ZP)(),h=(0,c.Z)(),p=(0,f.Dz)(),{isGroupOrder:m,isBundledOrder:g,mealPlanUUID:Z,isGroupOrderOwner:v}=p,[_,C]=o.useState(!1),x=()=>C(!1),z=(0,B.xZ)(),{isMobile:M}=(0,X.hU)();o.useEffect(h,[]);const L=(0,O.Z)("canonical_product_smart_cart"),{currentCartIsSmartCart:k}=(0,w.R)(),T=k&&L,D=o.useRef(!0),U="bottomsheet"===n;return o.useEffect((()=>{D.current&&u("eats:cart_view",{draftOrderUuid:p.draftOrderUUID,isMulticart:"true",storeUuid:p.storeUUID??"",isGroupOrder:String(p.isGroupOrder),isDraftOrderParticipant:String(p.isGroupOrderParticipant),isBillSplitOrder:String(p.isBillSplitOrder),cartView:z,isBundledOrder:p.isBundledOrder,deliveryType:p.draftOrder?.deliveryType,isScheduledOrder:p.isScheduledOrder,...p.isBundledOrder&&{storePreCheckoutBundling:{sourceType:"BUNDLED_STORE"}},isDrafting:d}),D.current=!1}),[u,p,z,d]),(0,b.BX)(K,{"data-test":"cart-header",children:[(0,b.BX)(q,{children:[(0,b.tZ)(re,{isCartDrafting:d,shouldShowSmartCartTitle:T}),m&&(0,b.BX)(b.HY,{children:[Z?(0,b.tZ)(E,{mealPlanUUID:Z,isGroupOrderOwner:v}):(0,b.tZ)(te,{}),(0,b.tZ)(P.Z,{})]}),d&&m&&!g||d&&!m&&!g&&M?(0,b.tZ)(S,{}):null]}),(0,b.tZ)(oe,{store:t}),!d||a?(0,b.tZ)(j.Z,{store:t,onClearCart:i,onCartClose:r,onCloseCartActions:x,bottomSheet:U,openCartActions:()=>C(!0)}):null,U?(0,b.tZ)(I.O,{store:t,onCartClose:r,onClearCart:i,onCloseList:x,cartActionsOpen:_}):null]})}},19496:(e,t,r)=>{r.d(t,{Z:()=>f});var o=r(40017),i=r(40606),n=r(49201),a=r(46933),l=r(15649),s=r(83960),d=r(91931),c=r(22395),u=r(69630),h=r(70247),p=r(33990);const m=(0,d.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentTertiary}})),g=(0,d.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.contentPrimary}})),f=()=>{const e=(0,l.Z)(),{draftOrderMaybe:t}=(0,h.Dz)(),{hasGroupOrder:r}=(0,s.Z)(),d=(0,u.Z)();return r?(0,p.tZ)(i.Z,{source:t,loaded:t=>{const r=t.spendingLimitAmount,o=r.currencyCode;if(!r||!o)return null;const i=r.amount,l=(0,n.xG)(e,o,i);return(0,p.tZ)(p.HY,{children:d?(0,p.BX)(p.HY,{children:[(0,p.tZ)(c.Z,{spaces:2,color:"contentTertiary"}),(0,p.tZ)(g,{children:(0,p.tZ)(a.v,{id:"go.spending_limit",data:{spendingLimit:l}})})]}):(0,p.BX)(p.HY,{children:[(0,p.tZ)(c.Z,{spaces:2,color:"contentTertiary"}),(0,p.tZ)(m,{children:(0,p.tZ)(a.v,{id:"go.spending_limit_summary.v2",data:{spendingLimit:l}})})]})})},error:()=>null,loading:()=>(0,p.tZ)(o.sM,{$width:"200px"})}):null}},10892:(e,t,r)=>{r.d(t,{Z:()=>v});var o=r(36151),i=r(74057),n=r(43330),a=r(14362),l=r(94813),s=r(64388),d=r(47986),c=r(87444),u=r(15070),h=r(75892),p=r(1257),m=r(27871),g=r(71051),f=r(33535),Z=r(17557);const v=function(e){const t=(0,u.v)((e=>{let{checkoutPresentation:t}=e;return t})),r=(0,u.v)((e=>{let{upsell:t}=e;return t})),v=r?.upsellFeed?.storeUUID===e?r:null,y=(0,u.v)((e=>{let{user:t}=e;return t.data?.isLoggedIn??!1})),_=(0,l.TH)(),{store:b}=(0,s.ZP)(e),{diningMode:C}=(0,i.Z)(e),{hasValidPayment:S}=(0,n.J)(),P=(0,o.useRef)(S),{entryPoint:I}=(0,d.RAN)(_,["entryPoint"]),B=(0,a.Z)()&&"editOrder"===I,w=(0,c.Z)("upsell_use_catalog_section"),O=Boolean(b?.data?.isOpen),x=(0,Z.Z)(),z=(0,p.Z)((0,m.B0)("upsellFeed"))??v?.upsellFeed,M=z?.feedItems,L=z?.catalogSections,k=(0,o.useMemo)((()=>M||[]),[M]),T=(0,o.useMemo)((()=>L??[]),[L]),D=(0,o.useContext)(g.k7),U=(0,f.ZP)(),E=(0,o.useMemo)((()=>{const e=k.filter((e=>!e.hasCustomizations&&!(0,h.q)(e)));let t=[];return e.length>=3?t=e.slice(0,5):(t=[],U("eats:magic_upsell_too_few_items",{feedItems:e})),t}),[U,k]);return(0,o.useEffect)((()=>{const e=k.filter(h.q);e.length&&U("eats:magic_upsell_invalid_items",{feedItems:e})}),[U,k]),(0,o.useMemo)((()=>{const r=y&&!B&&(x||P.current)&&!t.data?.validationErrors?.length&&e&&D.get("checkoutUpsellClosedStoreUuid")!==e&&"SHIPMENT"!==C&&(E.length>0||w&&T.length>0)&&O;return{canShow:r,title:z?.title?.text??"",upsellItems:r?E:[],catalogSections:r?T:[]}}),[y,B,x,t.data?.validationErrors?.length,e,D,C,E,w,T,O,z?.title?.text])}},75892:(e,t,r)=>{r.d(t,{q:()=>o});const o=e=>!e.price||!e.title?.text},43330:(e,t,r)=>{r.d(t,{J:()=>a});var o=r(62436),i=r(27871),n=r(15070);const a=()=>{const e=(0,n.v)((e=>{let{draftOrder:t}=e;return t})),t=Boolean(e.draftOrder.data?.draftOrder.businessDetails?.voucherUUID),r=(0,i.B0)("total"),{selectedPersonalPayment:a,selectedBusinessPayment:l,paymentIntent:s,currentStep:d}=(0,o.IM)(),c=t&&0===r.data?.total.value.amountE5,u=Boolean("personal"===s&&(a?.uuid||c)),h=Boolean("business"===s&&"COMPLETE"===d&&l?.paymentProfileUuid);return{hasValidPayment:u||h,validPersonalPayment:u,validBusinessPayment:h}}},51741:(e,t,r)=>{r.d(t,{Z:()=>_});var o=r(59210),i=r(91931),n=r(14016),a=r(46933),l=r(55722),s=r(52298),d=r(45106),c=r(35586),u=r(83960),h=r(91028),p=r(93633),m=r(33990);const g=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",height:"48px",padding:"24px",position:"sticky",top:0,zIndex:1,background:t.colors.backgroundPrimary}})),f=(0,i.zo)("div",{padding:"0 24px"}),Z=(0,i.zo)("div",{display:"flex",flexDirection:"column"}),v=(0,i.zo)("div",{padding:0}),y=(0,i.zo)("button",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:t.borders.radiusFull}})),_=()=>{const e=(0,u.Z)(),t=(0,d.Z)(),r=(0,n.T)(),{cartsWithItems:i,cartsWithoutItems:_}=(0,c.Z)(),{setIsManagingGroupOrder:b}=(0,p.Z)(),{isDraftOrderCreator:C,hasGroupOrder:S}=e;return S?t?(0,m.tZ)(h.aM,{groupedItems:i}):(0,m.BX)(v,{children:[(0,m.tZ)(g,{children:(0,m.tZ)(y,{onClick:()=>b(!1),children:(0,m.tZ)(l.c.ArrowLeft,{size:24})})}),(0,m.BX)(Z,{children:[(0,m.tZ)(s.ZP,{$height:16}),(0,m.BX)(m.HY,{children:[(0,m.tZ)(f,{children:(0,m.tZ)(o.Ih,{children:C?(0,m.tZ)(a.v,{id:"go.manage.people_header"}):(0,m.tZ)(a.v,{id:"go.manage_guests_participant_header"})})}),(0,m.tZ)(s.ZP,{$height:16}),(0,m.tZ)(h.Ef,{groupedItems:i,groupingTitle:r("go.manage.guests_with_items_label",{numGuests:i.length})}),(0,m.tZ)(h.Ef,{groupedItems:_,groupingTitle:r("go.manage.guests_without_items_label",{numGuests:_.length})})]})]})]}):null}},35972:(e,t,r)=>{r.d(t,{Q:()=>d});var o=r(33157),i=r(52298),n=r(52692),a=r(83960),l=r(90961),s=r(33990);const d=e=>{let{$spaceBefore:t,isCheckout:r}=e;const{isHandledHighCapacityOrder:d}=(0,a.Z)(),c=(0,l.Z)();return d&&c?(0,s.BX)(s.HY,{children:[(0,s.tZ)(i.ZP,{$height:t}),(0,s.tZ)(o.zW,{warning:c}),r?(0,s.BX)(s.HY,{children:[(0,s.tZ)(i.ZP,{$height:t}),(0,s.tZ)(n.Z,{$height:"1px",$margin:"0"}),(0,s.tZ)(i.ZP,{$height:t})]}):null]}):null}},90961:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(82532);function i(){const{isCartUnderMBS:e,cartWarning:t}=(0,o.f)();return e?null:t}},91066:(e,t,r)=>{r.d(t,{Z:()=>l,L:()=>s});var o=r(74622),i=r(2237),n=r(62459);var a=r(86547);const l=(e,t)=>{const r=function(e,t){const r=(0,n.Z)("getMealPlanByUuidV1"),a=(0,i.H)("getMealPlanByUuidV1",e);return(0,o.useQuery)({queryKey:a,queryFn:e=>{let{queryKey:t}=e;return r.request("getMealPlanByUuidV1",t[1])},...t?.queryObserverOptions})}({mealPlanUUID:e,includeParticipantCount:!0,includeAssociatedParticipantInfo:!0},{queryObserverOptions:{staleTime:1e4}}),l=r.data,s=((e,t)=>{const r="getMealPlanDeliveryLocationV1",i=(0,n.Z)(r),a=[r,e];return(0,o.useQuery)({queryKey:a,queryFn:()=>i.request(r,e),...t})})({placeId:l?.mealPlan?.placeReferenceInfo?.placeID??"",provider:l?.mealPlan?.placeReferenceInfo?.provider??""},{enabled:Boolean(l)&&Boolean(t?.fetchDeliveryLocation)}),d=l?.mealPlan?.associatedParticipantInfo;return{deliveryLocationQuery:s,mealPlanQuery:r,mealPlan:l?.mealPlan,isCreator:d?.role===a._b.CREATOR,isParticipant:d?.role===a._b.PARTICIPANT,participantCount:d?.participantCount??0,participantUUID:d?.participantUUID}},s=e=>["getMealPlanByUuidV1",{mealPlanUUID:e}]},97679:(e,t,r)=>{r.d(t,{Z:()=>u});var o=r(90867),i=r(51863),n=r(66064),a=r(70247),l=r(55403),s=r(87444),d=r(93801),c=r(33990);const u=e=>{let{store:t,draftOrder:r,loaded:u,isLiveOrder:h=!1}=e;const p=(0,o.Z)(),{isBundledOrder:m}=(0,a.Dz)(),{cmpQuery:g}=(0,l.Z)(),f=(0,s.Z)("canonical_product_smart_cart"),Z=t.isLoading||r?.isLoading||m&&!g.isFetched,v=Boolean(t.hasLoaded)&&Boolean(r?.hasLoaded),y=Boolean(t.data)&&Boolean(r?.data),_=t.error||r?.error,b=!f||g.isFetched;if(h){if(t.isLoading)return(0,c.tZ)(i.Z,{});if(t.error&&!t.data)return(0,c.tZ)(d.nQ,{code:500});if(t.data&&h&&b)return(0,c.tZ)(c.HY,{children:u(t.data,null)})}return Z&&!v?(0,c.tZ)(i.Z,{}):_&&!y?(0,c.tZ)(n.Z,{error:_,onClickTryAgain:p}):v&&!y?(0,c.tZ)(n.Z,{error:new Error("Request finished without loading any data"),onClickTryAgain:p}):t.data&&r?.data&&b?(0,c.tZ)(c.HY,{children:u(t.data,r?.data)}):(0,c.tZ)(i.Z,{})}},61559:(e,t,r)=>{r.d(t,{Z:()=>Be});var o=r(36151),i=r(91931),n=r(33157),a=r(15840),l=r(46933),s=r(52246),d=r(81549),c=r(22787),u=r(34567),h=r(73518),p=r(33990);function m(e,t){return(0,p.tZ)(h.Z,{viewBox:"0 0 22 22",ref:t,...e,children:(0,p.tZ)("path",{d:"M15.8 12.5c-4 0-7.2-3.2-7.2-7.2 0-2.1.9-3.9 2.2-5.2C4.8 0 .1 4.8.1 10.6s4.7 10.5 10.5 10.5c5.7 0 10.6-4.6 10.5-10.7-1.4 1.2-3.3 2.1-5.3 2.1z"})})}const g=o.forwardRef(m);function f(e,t){return(0,p.BX)(h.Z,{viewBox:"0 0 24 24",ref:t,...e,children:[(0,p.tZ)("path",{d:"M22.01 15.01L20 17.02l-2.01-2.01-1.98 1.98L18.02 19l-2.01 2.01 1.98 1.98L20 20.98l2.01 2.01 1.98-1.98L21.98 19l2.01-2.01-1.98-1.98z"}),(0,p.tZ)("path",{d:"M11 0C4.92 0 0 4.92 0 11a10.994 10.994 0 0014.03 10.57A6.5 6.5 0 0120 12.5c.65 0 1.27.09 1.86.27.09-.58.14-1.17.14-1.77 0-6.08-4.92-11-11-11zm2 11.43l-5.83 2.91-1.34-2.68L10 9.57V3h3v8.43z"})]})}const Z=o.forwardRef(f);function v(e,t){return(0,p.BX)(h.Z,{viewBox:"0 0 24 24",ref:t,...e,children:[(0,p.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.399 22.998A7.5 7.5 0 0123 10.865V7h-4V1H5v6H1v10c0 3.3 2.7 6 6 6h7.4l-.001-.002zM8 4v3h8V4H8z"}),(0,p.tZ)("path",{d:"M21 13v6h-3v-6h3zM19.5 24a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})]})}const y=o.forwardRef(v);var _=r(93356),b=r(76150),C=r(17604),S=r(32755),P=r(33535),I=r(28222),B=r(27871),w=r(14663),O=r(94813),x=r(83960),z=r(58984),M=r(15070),L=r(47986),k=r(67318),T=r(71279),D=r(62904),U=r(52298),E=r(36278),$=r(7876),A=r(79370),R=r(10892),N=r(93035),X=r(17557);const G=(0,i.zo)("div",(e=>{let{$theme:t,$isMobile:r,$hasSafeAreaBottomSpacing:o}=e;return{background:t.colors.backgroundPrimary,padding:o?`${t.sizing.scale600} ${t.sizing.scale600} ${t.sizing.scale900} ${t.sizing.scale600}`:r?t.sizing.scale600:t.sizing.scale800}})),H=(0,i.zo)("div",{display:"flex",flexDirection:"row"}),W=(0,i.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,marginBottom:"4px"}})),Y=(0,i.zo)("p",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),V=(0,i.zo)("div",{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),F={$width:"20px"},j=(0,i.w1)(c.Z,(()=>({marginTop:"8px"}))),K=e=>{let{children:t,isMobile:r,store:o}=e;const i=(0,O.TH)(),n=r?"/cart":void 0,a=(0,k.X)(i,{storeUuid:o.uuid,entryPoint:"multicart"},n);return(0,p.tZ)(u.Z,{$as:s.rU,to:a,children:t})},q=e=>{let{icon:t,title:r,message:o,primaryButton:i,secondaryButton:n}=e;const a=(0,O.TH)(),d=(0,L.dat)(a),{closeSidebarCart:c}=(0,b.Lb)(),h=(0,I.Z)();return(0,p.BX)(p.HY,{children:[(0,p.BX)(H,{children:[(0,p.tZ)(E.KG,{$width:"2px"}),(0,p.tZ)(V,{children:t}),(0,p.tZ)(E.KG,{...F}),(0,p.BX)("div",{children:[(0,p.tZ)(W,{children:r}),(0,p.tZ)(Y,{children:o})]})]}),(0,p.tZ)(U.ZP,{$height:16}),i||(0,p.tZ)(u.Z,{$as:s.rU,to:d,onClick:c,children:(0,p.tZ)(l.v,{id:"shared.findAnotherStore"})}),n||(i&&!h?(0,p.tZ)(j,{$as:s.rU,to:d,onClick:c,children:(0,p.tZ)(l.v,{id:"shared.findAnotherStore"})}):null)]})},Q=e=>{let{isMobile:t,store:r,validationError:o}=e;const i=(0,z.I0)(),{diningMode:n}=(0,x.Z)(),a=(r.supportedDiningModes||[]).find((e=>{let{mode:t}=e;return"PICKUP"===t})),s="PICKUP"!==n&&Boolean(a?.isAvailable)?(0,p.tZ)(u.Z,{onClick:()=>{i((0,$.A0)(r.uuid,{storeDiningMode:"PICKUP"}))},children:(0,p.tZ)(l.v,{id:"components.checkout.switch_to_pickup"})}):null;return(0,p.tZ)(q,{icon:(0,p.tZ)(y,{size:23}),title:o.alert?.title?.text||"",message:o.alert?.body?.text||"",primaryButton:s})},J=e=>{let{isMobile:t,store:r}=e;const o=(0,_.A4)(),{deliveryAddress:i,diningMode:n}=(0,x.Z)(),a=(0,C.gx)(),s=(0,S.ZP)(),d=Boolean(a?.determinedFromBackend)&&a?.isSchedulable,c=d?(0,p.tZ)(K,{store:r,isMobile:t,children:(0,p.tZ)(l.v,{id:"shared.reschedule"})}):null,u=r.isOpen?(0,p.tZ)(j,{onClick:()=>{o.updateDraftOrder({overrides:{deliveryTime:{asap:!0},deliveryLocation:i,diningMode:n}})},children:(0,p.tZ)(l.v,{id:"shared.deliverNow"})}):null;return(0,p.tZ)(q,{icon:(0,p.tZ)(Z,{size:23}),title:a?.bottomSheetTitleMessage&&d?a.bottomSheetTitleMessage:(0,p.tZ)(l.v,{id:"multicart.validation_not_accepting_orders"}),message:a?.bottomSheetSubtitleMessage&&d?a.bottomSheetSubtitleMessage:(0,p.tZ)(l.v,{id:"multicart.validation_generic_unavailable_store"}),primaryButton:c,secondaryButton:s?.type===D.no?void 0:u})},ee=e=>{let{isMobile:t,store:r}=e;const o=(0,C.gx)(),i=Boolean(o?.determinedFromBackend)&&o?.isSchedulable,n=i?(0,p.tZ)(K,{store:r,isMobile:t,children:(0,p.tZ)(l.v,{id:"shared.scheduleOrder"})}):null;return(0,p.tZ)(q,{icon:(0,p.tZ)(g,{size:23}),title:o?.bottomSheetTitleMessage&&i?o.bottomSheetTitleMessage:(0,p.tZ)(l.v,{id:"multicart.validation_not_accepting_orders"}),message:o?.bottomSheetSubtitleMessage&&i?o.bottomSheetSubtitleMessage:(0,p.tZ)(l.v,{id:"multicart.validation_generic_unavailable_store"}),primaryButton:n})},te=e=>{const t=(0,z.I0)(),r=(0,N.k6)(),i=(0,O.TH)(),n=(0,M.v)((e=>{let{user:t}=e;return t.data?.isLoggedIn??!1})),a=(0,S.ZP)(),{isDraftOrderParticipant:l}=(0,x.Z)(),s=(0,B.CF)(),{cartItems:c,upsellFeed:u}=(0,B.ZP)(["cartItems","upsellFeed"]).checkoutPayloads,h=(0,A.Z)(),m=(0,P.ZP)(),g=a?.type===D.Sc,f=h&&c&&(0,T.O)(c),Z=Boolean(a?.alert?.richBody),v=!l&&(s.isLoading||g&&!f),y=(0,w.Z)(),{canShow:_}=(0,R.Z)(e.store.uuid),b=(0,X.Z)();if(o.useEffect((()=>{b&&n&&t({type:"UPSELL_FEED_SUCCESS",payload:u})}),[u,t,b,n]),!l&&Boolean(a?.type)&&!Z){if(m("eats:multicart_error",{error:a}),a?.type===D.pc)return(0,p.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:y,children:(0,p.tZ)(ee,{...e})});if(a?.type===D.Ys)return(0,p.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:y,children:(0,p.tZ)(Q,{...e,validationError:a})});if(a?.type===D.no)return(0,p.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:y,children:(0,p.tZ)(J,{...e})})}return(0,p.tZ)(G,{$isMobile:e.isMobile,$hasSafeAreaBottomSpacing:y,children:(0,p.tZ)(d.Z,{$disabled:v,onNavigateToCheckout:e=>{b&&_&&(e.preventDefault(),r.push((0,L.IvK)(i)))}})})};var re=r(37740),oe=r(8398),ie=r(50262),ne=r(73472),ae=r(65014),le=r(43193),se=r(17941),de=r(44997),ce=r(83793),ue=r(32857),he=r(68065),pe=r(6264),me=r(91631),ge=r(74622),fe=r(3695),Ze=r(68799),ve=r(64986);const ye="LIVE_ORDER_LATE_EDIT_WARNING",_e=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,padding:t.sizing.scale600,display:"flex",flexDirection:"column",gap:t.sizing.scale400}})),be=()=>{const[e,t]=le.useState(null),r=(0,ge.useQueryClient)(),o=(0,O.TH)(),i=(0,me.k6)(),{hideSidebarCart:n}=(0,b.Lb)(),{liveOrderUuid:a}=(0,de.W)(),s=(0,P.ZP)(),d=(0,se.W)({cartType:"LIVE_ORDER",getCartFrom:"workflowId",workflowId:a,selector:e=>e.rawCartData?.liveOrder?.cart?.shoppingCart}),c=(0,pe.W)({getCartFrom:"workflowId",workflowId:a}),u=(0,ve.Z)(),h=(0,ce.E6)(d),m="SYNCING"===c.status,g=async()=>{await r.invalidateQueries(["getActiveOrdersV1"]),n(),i.replace((0,L._u3)(o,{uuid:a}))},f=e=>{switch(s("CONFIRM"===e?"eats:loe_update_order_tapped":"eats:loe_discard_updates",{workflowUuid:a}),c.status){case"AVAILABLE":case"SYNCING":c.actions?.confirmCartUpdates({type:e}).then((()=>{"CONFIRM"===e&&s("eats:loe_update_order_succeeded",{workflowUuid:a}),g()})).catch((e=>{const r=(0,Ze.Z7)(ye);let o=!0;"UPDATE_ORDER_BOTTOM_SHEET"===e?.name?("LIVE_ORDER_LATE_EDIT_WARNING"===e?.payload[0].type?(o=!r?.[a],o&&(0,Ze.pc)(ye,{...r,[a]:!0},3600),s("eats:loe_update_order_succeeded",{workflowUuid:a})):s("eats:loe_unable_update_order",{workflowUuid:a}),o&&t(e?.payload[0]),c.actions.syncCart({workflowUUID:a,orderUUID:a}),"LIVE_ORDER_LATE_EDIT_WARNING"===e?.payload[0].type&&r?.[a]&&g()):u()}))}};return(0,p.BX)(p.HY,{children:[e?(0,p.tZ)(fe.Z,{orderValidationError:e,onClose:()=>{"LIVE_ORDER_LATE_EDIT_WARNING"===e?.type&&g(),t(null)}}):null,h?(0,p.BX)(_e,{children:[(0,p.tZ)(ue.Z,{overrides:{BaseButton:{style:()=>({width:"100%"})}},size:he.NO.large,onClick:()=>f("CONFIRM"),disabled:m,children:(0,p.tZ)(l.v,{id:"shared.updateOrder"})}),(0,p.tZ)(ue.Z,{overrides:{BaseButton:{style:()=>({width:"100%",":hover":{backgroundColor:"transparent"},":active":{backgroundColor:"transparent"}})}},kind:he.TO.tertiary,size:he.NO.large,onClick:()=>f("DISCARD"),disabled:m,children:(0,p.tZ)(l.v,{id:"edit_order.discard_button"})})]}):null]})};var Ce=r(16389),Se=r(74069);const Pe=(0,i.zo)("div",{position:"sticky",bottom:0,margin:"0 !important"}),Ie=(0,i.zo)("div",{flexGrow:1}),Be=e=>{let{hasGroupOrder:t,isMobile:r,store:l,quantitySelectType:s,isLiveOrder:d}=e;const{stopTiming:c}=(0,ne.K3)(),u=(0,Se.Z)(),[h,m]=(0,i.hQ)();return(0,o.useEffect)((()=>{c(ae.B.CART_SELECTED_FROM_POPOVER,{shouldEmitTiming:!0})}),[c]),(0,p.BX)(p.HY,{children:[t?(0,p.BX)("div",{children:[(0,p.tZ)(n.IY,{$spaceAfter:16}),(0,p.tZ)(re.Z,{gutterWidth:16}),(0,p.tZ)(ie.Z,{gutterWidth:16,showAddGuestsBtn:!1,showFacePile:!0,showRemoveParticipantButton:!0})]}):(0,p.tZ)(oe.Z,{quantitySelectType:s}),(0,p.tZ)(Ie,{}),d?(0,p.tZ)(Pe,{children:(0,p.tZ)(be,{})}):(0,p.BX)(Pe,{children:[u?(0,p.tZ)(Ce.u,{styleOverrides:{bottom:m.sizing.scale600,position:"relative"},storeUUID:l.uuid,shouldRedirectToHomeAfterClearCart:!0}):null,(0,p.tZ)(a.Z,{}),(0,p.tZ)(te,{isMobile:r,store:l})]})]})}},71279:(e,t,r)=>{r.d(t,{O:()=>I,Z:()=>B});var o=r(46933),i=r(59210),n=r("__fusion__557"),a=r(91931),l=r(7646),s=r(36278),d=r(17604),c=r(32755),u=r(83960),h=r(52246),p=r(47986),m=r(94813),g=r(27871),f=r(79370),Z=r(33990);const v=(0,a.zo)("div",(e=>({display:"flex",flexDirection:"row",padding:"24px 0 16px",borderBottom:`1px solid ${e.$theme.colors.borderOpaque}`}))),y=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentSecondary}})),_=(0,a.zo)("div",{display:"flex",fledDirection:"column",alignItems:"center",justifyContent:"center"}),b=(0,a.zo)("div",{flexGrow:"1"}),C={$width:"21px"},S=()=>{const[,e]=(0,a.hQ)(),t=(0,m.TH)();return(0,Z.BX)(v,{children:[(0,Z.tZ)(_,{children:(0,Z.tZ)(n.default,{size:21,color:e.colors.contentNegative})}),(0,Z.tZ)(s.KG,{...C}),(0,Z.BX)(b,{children:[(0,Z.tZ)(i.Uc,{children:(0,Z.tZ)(o.v,{id:"go.multicart.invalid.item.heading"})}),(0,Z.tZ)(i.aM,{color:e.colors.contentSecondary,children:(0,Z.tZ)(o.v,{id:"go.multicart.invalid.item.subtext"})})]}),(0,Z.tZ)(s.KG,{$width:e.sizing.scale600}),(0,Z.tZ)(_,{children:(0,Z.tZ)(l.Bi,{$as:h.rU,to:(0,p.vN_)(t,"invalidItems"),children:(0,Z.tZ)(o.v,{id:"ro.label.view"})})})]})},P=e=>{let{error:t}=e;const{hasGroupOrder:r,isDraftOrderCreator:c}=(0,u.Z)(),[,h]=(0,a.hQ)(),p=(0,d.Ut)(t),m=(0,d.SV)(t);return p&&0!==m.length?r&&c?(0,Z.tZ)(S,{}):(0,Z.BX)(v,{children:[(0,Z.tZ)(_,{children:(0,Z.tZ)(n.default,{size:21,color:h.colors.contentNegative})}),(0,Z.tZ)(s.KG,{...C}),(0,Z.BX)(b,{children:[(0,Z.tZ)(i.Uc,{children:(0,Z.tZ)(o.v,{id:"multicart.invalid_items_proceed"})}),(0,Z.tZ)(y,{children:m.join(", ")})]}),(0,Z.tZ)(s.KG,{$width:h.sizing.scale600}),(0,Z.tZ)(_,{children:(0,Z.tZ)(l.Bi,{onClick:p,children:(0,Z.tZ)(o.v,{id:"shared.remove"})})})]}):null},I=e=>{const t=e=>e&&e.some((e=>e.cartItemActions&&e.cartItemActions.some((e=>"SCHEDULE"===e.cartItemActionType))));return e.cartItems?t(e.cartItems):!!e.cartItemsGroups&&t(e.cartItemsGroups.flatMap((e=>e.cartItems)))},B=()=>{const e=(0,c.ZP)(),t=(0,f.Z)(),{cartItems:r}=(0,g.ZP)(["cartItems"]).checkoutPayloads;if(!e||!r||t&&r&&I(r))return null;switch(e.type){case"UNAVAILABLE_ITEMS":return(0,Z.tZ)(P,{error:e});default:return null}}},31017:(e,t,r)=>{r.d(t,{X:()=>y});var o=r(7646),i=r(36151),n=r(36278),a=r(91931),l=r(52246),s=r(13865),d=r(65848),c=r(94813),u=r(76150),h=r(47986),p=r(46933),m=r(33535),g=r(41116),f=r(33990);const Z=(0,a.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale800,height:t.sizing.scale800,flex:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),v=(0,a.w1)(o.Bi,(e=>{let{$theme:t}=e;return{paddingRight:t.sizing.scale500,paddingLeft:t.sizing.scale300}})),y=()=>{const e=(0,g.g)(),t=(0,c.TH)(),{closeSidebarCart:r}=(0,u.Lb)({transitionMS:500}),o=(0,m.ZP)(),a="treatment_1"===e?(0,h.EOw)(t,{source:"zero_state_cart"}):(0,h.bPf)(t,"zero_state_cart"),y="treatment_1"===e?(0,f.tZ)(s.Z,{size:14}):(0,f.tZ)(d.Z,{size:14}),_=(0,i.useCallback)((()=>o("eats:zero_state_cart_reorder_fav_entrypoints","treatment_1"===e?{cta:"orders"}:{cta:"favorites"})),[o,e]),b="treatment_1"===e?(0,f.tZ)(p.v,{id:"shared.orders"}):(0,f.tZ)(p.v,{id:"header.menu.favourites"});return"treatment_1"!==e&&"treatment_2"!==e?null:(0,f.BX)(v,{$as:l.rU,to:a,onClick:()=>{r(),_()},children:[(0,f.tZ)(Z,{children:y}),(0,f.tZ)(n.Q3,{}),b]})}},73845:(e,t,r)=>{r.d(t,{Z:()=>l});var o=r(36151),i=r(33535),n=r(27871),a=r(24316);const l=e=>{let{cartOpen:t,store:r,draftOrder:l}=e;const s=(0,i.ZP)(),d=(0,o.useRef)({startTime:0,storeTime:0,draftOrderTime:0,checkoutPresentationTime:0}),{activeDraftOrderUUID:c}=(0,a.Z)(),u=(0,n.CF)();(0,o.useEffect)((()=>{t&&c&&(d.current.startTime=Date.now())}),[t,c]),(0,o.useEffect)((()=>{if(!d.current.startTime)return;const e=Boolean(r?.hasLoaded&&l?.hasLoaded&&u?.hasLoaded),t=Boolean(r?.data&&l?.data&&u?.data),o=Date.now()-d.current.startTime,i=(e,t)=>t&&!d[e]&&(d[e]=o);i("storeTime",r?.hasLoaded),i("draftOrderTime",l?.hasLoaded),i("checkoutPresentationTime",u?.hasLoaded),e&&d.current.startTime&&(d.current.startTime=0,t&&s("eats:cart_latency",{timing:String(o)}))}),[t,r?.hasLoaded,l?.hasLoaded,u?.hasLoaded])}},2458:(e,t,r)=>{r.d(t,{LS:()=>i,Xj:()=>n,ZP:()=>s,sY:()=>l});var o=r(43193);const i=259200,n=172800,a=e=>!e||e<=0?"00":e<10?`0${e}`:e.toString(),l=(e,t)=>{switch(t){case"minute":return Math.floor(e/60);case"hours":return Math.floor(e/3600);case"days":return Math.floor(e/86400);default:return e}},s=e=>{const[t,r]=o.useState(e);return o.useEffect((()=>{if(t>0){const e=setInterval((()=>{r(t-1)}),1e3);return()=>clearInterval(e)}}),[t,e]),(e=>({hoursLabel:a(Math.floor(e/3600)),minutesLabel:a(Math.floor(e%86400%3600/60)),secondsLabel:a(Math.round(e%86400%3600%60)),secondsLeft:e}))(t)}},20485:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(15649),i=r(83960),n=r(60362);function a(e,t){const r=(0,i.Z)(),a=(0,o.Z)(),l=t||r.deliveryTime||{};if(!e?.lockAtInMs&&!e?.lockBeforeScheduledInMinutes)return null;if(e.lockAtInMs)return(0,n.w4)(a,e.lockAtInMs);if("number"==typeof e.lockBeforeScheduledInMinutes&&l.scheduled){const t=6e4*e.lockBeforeScheduledInMinutes,r=(0,n.$m)(l.date)||new Date;return(0,n.yn)(r,l.startTime),(0,n.w4)(a,r-t)}}},96911:(e,t,r)=>{r.d(t,{Z:()=>d});var o=r(45631),i=r(36151),n=r(85191),a=r(29194),l=r(5639);const s=.5;function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=(0,a.gm)(),r=(0,i.useRef)(null),[d,u]=(0,n.Z)({threshold:s,root:r?.current}),[h,p]=(0,n.Z)({threshold:s,root:r?.current}),m=c(u),g=c(p),f=(0,l.hU)().isSafari,Z=!(f&&"rtl"===t),v=e.scrollOffset||0,y=(0,i.useCallback)((e=>{const{current:o}=r;if(!o||!o.clientWidth)return;const i="forward"===e?o.clientWidth+v:-(o.clientWidth+v),n="ltr"===t?o.scrollLeft+i:o.scrollLeft-i;o.scrollTo?o.scrollTo({left:n,behavior:"smooth"}):o.scrollLeft=n}),[t,v]),_=(0,i.useCallback)(((e,r)=>({...0===e?{ref:d}:{},...e===r-1?{ref:h}:{},$supportsScrollSnapping:Z,$textDirection:t})),[d,h,Z,t]),b=(0,i.useCallback)(((e,t)=>(0,o.Z)(e,t)),[]);return{containerRef:r,getPageChunks:b,getPageProps:_,isPreviousPageDisabled:m,isNextPageDisabled:g,handlePageChange:y,supportsScrollSnapping:Z,textDirection:t}}const c=e=>!!e?.intersectionRatio&&e.intersectionRatio>s},45631:(e,t,r)=>{r.d(t,{Z:()=>o});const o=function(e,t){const r=null==e?0:e.length;if(!r||t<1)return[];let o=0,i=0;const n=new Array(Math.ceil(r/t));for(;o<r;)n[i++]=e.slice(o,o+=t);return n}}}]);